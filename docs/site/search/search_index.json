{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"RepChain V2.0 RepChain V2.0\u529f\u80fd\u4ecb\u7ecd\u53ca\u5b89\u88c5\u90e8\u7f72 \u7acb\u523b\u8fdb\u5165","title":"\u9996\u9875"},{"location":"#repchain-v20","text":"RepChain V2.0\u529f\u80fd\u4ecb\u7ecd\u53ca\u5b89\u88c5\u90e8\u7f72 \u7acb\u523b\u8fdb\u5165","title":"RepChain V2.0"},{"location":"RepChain-2.0/","text":"\u591a\u94fe\u534f\u540c \u5e94\u7528\u6a21\u5f0f \u5355\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u540c\u65f6\u8d1f\u8d23\u4e1a\u52a1 1.\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\u7684levelDB 2.\u8981\u6784\u5efa\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo \uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09 \u4f7f\u7528\u793a\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/did \u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u4e1a\u52a1\u94fe\u53ea\u8d1f\u8d23\u4e1a\u52a1 1.\u8981\u914d\u7f6e\u4e3a\u5171\u4eablevelDB 2.\u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo \uff08\u8eab\u4efd\u94fe\uff09\u548c rep.utils.CreateGenesisInfo4NoTransaction \uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09\u548c json/credence-net/genesis.json \uff08\u4e1a\u52a1\u94fe\uff09 \u4f7f\u7528\u793a\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/multi_chain/MultiChainTest.java \u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1 1.\u8981\u914d\u7f6e\u4e3a\u5171\u4eablevelDB 2.\u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.identity.CreateIdentityGenesisInfo \uff08\u8eab\u4efd\u94fe\uff09 \u548c rep.utils.credence.CreateCredenceGenesisInfo \uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09\u548c json/credence-net/genesis.json \uff08\u4e1a\u52a1\u94fe\uff09 \u4f7f\u7528\u793a\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/multi_chain/MultiChainSeparateTest.java \u914d\u7f6e\u6587\u4ef6\u5982\u4e0b\u6240\u793a\uff0c identity-net \u4e3a\u8eab\u4efd\u94fe\u6807\u8bc6\uff0c credence-net \u4e3a\u4e1a\u52a1\u94fe\u6807\u8bc6\uff0cnode1\u53c2\u4e0e\u8eab\u4efd\u94fe\u7ec4\u7f51\uff0cnode6\u53c2\u4e0e\u4e1a\u52a1\u94fe\u7ec4\u7f51\uff0cnode1\u548cnode6\u7684LevelDB\u914d\u7f6e\u4e3a\u540c\u4e00\u4e2a\u5b58\u50a8\u76ee\u5f55\uff0cnode6\u7684 basic_chain_id \u4e3a\u8eab\u4efd\u94fe\uff1a // \u8eab\u4efd\u94fe\u53c2\u8003conf/121000005l35120456.node1/system.conf system { chain_network_id = \"identity-net\" #\u7ec4\u7f51id\uff0c\u7ec4\u7f51id\u7684\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26 basic_chain_id = \"identity-net\" #\u8d26\u6237\u3001\u8bc1\u4e66\u8eab\u4efd\u5168\u90e8\u4ea4\u7531\u81ea\u5df1\u7ba1\u7406 } storage { db_type = \"LevelDB\" #\u652f\u6301\u6570\u636e\u5e93\u7684\u7c7b\u578b\uff1aLevelDB\u3001RocksDB db_path = \"./repchaindata/data/leveldbdata\" db_name = \"215159697776981712.node1\" db_cache_size=48 #\u6570\u636e\u5e93\u8bfb\u5199\u7f13\u5b58\uff0c\u5355\u4f4d\u4e3aM block_file_type = \"localFileSystem\" block_file_path = \"./repchaindata/data/blockdata\" block_file_name = \"215159697776981712.node1\" file_max_length = 100 #\u5355\u4f4d\u4e3aM } // \u4e1a\u52a1\u94fe\u53c2\u8003conf/330597659476689954.node6/system.conf system { chain_network_id = \"credence-net\" #\u7ec4\u7f51id\uff0c\u7ec4\u7f51id\u7684\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26 basic_chain_id = \"identity-net\" #\u8d26\u6237\u3001\u8bc1\u4e66\u4ea4\u7531identity-net\u7ba1\u7406 } storage { db_type = \"LevelDB\" #\u652f\u6301\u6570\u636e\u5e93\u7684\u7c7b\u578b\uff1aLevelDB\u3001RocksDB db_path = \"./repchaindata/data/leveldbdata\" db_name = \"215159697776981712.node1\" db_cache_size=48 #\u6570\u636e\u5e93\u8bfb\u5199\u7f13\u5b58\uff0c\u5355\u4f4d\u4e3aM block_file_type = \"localFileSystem\" block_file_path = \"./repchaindata/data/blockdata\" block_file_name = \"215159697776981712.node1\" file_max_length = 100 #\u5355\u4f4d\u4e3aM } \u672f\u8bed \u8d26\u6237 \u7528\u6237\u8981\u4f7f\u7528\u533a\u5757\u94fe\uff0c\u5fc5\u987b\u5148\u5728RepChain\u4e0a\u6ce8\u518c\u4e00\u4e2a\u8d26\u6237\u3002 \u8bc1\u4e66 \u88abRepChain\u7528\u4e8e\u9a8c\u8bc1\u7528\u6237\u63d0\u4ea4\u7684\u7b7e\u540d\u4ea4\u6613\u3002\u4e00\u4e2a\u8d26\u6237\u4e0b\u53ef\u4ee5\u6ce8\u518c\u591a\u4e2a\u6570\u5b57\u8bc1\u4e66\uff0c\u8d26\u6237\u4e0e\u8bc1\u4e66\u4e3a\u4e00\u5bf9\u591a\u7684\u5173\u7cfb \u64cd\u4f5c \u53ea\u8981\u662f\u6d89\u53ca\u5230\u7b7e\u540d\u4ea4\u6613\uff0c\u90fd\u5177\u4f53\u5230\u67d0\u4e00\u4e2a \u64cd\u4f5c \u4e0a\uff0c\u64cd\u4f5c\u5206 \u516c\u5f00\u4e0e\u975e\u516c\u5f00 \uff0c\u5982\u679c\u64cd\u4f5c\u88ab\u6ce8\u518c\u4e3a \u201d\u516c\u5f00\u201c\uff0c\u4e0d\u9700\u8981\u6388\u6743\u7ed9\u5176\u4ed6\u7528\u6237\uff0c\u5176\u4ed6\u7528\u6237\u4e5f\u53ef\u4ee5\u8c03\u7528 \uff0c\u5982\u679c\u88ab\u6ce8\u518c\u4e3a\u201d\u975e\u516c\u5f00\u201c\uff0c\u5219\u5176\u4ed6\u7528\u6237\u9700\u8981\u5f97\u5230\u6388\u6743\u624d\u80fd\u8c03\u7528\u3002\u4e00\u4e2a\u8d26\u6237\u4e0b\uff0c\u53ef\u4ee5\u6ce8\u518c\u591a\u4e2a\u64cd\u4f5c\uff0c\u8d26\u6237\u4e0e\u64cd\u4f5c\u4e3a\u4e00\u5bf9\u591a\u7684\u5173\u7cfb \u6ce8\uff1a\u7ed3\u5408\u4ea4\u6613\u7684\u4e09\u79cd\u7c7b\u578b\uff08\u90e8\u7f72\u5408\u7ea6\u3001\u4fee\u6539\u5408\u7ea6\u72b6\u6001\u548c\u8c03\u7528\u5408\u7ea6\uff09\u6765\u7406\u89e3 \u6388\u6743 \u5c06\u7528\u6237 \u81ea\u6709\u7684\u64cd\u4f5c \u6216 \u522b\u4eba\u6388\u6743\u7ed9\u81ea\u5df1\u4e14\u53ef\u4ee5\u518d\u6b21\u8ba9\u6e21 \u7684\u64cd\u4f5c\uff0c\u6388\u6743\u7ed9\u522b\u4eba\u3002\u4e00\u4e2a\u8d26\u6237\u4e0b\u53ef\u4ee5\u6709\u591a\u4e2a\u88ab\u6388\u6743\u7684\u64cd\u4f5c\uff0c\u8d26\u6237\u4e0e\u88ab\u6388\u6743\u7684\u64cd\u4f5c\u4e3a\u4e00\u5bf9\u591a\u7684\u5173\u7cfb \u8d26\u6237\u6743\u9650\u7ba1\u7406 RepChain-v2.0.0\u901a\u8fc7 \u6743\u9650\u7ba1\u7406\u5408\u7ea6 \uff08\u9ed8\u8ba4\u5185\u7f6e\u7684\u7cfb\u7edf\u5408\u7ea6\uff0c\u5408\u7ea6\u540d\uff1a RdidOperateAuthorizeTPL \uff0c\u7248\u672c\u53f7\uff1a 1 \uff09\u6765\u7ba1\u7406\u7528\u6237\u8eab\u4efd\uff08\u8d26\u6237\u3001\u6743\u9650\u7b49\uff09\uff0c\u76ee\u524d\u5408\u7ea6\u91cc\u5b9a\u4e49\u7684\u6240\u6709\u65b9\u6cd5\u5982\u4e0b\u8868\u6240\u793a\uff1a \u662f\u5426\u516c\u5f00\uff1a\"\u5426\"\u8868\u793a\u7528\u6237\u8c03\u7528\u8be5\u65b9\u6cd5\u9700\u8981\u88ab\u6388\u6743\uff0c\"\u662f\"\u8868\u793a\u7528\u6237\u8c03\u7528\u8be5\u65b9\u6cd5\u65e0\u9700\u88ab\u6388\u6743 \u5408\u7ea6\u65b9\u6cd5\u540d \u7528\u9014\u63cf\u8ff0 \u662f\u5426\u516c\u5f00 \u65b9\u6cd5\u5f62\u53c2 signUpSigner \u6ce8\u518c\u8d26\u6237 \u5426 rep.proto.rc2.Signer updateSigner \u66f4\u65b0\u8d26\u6237 \u5426 rep.proto.rc2.Signer updateSignerStatus \u4fee\u6539\u8d26\u6237\u72b6\u6001\uff0c\u7981\u7528/\u542f\u7528 \u5426 SignerStatus(creditCode: String, state: Boolean) signUpCertificate \u6ce8\u518c\u666e\u901a\u8bc1\u4e66 \u662f rep.proto.rc2.Certificate updateCertificateStatus \u4fee\u6539\u666e\u901a\u8bc1\u4e66\u72b6\u6001 \u662f CertStatus(creditCode: String, certName: String, state: Boolean) signUpAllTypeCertificate \u6ce8\u518c\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66 \u5426 rep.proto.rc2.Certificate updateAllTypeCertificateStatus \u4fee\u6539\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66\u72b6\u6001 \u5426 CertStatus(creditCode: String, certName: String, state: Boolean) signUpOperate \u4e3a\u7528\u6237\u81ea\u5df1\u6ce8\u518c\u64cd\u4f5c \u662f rep.proto.rc2.Operate updateOperateStatus \u4fee\u6539\u64cd\u4f5c\u72b6\u6001\uff0c\u7981\u7528/\u542f\u7528 \u662f OperateStatus(opId: String, state: Boolean) grantOperate \u6388\u6743\uff08\u8ba9\u6e21\u6743\u9650\uff09\u7ed9\u5176\u4ed6\u7528\u6237 \u662f List[AuthorizeString]] updateGrantOperateStatus \u66f4\u65b0\u6388\u6743\u72b6\u6001\uff0c\u7981\u7528/\u542f\u7528 \u662f AuthorizeStatus(authId: String, state: Boolean) bindCertToAuthorize \u5c06\u6743\u9650\u7ed1\u5b9a\u5230\u7528\u6237\u5177\u4f53\u7684\u67d0\u4e2a\u8bc1\u4e66 \u662f rep.proto.rc2.BindCertToAuthorize \u4e0a\u9762\u5217\u4e3e\u7684\u6240\u6709\u65b9\u6cd5\uff08\u64cd\u4f5c\uff09\u90fd\u5df2\u7ecf\u5728\u901a\u8fc7\u521b\u4e16\u5757\u6ce8\u518c\u5230\u4e86super_admin\uff08 \"identity-net:951002007l78123233\" \uff09\u7684\u8d26\u6237\u4e0b super_admin\u53ef\u4ee5\u5c06\u975e\u516c\u5f00\u7684\u65b9\u6cd5\u6388\u6743\u7ed9\u5176\u4ed6\u6ce8\u518c\u7528\u6237\uff08\u6388\u6743\u65f6\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u5141\u8bb8/\u7981\u6b62\u8be5\u7528\u6237\u518d\u6b21\u8ba9\u6e21\u7ed9\u5176\u4ed6\u7528\u6237\uff09 \u90e8\u5206\u5f62\u53c2\u7ed3\u6784\u4f53\u5728RepChain\u9879\u76ee\u7684 src/main/protobuf/rc2.proto \u91cc\u5b9a\u4e49 \u8d26\u6237 \u8d26\u6237\u4f5c\u4e3a\u7528\u6237\u5728\u94fe\u4e0a\u7684\u8eab\u4efd\u6743\u9650\u7684\u8f7d\u4f53\uff0c\u4e3b\u8981\u7ec4\u6210\u90e8\u5206\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u8d26\u6237ID\u662f\u552f\u4e00\u6807\u8bc6\uff0c\u4e00\u4e2a\u8d26\u6237\u4e0b\u53ef\u5305\u542b\u591a\u4e2a\u8bc1\u4e66\u3001\u591a\u4e2a\u64cd\u4f5c\u3001\u591a\u4e2a\u88ab\u6388\u6743\u7684\u64cd\u4f5c\u3002 \u6ce8\u518c\u8d26\u6237 \u5408\u7ea6\u65b9\u6cd5\uff1a signUpSigner \uff0c\u975e\u516c\u5f00\uff0c\u9700\u8981\u6388\u6743\uff0c\u56e0\u6b64\u53ea\u8981\u6709\u8c03\u7528 \"signUpSigner\" \u65b9\u6cd5\u7684\u6743\u9650\u5373\u53ef\u4e3a\u65b0\u7528\u6237\u6ce8\u518c\u8d26\u6237 \u8d26\u6237ID\u547d\u540d\u89c4\u8303 NetWorkID:UUID \uff0c\u5982\uff1a \"identity-net:121000005l35120456\" \u6ce8\u518c\u6d41\u7a0b \u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\u3001B\uff0c\u7528\u6237A\u60f3\u4e3a\u7528\u6237B\u6ce8\u518c\u8d26\u6237 \u5206\u6790\uff1a\u9996\u5148\u7528\u6237A\u8981\u53d6\u5f97\u53ef\u4ee5\u8c03\u7528 signUpSigner \u7684\u6743\u9650 \u65b9\u6848\u4e4b\u4e00\uff1astep1\uff1asuperAdmin\uff08\u6216\u5177\u6709\u4e14\u53ef\u7ee7\u7eed\u8ba9\u6e21\u8be5\u6743\u9650\u7684\u5176\u4ed6\u7528\u6237\uff09\u8981\u5148\u6388\u6743\u7528\u6237A\u8c03\u7528 signUpSigner \u7684\u6743\u9650\uff1bstep2\uff1a\u7528\u6237A\u8c03\u7528 signUpSigner \u4e3a\u7528\u6237B\u6ce8\u518c\u8d26\u6237 \u4e0b\u9762\u4ee5\u4f7f\u7528 identity-net:951002007l78123233 \uff08superAdmin\uff09\u76f4\u63a5\u6784\u9020\u7b7e\u540d\u4ea4\u6613\u6765\u8c03\u7528\u6743\u9650\u7ba1\u7406\u5408\u7ea6\u4e3a\u65b0\u7528\u6237\u6ce8\u518c\u8d26\u6237\uff08 \"identity-net:usr-0\" \uff09\u4e3a\u4f8b\uff08\u57fa\u4e8eRCJava-core\uff09 step1\uff1a\u7528\u6237usr-0\u81ea\u5df1\u751f\u6210\u5bc6\u94a5\u5bf9\u4ee5\u53ca\u8bc1\u4e66 usr-0_0.cer \uff08\u81ea\u7b7e\u540d\u6216CA\u7b7e\u53d1\uff09 step2\uff1a\u7528\u6237usr-0\u5c06step1\u751f\u6210\u7684\u8bc1\u4e66 usr-0_0.cer \u4ea4\u7ed9\u5177\u6709\u6ce8\u518c\u8d26\u6237\u6743\u9650\u7684\u7528\u6237\uff08\u5982super_admin\uff09 step3\uff1asuper_admin\u8c03\u7528\u6743\u9650\u7ba1\u7406\u5408\u7ea6\u4e3a\u7528\u6237usr-0\u6ce8\u518c\u8d26\u6237 identity-net:usr-0 TranPostClient postClient = new TranPostClient ( \"localhost:9081\" ); ChainInfoClient infoClient = new ChainInfoClient ( \"localhost:9081\" ); // \u8d26\u6237\u6743\u9650\u7ba1\u7406\u5408\u7ea6 ChaincodeId didChaincodeId = ChaincodeId . newBuilder (). setChaincodeName ( \"RdidOperateAuthorizeTPL\" ). setVersion ( 1 ). build (); // \u6784\u9020\u7ba1\u7406\u5458\u7684\u79c1\u94a5 PrivateKey super_pri = CertUtil . genX509CertPrivateKey ( new File ( \"jks/identity-net/951002007l78123233.super_admin.jks\" ), \"super_admin\" , \"951002007l78123233.super_admin\" ). getPrivateKey (); TranCreator superCreator = TranCreator . newBuilder (). setPrivateKey ( super_pri ). setSignAlgorithm ( \"SHA256withECDSA\" ). build (); CertId superCertId = CertId . newBuilder (). setCreditCode ( \"identity-net:951002007l78123233\" ). setCertName ( \"super_admin\" ). build (); // \u8bc1\u4e66pem\u5b57\u7b26\u4e32 String certPem = new String ( Files . readAllBytes ( new File ( \"jks/test/did/usr-0_0.cer\" ). toPath ())); Peer . Certificate cert_proto = Peer . Certificate . newBuilder () // \u65b0\u7528\u6237usr-0\u7684\u8bc1\u4e66<Pem\u5b57\u7b26\u4e32> . setCertificate ( certPem ) . setAlgType ( \"sha256withecdsa\" ) . setCertValid ( true ) . setCertType ( Peer . Certificate . CertType . CERT_AUTHENTICATION ) // \u8bbe\u7f6eCertId\uff0c<\u8d26\u6237ID>\u548c<\u8bc1\u4e66\u522b\u540d> . setId ( Peer . CertId . newBuilder (). setCreditCode ( \"identity-net:usr-0\" ). setCertName ( \"0\" ). build ()) . setCertHash ( DigestUtils . sha256Hex ( certPem . replaceAll ( \"\\r\\n|\\r|\\n|\\\\s\" , \"\" ))) . build (); Peer . Signer usr0_signer = Peer . Signer . newBuilder () . setName ( \"usr-0\" ) // \u7528\u6237usr-0\u7684\u8d26\u6237ID . setCreditCode ( \"identity-net:usr-0\" ) . setMobile ( \"18888888888\" ) // \u6ce8\u518c\u8d26\u6237\u65f6\uff0c\u8981\u9644\u5e26\u4e00\u4e2a\u6570\u5b57\u8bc1\u4e66\uff08\u8eab\u4efd\u8bc1\u4e66\uff09 . addAllAuthenticationCerts ( Collections . singletonList ( cert_proto )) . setSignerValid ( true ) . build (); // super_admin\u5411\u8eab\u4efd\u94fe\u63d0\u4ea4\u4ea4\u6613\uff0c\u6ce8\u518c\u7528\u6237\uff0c\u4ee5\u4fbf\u5728\u4e1a\u52a1\u94fe\u4f7f\u7528 String tranId = UUID . randomUUID (). toString (); // \u6784\u9020\u7b7e\u540d\u4ea4\u6613 Peer . Transaction tran = superCreator . createInvokeTran ( tranId , superCertId , didChaincodeId , signUpSigner , JsonFormat . printer (). print ( usr0_signer ), 0 , \"\" ); // \u63d0\u4ea4\u4ea4\u6613 postClient . postSignedTran ( tran ); TimeUnit . SECONDS . sleep ( 5 ); // \u67e5\u8be2\u4ea4\u6613\u4e0a\u94fe\u6267\u884c\u7ed3\u679c Peer . TransactionResult tranResult = infoClient . getTranResultByTranId ( tranId ); Assertions . assertEquals ( 0 , tranResult . getErr (). getCode (), \"\u6ca1\u6709\u9519\u8bef\uff0c\u6ce8\u518c\u6210\u529f\" ); \u7981\u7528/\u542f\u7528\u8d26\u6237 \u5982\u679c\u7528\u6237\u4e0d\u518d\u4f7f\u7528RepChain\uff0c\u6216\u8005\u7531\u4e8e\u67d0\u4e9b\u539f\u56e0\u9700\u8981\u7981\u7528\u8d26\u6237\uff0c\u53ef\u4fee\u6539\u7528\u6237\u7684\u8d26\u6237\u72b6\u6001\uff0c\u53ea\u8981\u6709\u8c03\u7528 \"updateSignerStatus\" \u7684\u6743\u9650\u5373\u53ef\u4fee\u6539\u7528\u6237\u7684\u8d26\u6237\u72b6\u6001\uff0c\u53ef\u6267\u884c\u7981\u7528\u6216\u542f\u7528 \u5408\u7ea6\u65b9\u6cd5\uff1a updateSignerStatus \uff0c\u975e\u516c\u5f00\uff0c\u9700\u8981\u6388\u6743\uff0c\u88ab\u6388\u6743\u7684\u7528\u6237\u624d\u53ef\u8c03\u7528 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\u3001B\uff0c\u7528\u6237A\u60f3\u7981\u7528\u7528\u6237B\u7684\u8d26\u6237 \u5206\u6790\uff1a\u9996\u5148\u7528\u6237A\u8981\u53d6\u5f97\u53ef\u4ee5\u8c03\u7528 updateSignerStatus \u7684\u6743\u9650 \u65b9\u6848\u4e4b\u4e00\uff1astep1\uff1asuperAmdin\uff08\u6216\u5177\u6709\u4e14\u53ef\u7ee7\u7eed\u8ba9\u6e21\u8be5\u6743\u9650\u7684\u5176\u4ed6\u7528\u6237\uff09\u8981\u5148\u6388\u6743\u7528\u6237A\u8c03\u7528 updateSignerStatus \u7684\u6743\u9650\uff1bstep2\uff1a\u7528\u6237A\u8c03\u7528 updateSignerStatus \u4e3a\u7981\u7528/\u542f\u7528\u7528\u6237B\u7684\u8d26\u6237 \u4ee3\u7801\u793a\u4f8b \u6d4b\u8bd5\u7528\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/did/SignerOperationTest.java \u8bc1\u4e66 \u8bc1\u4e66\u5206\u4e3a\u8eab\u4efd\u8bc1\u4e66\u548c\u666e\u901a\u8bc1\u4e66\uff0c\u8eab\u4efd\u8bc1\u4e66\u76f8\u5bf9\u666e\u901a\u8bc1\u4e66\u6bd4\u8f83\u91cd\u8981\uff0c\u56e0\u4e3a\u8eab\u4efd\u8bc1\u4e66\u5bf9\u5e94\u7684\u5bc6\u94a5\u5bf9\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613\uff0c\u53ef\u4ee5\u4e3a\u672c\u8d26\u6237\u6ce8\u518c\u666e\u901a\u8bc1\u4e66\u6216\u4fee\u6539\u666e\u901a\u8bc1\u4e66\u7684\u72b6\u6001\uff08\u6709\u6548\u6027\uff09 \u6ce8\u518c\u8bc1\u4e66 \u6ce8\u518c\u666e\u901a\u8bc1\u4e66 \u7528\u6237\u8d26\u6237\u6ce8\u518c\u6210\u529f\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8eab\u4efd\u8bc1\u4e66\u5bf9\u5e94\u7684\u5bc6\u94a5\u5bf9\u6784\u9020\u7b7e\u540d\u4ea4\u6613\uff0c\u81ea\u884c\u8c03\u7528\u7cfb\u7edf\u5408\u7ea6 RdidOperateAuthorizeTPL \u4e2d\u7684 signUpCertificate \u65b9\u6cd5\u6765\u4e3a \u81ea\u5df1 \u6ce8\u518c\u666e\u901a\u8bc1\u4e66 \u5408\u7ea6\u65b9\u6cd5\uff1a signUpCertificate \uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u6ce8\u518c\u7528\u6237\u5747\u53ef\u8c03\u7528 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\uff0c\u7528\u6237A\u60f3\u4e3a\u7528\u6237A\u81ea\u5df1\u6ce8\u518c\u666e\u901a\u8bc1\u4e66 \u7528\u6237A\u8c03\u7528 signUpCertificate \u5373\u53ef\u4e3a\u81ea\u5df1\u6ce8\u518c\u8bc1\u4e66 \u6ce8\u518c\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66 \u6ce8\u518c\u8d26\u6237\u65f6\uff0c\u4f1a\u9644\u5e26\u6ce8\u518c\u4e00\u4e2a\u8eab\u4efd\u8bc1\u4e66 \u9664 1 \u4e4b\u5916\uff0c\u53ef\u5728\u5176\u4ed6\u6709\u9700\u8981\u7684\u65f6\u5019\uff0c\u901a\u8fc7\u8c03\u7528\u7cfb\u7edf\u5408\u7ea6 RdidOperateAuthorizeTPL \u4e2d\u7684 signUpAllTypeCertificate \u65b9\u6cd5\u4e3a\u4e00\u4e2a\u6709\u6548\u8d26\u6237\uff08 \u81ea\u5df1\u6216\u5176\u4ed6 \uff09\u6ce8\u518c\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66 \u5408\u7ea6\u65b9\u6cd5\uff1a signUpAllTypeCertificate \uff0c\u975e\u516c\u5f00\uff0c\u9700\u8981\u6388\u6743\uff0c\u88ab\u6388\u6743\u7684\u7528\u6237\u624d\u53ef\u8c03\u7528 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\u3001B\uff0c\u7528\u6237A\u60f3\u4e3a\u7528\u6237A\u6216B\u6ce8\u518c\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66 \u5206\u6790\uff1a\u9996\u5148\u7528\u6237A\u8981\u53d6\u5f97\u53ef\u4ee5\u8c03\u7528 signUpAllTypeCertificate \u7684\u6743\u9650 \u65b9\u6848\u4e4b\u4e00\uff1astep1\uff1asuperAdmin\uff08\u6216\u5177\u6709\u4e14\u53ef\u7ee7\u7eed\u8ba9\u6e21\u8be5\u6743\u9650\u7684\u5176\u4ed6\u7528\u6237\uff09\u8981\u5148\u6388\u6743\u7528\u6237A\u8c03\u7528 signUpAllTypeCertificate \u7684\u6743\u9650\uff1bstep2\uff1a\u7528\u6237A\u8c03\u7528 signUpAllTypeCertificate \u4e3a\u7528\u6237A/B\u6ce8\u518c\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66 // \u6388\u6743\uff0csuper\u6388\u6743\u7ed9usr0, \u6ce8\u518c\u4efb\u610f\u8bc1\u4e66\u7684\u65b9\u6cd5 long millis = System . currentTimeMillis (); Peer . Authorize authorize = Peer . Authorize . newBuilder () . setId ( \"identity-net:\" + UUID . randomUUID ()) . setGrant ( \"identity-net:951002007l78123233\" ) . addGranted ( \"identity-net:usr-0\" ) . addOpId ( DigestUtils . sha256Hex ( \"identity-net:RdidOperateAuthorizeTPL.signUpAllTypeCertificate\" )) // \u8bbe\u7f6e\u662f\u5426\u53ef\u7ee7\u7eed\u8ba9\u6e21 . setIsTransfer ( Peer . Authorize . TransferType . TRANSFER_REPEATEDLY ) . setCreateTime ( Timestamp . newBuilder (). setSeconds ( millis / 1000 ). setNanos (( int ) (( millis % 1000 ) * 1000000 )). build ()) . setAuthorizeValid ( true ) . setVersion ( \"1.0\" ) . build (); String tranId = UUID . randomUUID (). toString (); // \u6388\u6743\u7ed9usr-0 Peer . Transaction tran = node1Creator . createInvokeTran ( tranId , superCertId , didChaincodeId , grantOperate , JSONObject . toJSONString ( Collections . singletonList ( JsonFormat . printer (). print ( authorize ))), 0 , \"\" ); postClient . postSignedTran ( tran ); TimeUnit . SECONDS . sleep ( 2 ); Peer . TransactionResult tranResult = getTransactionResult ( tranId ); Peer . ActionResult actionResult = tranResult . getErr (); Assertions . assertEquals ( 0 , actionResult . getCode (), \"\u6ca1\u6709\u9519\u8bef\uff0c\u6388\u6743\u6210\u529f\" ); // step2: usr0\u4e3ausr1 \u6ce8\u518c\u8eab\u4efd\u8bc1\u4e66 Peer . Certificate usr1_cert_1 = Peer . Certificate . newBuilder () . setCertificate ( certPem ) . setAlgType ( \"sha256withecdsa\" ) . setCertValid ( true ) // \u8bbe\u7f6e\u8bc1\u4e66\u7c7b\u578b\uff0c\u8bc1\u4e66\u7c7b\u578b\u4e3a\u8eab\u4efd\u8bc1\u4e66 . setCertType ( Peer . Certificate . CertType . CERT_AUTHENTICATION ) // \u8bc1\u4e66\u540d\u6839\u636e\u81ea\u5df1\u9700\u8981\u8bbe\u7f6e . setId ( Peer . CertId . newBuilder (). setCreditCode ( \"identity-net:usr-1\" ). setCertName ( \"0\" ). build ()) . setCertHash ( DigestUtils . sha256Hex ( certPem . replaceAll ( \"\\r\\n|\\r|\\n|\\\\s\" , \"\" ))) . build ();; String tranId_1 = UUID . randomUUID (). toString (); // \u6784\u9020\u4ea4\u6613 Peer . Transaction tran_1 = usr0_tranCreator_0 . createInvokeTran ( tranId_1 , usr0_certId_0 , didChaincodeId , signUpAllTypeCertificate , JsonFormat . printer (). print ( usr1_cert_1 ), 0 , \"\" ); postClient . postSignedTran ( tran_1 ); TimeUnit . SECONDS . sleep ( 2 ); Peer . TransactionResult tranResult_1 = getTransactionResult ( tranId_1 ); Peer . ActionResult actionResult_1 = tranResult_1 . getErr (); Assertions . assertEquals ( 0 , tranResult_1 . getErr (). getCode (), \"\u6ca1\u6709\u9519\u8bef\uff0c\u6ce8\u518c\u6210\u529f\" ); \u7981\u7528/\u542f\u7528\u8bc1\u4e66 \u5982\u679c\u7528\u6237\u79c1\u94a5\u4e22\u5931\uff0c\u6216\u8005\u4e0d\u60f3\u518d\u4f7f\u7528\u67d0\u4e2a\u79c1\u94a5\uff0c\u53ef\u4ee5\u5c06\u5728\u94fe\u4e0a\u7684\u3001\u4e0e\u79c1\u94a5\u5bf9\u5e94\u7684\u8bc1\u4e66\u7981\u7528\u6389\uff1b\u540e\u7eed\u627e\u56de\u6216\u8005\u60f3\u542f\u7528\u79c1\u94a5\u65f6\uff0c\u53ef\u4ee5\u6062\u590d\u8bc1\u4e66\u72b6\u6001 \u7981\u7528/\u542f\u7528\u666e\u901a\u8bc1\u4e66 \u7528\u6237\u4f7f\u7528\u81ea\u5df1 \u8eab\u4efd\u8bc1\u4e66 \u5bf9\u5e94\u7684\u5bc6\u94a5\u6784\u5efa\u7684\u7b7e\u540d\u4ea4\u6613\uff0c\u53ef\u4ee5\u8c03\u7528 updateCertificateStatus \u65b9\u6cd5\u6765\u4fee\u6539 \u81ea\u5df1 \u8d26\u6237\u4e0b\u7684\u666e\u901a\u8bc1\u4e66\u7684\u72b6\u6001 \u5408\u7ea6\u65b9\u6cd5\uff1a updateCertificateStatus \uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u6ce8\u518c\u7528\u6237\u5747\u53ef\u8c03\u7528\uff0c\u4f46\u662f\u8981\u6ce8\u610f\uff0c\u9700\u4f7f\u7528\u81ea\u5df1 \u8eab\u4efd\u8bc1\u4e66\u5bf9\u5e94\u7684\u5bc6\u94a5 \u6765\u6784\u5efa\u7b7e\u540d\u4ea4\u6613\uff0c\u5e76\u4e14\u53ea\u80fd\u4fee\u6539 \u81ea\u5df1 \u8d26\u6237\u4e0b\u7684\u666e\u901a\u8bc1\u4e66\u72b6\u6001 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\uff0c\u7528\u6237A\u60f3\u7981\u7528\u7528\u6237A\u81ea\u5df1\u7684\u666e\u901a\u8bc1\u4e66 \u7528\u6237A\u8c03\u7528 updateCertificateStatus \u5373\u53ef\u7981\u7528\u81ea\u5df1\u7684\u666e\u901a\u8bc1\u4e66 \u7981\u7528/\u542f\u7528\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66 \u5408\u7ea6\u65b9\u6cd5\uff1a updateAllTypeCertificateStatus \uff0c\u975e\u516c\u5f00\uff0c\u9700\u8981\u6388\u6743\uff0c\u7528\u6237\u8c03\u7528\u8be5\u65b9\u6cd5\u53ef\u4fee\u6539 \u81ea\u5df1\u6216\u5176\u4ed6\u4eba \u8d26\u6237\u4e0b\u7684\u7684\u8eab\u4efd\u8bc1\u4e66\u6216\u666e\u901a\u8bc1\u4e66\u7684\u72b6\u6001 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\u3001B\uff0c\u7528\u6237A\u60f3\u7981\u7528\u7528\u6237A\u7684\u666e\u901a\u8bc1\u4e66\uff0c\u4ee5\u53ca\u7981\u7528\u7528\u6237B\u7684\u8eab\u4efd\u8bc1\u4e66 \u5206\u6790\uff1a\u9996\u5148\u7528\u6237A\u8981\u53d6\u5f97\u53ef\u4ee5\u8c03\u7528 updateAllTypeCertificateStatus \u7684\u6743\u9650 \u53ef\u9009\u65b9\u6848\u4e4b\u4e00\uff1astep1\uff1asuperAmdin\uff08\u6216\u5177\u6709\u4e14\u53ef\u7ee7\u7eed\u8ba9\u6e21\u8be5\u6743\u9650\u7684\u5176\u4ed6\u7528\u6237\uff09\u8981\u5148\u6388\u6743\u7528\u6237A\u8c03\u7528 updateAllTypeCertificateStatus \u7684\u6743\u9650\uff1bstep2\uff1a\u7528\u6237A\u8c03\u7528 updateAllTypeCertificateStatus \u7981\u7528\u7528\u6237B\u7684\u8eab\u4efd\u8bc1\u4e66\u4ee5\u53caA\u7684\u666e\u901a\u8bc1\u4e66 \u4ee3\u7801\u793a\u4f8b \u6d4b\u8bd5\u7528\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/did/CertOpeartionTest.java \u64cd\u4f5c \u6bcf\u4e2a\u8d26\u6237\u4e0b\u53ef\u4ee5\u6709\u5982\u4e0b\u4e09\u7c7b\u64cd\u4f5c\uff0c\u4e14\u6bcf\u4e2a\u7c7b\u578b\u53ef\u4ee5\u6709\u591a\u4e2a\u64cd\u4f5c \u90e8\u7f72\u5408\u7ea6\u3001\u4fee\u6539\u5408\u7ea6\u72b6\u6001 \u5408\u7ea6\u4e2d\u5177\u4f53\u7684\u67d0\u4e2a\u65b9\u6cd5 RepChain API\u4e2d\u5177\u4f53\u7684\u67d0\u4e2a\u63a5\u53e3 \u6ce8\u518c\u64cd\u4f5c \u6ce8\u518c\u5408\u7ea6\u4e2d\u5177\u4f53\u7684\u67d0\u4e2a\u65b9\u6cd5\uff0c\u53ea\u6709\u6ce8\u518c\u4e4b\u540e\uff0c\u7528\u6237\u624d\u53ef\u4ee5\u901a\u8fc7\u7b7e\u540d\u4ea4\u6613\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5e76\u4e14\u5c06\u8be5\u64cd\u4f5c\u6388\u6743\u7ed9\u5176\u4ed6\u7528\u6237\u540e\uff0c\u5176\u4ed6\u7528\u6237\u4e5f\u5f97\u5230\u4e86\u8c03\u7528\u8be5\u65b9\u6cd5\u7684\u6743\u9650 \u64cd\u4f5cID\u547d\u540d\u89c4\u8303 sha256(\u64cd\u4f5c\u540d)\uff0c\u64cd\u4f5c\u540d\u7684\u89c4\u8303\u8bf7\u53c2\u89c1\u4e0b\u6587 \u64cd\u4f5c\u547d\u540d\u89c4\u8303 API\uff0c\u53ea\u80fd\u7531superAdmin\u6765\u6ce8\u518c NetWorkID:transaction.postTranByString \uff0c\u5982\uff1a \"identity-net:transaction.postTranByString\" \u90e8\u7f72\u5408\u7ea6\uff0c\u53ea\u80fd\u7531superAdmin\u6765\u6ce8\u518c\uff0c\u4e4b\u540e\u518d\u6388\u6743\u7ed9\u522b\u7684\u7528\u6237 NetWorkID:ContractName.deploy \uff0c\u5982\uff1a \"identity-net:CredenceTPL.deploly\" \uff0c\u53ea\u80fd\u90e8\u7f72\u540d\u4e3a CredenceTPL \u7684\u5408\u7ea6 NetWorkID:*.deploy \uff0c\u5982\uff1a \"identity-net:*.deploly\" \uff0c\u90e8\u7f72\u4efb\u4f55\u5408\u7ea6\uff0c\u5728\u521b\u4e16\u5757\u4e2d\u5df2\u6ce8\u518c\u5230super_admin\u8d26\u6237\u4e0b \u4fee\u6539\u5408\u7ea6\u72b6\u6001\uff0c\u53ea\u80fd\u7531superAdmin\u6765\u6ce8\u518c\uff0c\u4e4b\u540e\u518d\u6388\u6743\u7ed9\u522b\u7684\u7528\u6237 NetWorkID:ContractName.setState \uff0c\u5982\uff1a \"identity-net:CredenceTPL.setState\" \uff0c\u53ea\u80fd\u4fee\u6539\u540d\u4e3a CredenceTPL \u7684\u5408\u7ea6\u72b6\u6001 NetWorkID:*.setState \uff0c\u5982\uff1a \"identity-net:*.setState\" \uff0c\u4fee\u6539\u4efb\u4f55\u5408\u7ea6\u72b6\u6001\uff0c\u5728\u521b\u4e16\u5757\u4e2d\u6ce8\u518c\u5230super_admin\u8d26\u6237\u4e0b \u5408\u7ea6\u64cd\u4f5c\uff0c \u5177\u6709\u5408\u7ea6\u90e8\u7f72\u6743\u9650 \u7684\u7528\u6237\uff0c\u5c31\u53ef\u4ee5\u6ce8\u518c NetWorkID:ContractName.MethodName \uff0c\u5982\uff1a \"identity-net:CredenceTPL.proof\" \uff0c\u540d\u4e3a CredenceTPL \u7684\u5408\u7ea6\u4e2d\u7684\u540d\u4e3a proof \u7684\u65b9\u6cd5 \u65b9\u6cd5\uff1a signUpOperate \uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u6ce8\u518c\u7528\u6237\u5747\u53ef\u8c03\u7528\uff0c\u4f46\u662f\u8981\u6ce8\u610f\uff0c\u7528\u6237\u60f3\u8981\u6ce8\u518c\u67d0\u5408\u7ea6\u91cc\u7684\u65b9\u6cd5\uff0c\u6709\u4e00\u4e2a\u524d\u63d0\u6761\u4ef6\uff0c\u5373\u7528\u6237\u62e5\u6709\u8be5\u5408\u7ea6\u7684\u90e8\u7f72\u6743\u9650\u3002 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\u3001B\uff0c\u7528\u6237A\u60f3\u90e8\u7f72\u5408\u7ea6TestProofTPL.scala\uff0c\u8fdb\u800c\u6ce8\u518c\u5408\u7ea6\u4e2d\u7684\u65b9\u6cd5method_1\uff0c\u7528\u6237B\u60f3\u6ce8\u518c\u5408\u7ea6\u4e2d\u7684\u65b9\u6cd5method_2 \u5206\u6790\uff1a\u53ea\u8981\u7528\u6237A\u548c\u7528\u6237B\u83b7\u5f97\u53ef\u4ee5\u90e8\u7f72\u5408\u7ea6TestProofTPL.scala\u7684\u6743\u9650\u5373\u53ef \u53ef\u9009\u62e9\u65b9\u6848\u4e4b\u4e00\uff1astep1\uff1asuperAmdin\u6ce8\u518c \"identity-net:TestProofTPL.deploy\" \u64cd\u4f5c\u5230\u81ea\u5df1\u8d26\u6237\uff1bstep2\uff1a\u6388\u6743\u7528\u6237A \"identity-net:TestProofTPL.deploy\" \u7684\u6743\u9650\uff0c\u6388\u4e88\u7528\u6237B \"identity-net:*.deploy\" \u7684\u6743\u9650\uff1bstep3\uff1a\u7528\u6237A\u90e8\u7f72\u5408\u7ea6TestProofTPL.scala\uff1bstep4\uff1a\u7528\u6237A\u6ce8\u518c \"identity-net:TestProofTPL.method_1\" \uff0c\u7528\u6237B\u6ce8\u518c \"identity-net:TestProofTPL.method_2\" \u7981\u7528/\u542f\u7528\u64cd\u4f5c \u64cd\u4f5c\u72b6\u6001\u7684\u4fee\u6539\u5177\u6709\u5168\u5c40\u6027\u548c\u4f20\u9012\u6027\uff0c\u5373\u64cd\u4f5c\u7684\u6ce8\u518c\u8005\uff0c\u5c06\u64cd\u4f5c\u7981\u7528\u540e\uff0c\u6240\u6709\u88ab\u6388\u6743\u8be5\u64cd\u4f5c\u7684\u7528\u6237\uff0c\u540e\u7eed\u90fd\u5c06\u65e0\u6cd5\u4f7f\u7528\u8be5\u64cd\u4f5c \u65b9\u6cd5\uff1a updateOperateStatus \uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u7528\u6237\u5747\u53ef\u8c03\u7528\uff0c\u7528\u6237\u60f3\u8981\u7981\u7528\u5408\u7ea6\u91cc\u7684\u67d0\u4e2a\u65b9\u6cd5\uff0c\u6709\u4e00\u4e2a\u524d\u63d0\u6761\u4ef6\uff0c\u5373\u7528\u6237\u62e5\u6709\u8be5\u5408\u7ea6\u7684\u90e8\u7f72\u6743\u9650\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u8d26\u6237B\u5177\u6709 \"identity-net:*.deploly\" \uff0c\u8d26\u6237A\u5177\u6709 \"identity-net:cName.deploy\" \uff0c\u7981\u7528\u64cd\u4f5c\u540e\uff0c\u6240\u6709\u7528\u6237\u5747\u4e0d\u53ef\u518d\u8c03\u7528\u6267\u884ccName.method_1\u4e0ecName.method_2\u4e86 \u4ee3\u7801\u793a\u4f8b \u6d4b\u8bd5\u7528\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/did/OperOperationTest.java \u6388\u6743 \u7528\u6237\u53ef\u5c06\u81ea\u5df1\u8d26\u6237\u4e0b\u7684\u64cd\u4f5c\u6216\u522b\u4eba\u8ba9\u6e21\u7ed9\u81ea\u5df1\u7684\u6709\u6548\u7684\u4e14\u53ef\u4ee5\u518d\u6b21\u8ba9\u6e21\u7684\u64cd\u4f5c\u6388\u6743\u7ed9\u522b\u7684\u7528\u6237\uff0c\u5728RepChain\u7684\u6240\u6709\u8d26\u6237\u96c6\u5408\u91cc\uff0c\u5404\u4e2a\u8d26\u6237\u4e4b\u95f4\u53ef\u4ee5\u76f8\u4e92\u6388\u6743\uff0c\u6bcf\u4e2a\u6388\u6743\u90fd\u6709\u552f\u4e00ID \u6388\u6743ID\u547d\u540d\u89c4\u8303 NetWorkID:UUID \uff0c\u5982\uff1a \"identity-net:auth-usr-0-to-usr-1\" \u8ba9\u6e21\u64cd\u4f5c \u65b9\u6cd5\uff1a grantOperate \uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u7528\u6237\u5747\u53ef\u8c03\u7528 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u8d26\u6237B\u6709\u64cd\u4f5c \"identity-net:TestProofTPL.method_2\" \uff0c\u8d26\u6237A\u6709\u64cd\u4f5c \"identity-net:TestProofTPL.method_1\" \uff0c\u8d26\u6237B\u5728\u4e3a\u8d26\u6237D\u6388\u6743\u65f6\uff0c\u8bbe\u7f6e\u4e3a\u4e0d\u53ef\u7ee7\u7eed\u8ba9\u6e21\uff0c\u8d26\u6237A\u4e3a\u8d26\u6237C\u6388\u6743\u65f6\uff0c\u8bbe\u7f6e\u4e3a\u53ef\u7ee7\u7eed\u8ba9\u6e21\uff0c\u56e0\u6b64\u6700\u7ec8D\u4e0d\u53ef\u5c06 \"identity-net:TestProofTPL.method_2\" \u7ee7\u7eed\u8ba9\u6e21\u7ed9\u8d26\u6237E\uff0c\u800c\u8d26\u6237C\u53ef\u4ee5\u7ee7\u7eed\u5c06 \"identity-net:TestProofTPL.method_1\" \u8ba9\u6e21\u7ed9\u8d26\u6237E \u7981\u7528/\u542f\u7528\u6388\u6743 \u7981\u7528/\u542f\u7528\u6388\u6743\u4e0d\u5177\u6709\u5168\u5c40\u6027\u548c\u4f20\u9012\u6027\uff0c\u5047\u8bbeA\u6388\u6743\u7ed9B\u7528\u6237\u4e00\u4e2a\u53ef\u4ee5\u518d\u6b21\u8ba9\u6e21\u7684\u6743\u9650\uff0cB\u7ee7\u7eed\u6388\u6743\u7ed9C\uff0cA\u5c06\u7ed9B\u7684\u6388\u6743\u7981\u7528\uff0c\u4e0d\u5f71\u54cdC\u7684\u4f7f\u7528 \u65b9\u6cd5\uff1a updateGrantOperateStatus \uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u7528\u6237\u5747\u53ef\u8c03\u7528 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\uff0cC\uff0c\u7528\u6237A\u60f3\u7981\u7528\u7528\u6237A\u7ed9C\u7684\u67d0\u4e2a\u6388\u6743 \u7528\u6237A\u8c03\u7528 updateGrantOperateStatus \u53ef\u7981\u7528\u7ed9C\u7684\u6388\u6743 \"identity-net:cName.method_1\" \uff0c\u4e4b\u540eC\u4e0d\u53ef\u4ee5\u518d\u8c03\u7528\u8be5\u65b9\u6cd5 \u7ed1\u5b9a\u6388\u6743\u5230\u8bc1\u4e66 \u7528\u6237\u53ef\u5c06\u522b\u7684\u7528\u6237\u6388\u4e88\u7ed9\u81ea\u5df1\u7684\u6743\u9650\u7ed1\u5b9a\u5230\u8d26\u6237\u4e0b\u7684\u67d0\u4e2a\u5177\u4f53\u8bc1\u4e66\u4e0a\uff0c\u4e4b\u540e\uff0c\u7528\u6237\u4f7f\u7528\u8be5\u8bc1\u4e66\u5bf9\u5e94\u7684\u79c1\u94a5\u5bf9\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613\u53ef\u901a\u8fc7\u8be5\u6743\u9650\u9a8c\u8bc1\uff0c\u5176\u4ed6\u8bc1\u4e66\u5bf9\u5e94\u7684\u79c1\u94a5\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613\u4e0d\u53ef\u4ee5\u901a\u8fc7\u8be5\u6743\u9650\u9a8c\u8bc1 \u65b9\u6cd5\uff1a bindCertToAuthorize \uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u7528\u6237\u5747\u53ef\u8c03\u7528 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u57fa\u4e8e\u4e0a\u4e00\u5c0f\u8282\u7684\u6743\u9650\u8ba9\u6e21\u64cd\u4f5c\u4e4b\u540e\uff0c\u73b0\u6709\u7528\u6237C\uff0c\u7528\u6237C\u6709\u4e24\u4e2a\u8bc1\u4e66\"cert_0\"\u548c\"cert_1\"\uff0c\u4e24\u4e2a\u8bc1\u4e66\u5206\u522b\u5bf9\u5e94\u7684\u79c1\u94a5\"pri_1\"\u4e0e\"pri_2\"\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613\u90fd\u53ef\u4ee5\u8c03\u7528 \"cName.method_1\" \uff0c\u5f53C\u5c06A\u6388\u4e88\u7ed9\u4ed6\u7684\u6743\u9650\u7ed1\u5b9a\u5230\u8bc1\u4e66\"cert_0\"\u540e\uff0c\u5219\u53ea\u80fd\"pri_1\"\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613 \u53ef\u4ee5 \u8c03\u7528 \"cName.method_1\" \uff0c\"pri_2\"\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613 \u4e0d\u53ef\u4ee5 \u8c03\u7528 \"cName.method_1\" \u4ee3\u7801\u793a\u4f8b \u6d4b\u8bd5\u7528\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/did/AuthOperationTest.java SDK\u4f7f\u7528 RCJava-core \u65b0\u7528\u6237\u4ece\u6ce8\u518c\u4e0a\u94fe\u5230\u8c03\u7528\u5408\u7ea6\u65b9\u6cd5\u65f6\uff0c\u4f7f\u7528RCJava-core\u7684\u903b\u8f91\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u8be5\u903b\u8f91\u5177\u6709\u987a\u5e8f\u6027\uff0c\u540e\u7eed\u64cd\u4f5c\u9700\u8981\u5728\u524d\u7f6e\u64cd\u4f5c\u5df2\u5b8c\u6210\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u3002\u5728\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u4e1a\u52a1\u94fe\u53ea\u8d1f\u8d23\u4e1a\u52a1\u7684\u591a\u94fe\u6a21\u578b\u4e2d\uff0c\u4ee5 identity-net:951002007l78123233 \uff08super_admin\uff09\u76f4\u63a5\u6784\u9020\u7b7e\u540d\u4ea4\u6613\u6765\u8c03\u7528\u6743\u9650\u7ba1\u7406\u5408\u7ea6\u4e3a\u65b0\u7528\u6237usr-0\uff08 \"identity-net:usr-0\" \uff09\u6ce8\u518c\u5e76\u6388\u6743\u4e3a\u4f8b\uff0c\u64cd\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a step1\uff1a\u7528\u6237usr-0\u81ea\u5df1\u751f\u6210\u5bc6\u94a5\u5bf9\u4ee5\u53ca\u8bc1\u4e66 usr-0_0.cer \uff08\u81ea\u7b7e\u540d\u6216CA\u7b7e\u53d1\uff09 step2\uff1a\u7528\u6237usr-0\u5c06step1\u751f\u6210\u7684\u8bc1\u4e66 usr-0_0.cer \u4ea4\u7ed9\u5177\u6709\u6ce8\u518c\u8d26\u6237\u6743\u9650\u7684\u7528\u6237\uff08\u5982super_admin\uff09 step3\uff1asuper_admin\u8c03\u7528\u6743\u9650\u7ba1\u7406\u5408\u7ea6\u5411\u8eab\u4efd\u94fe\u53bb\u6ce8\u518c\u7528\u6237usr-0\uff0c\u6b64\u6b65\u9aa4\u4e2dusr-0\u7684\u8d26\u6237\u4ee5\u53ca\u8bc1\u4e66\u90fd\u88ab\u6ce8\u518c\u4e86 step4\uff1asuper_admin\u5411\u8eab\u4efd\u94fe\u53bb\u6ce8\u518c\u53ef\u4ee5\u90e8\u7f72\u5408\u7ea6credence-net:CredenceTPL.deploy\u7684\u64cd\u4f5c step5\uff1asuper_admin\u6388\u6743\u7ed9usr-0\u53ef\u90e8\u7f72\u5408\u7ea6credence-net:CredenceTPL.deploy\u7684\u6743\u9650 step6\uff1ausr-0\u5177\u6709\u4e86\u5411\u4e1a\u52a1\u94fe\u90e8\u7f72CredenceTPL\u7684\u6743\u9650\uff0c\u56e0\u6b64\u5411\u4e1a\u52a1\u94fe\u90e8\u7f72\u5408\u7ea6 step7\uff1ausr-0\u4f5c\u4e3a\u5408\u7ea6\u90e8\u7f72\u8005\uff0c\u6ce8\u518c\u5408\u7ea6\u7684\u67d0\u4e2a\u65b9\u6cd5 step8\uff1ausr-0\u8c03\u7528\u4e1a\u52a1\u94fe\u4e2d\u521a\u90e8\u7f72\u7684\u5408\u7ea6\uff0c\u5b58\u8bc1\u6570\u636e \u4e0a\u8ff0\u6d41\u7a0b\u7684\u4f7f\u7528\u793a\u4f8b\u5982\u4e0b\uff0c\u5b8c\u6574\u4ee3\u7801\u8bf7\u8bbf\u95ee RCJava-core \u9879\u76ee\u7684 src\\test\\java\\com\\rcjava\\did \u76ee\u5f55\uff1a //\u4ee5\u4e0b\u793a\u4f8b\u4e3a\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u4e1a\u52a1\u94fe\u53ea\u8d1f\u8d23\u4e1a\u52a1\u7684\u591a\u94fe\u6a21\u578b\uff0c\u82e5\u4e3a\u5355\u94fe\u6a21\u5f0f\uff1a //1.\u9700\u5c06\u4ee3\u7801\u4e2d\u7684\u4e1a\u52a1\u94fe\u524d\u7f00\u201ccredence-net\u201d\u6539\u4e3a\u8eab\u4efd\u94fe\u524d\u7f00\"identity-net\" //2.\u9700\u5c06\u63d0\u4ea4\u81f3<\u4e1a\u52a1\u94fe>\u201cpostCredenceClient\u201d\u7684\u4ea4\u6613\u6539\u4e3a\u201c\u63d0\u4ea4\u81f3<\u8eab\u4efd\u94fe>\u201cpostClient\u201d @TestMethodOrder ( MethodOrderer . OrderAnnotation . class ) @TestInstance ( TestInstance . Lifecycle . PER_CLASS ) public class Test { // \u8eab\u4efd\u94fe TranPostClient postClient = new TranPostClient ( \"localhost:9081\" ); ChainInfoClient infoClient = new ChainInfoClient ( \"localhost:9081\" ); // \u4e1a\u52a1\u94fe TranPostClient postCredenceClient = new TranPostClient ( \"localhost:9086\" ); ChainInfoClient infoCredenceClient = new ChainInfoClient ( \"localhost:9086\" ); // superAdmin TranCreator superCreator ; Peer . CertId superCertId ; // \u65b0\u7528\u6237usr0 TranCreator usr0_tranCreator_0 ; Peer . CertId usr0_certId_0 ; //\u8d26\u6237\u6743\u9650\u7ba1\u7406\u5408\u7ea6 Peer . ChaincodeId didChaincodeId = Peer . ChaincodeId . newBuilder (). setChaincodeName ( \"RdidOperateAuthorizeTPL\" ). setVersion ( 1 ). build (); Peer . ChaincodeId credenceTPLId = Peer . ChaincodeId . newBuilder (). setChaincodeName ( \"CredenceTPL\" ). setVersion ( 1 ). build (); @BeforeAll void init () { //\u6784\u9020\u7ba1\u7406\u5458\u7684\u79c1\u94a5 PrivateKey super_pri = CertUtil . genX509CertPrivateKey ( new File ( \"jks/test/multi_chain/identity.951002007l78123233.super_admin.jks\" ), \"super_admin\" , \"951002007l78123233.super_admin\" ). getPrivateKey (); superCreator = TranCreator . newBuilder (). setPrivateKey ( super_pri ). setSignAlgorithm ( \"SHA256withECDSA\" ). build (); superCertId = Peer . CertId . newBuilder (). setCreditCode ( \"identity-net:951002007l78123233\" ). setCertName ( \"super_admin\" ). build (); //\u6784\u9020usr0\u7684\u79c1\u94a5 //\u4f7f\u7528KeyStoreExplorer\u5de5\u5177\u6216\u8005\u4f7f\u7528\u4ee3\u7801\u5b9e\u4f8b(https://gitee.com/BTAJL/RCJava-core/blob/master/src/main/java/com/rcjava/util/CertUtil.java)\u5373\u53ef\u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u5bfc\u51fa\u8bc1\u4e66 PrivateKey usr0_pri = CertUtil . genX509CertPrivateKey ( new File ( \"jks/test/did/usr-0_0.jks\" ), \"123\" , \"usr_0_0\" ). getPrivateKey (); usr0_tranCreator_0 = TranCreator . newBuilder (). setPrivateKey ( usr0_pri ). setSignAlgorithm ( \"SHA256withECDSA\" ). build (); usr0_certId_0 = Peer . CertId . newBuilder (). setCreditCode ( \"credence-net:usr-0\" ). setCertName ( \"0\" ). build (); } @Test @DisplayName ( \"super_admin\u5411\u8eab\u4efd\u94fe\u53bb\u6ce8\u518c\u7528\u6237usr-0\uff0c\u8be5\u6b65\u9aa4\u6ce8\u518c\u4e86usr-0\u7684\u8d26\u6237\u4ee5\u53ca\u8bc1\u4e66\" ) @Order ( 1 ) void signUpSignerTest () throws InterruptedException , IOException { // \u8bc1\u4e66pem\u5b57\u7b26\u4e32 String certPem = new String ( Files . readAllBytes ( new File ( \"jks/test/did/usr-0_0.cer\" ). toPath ())); Peer . Certificate cert_proto = Peer . Certificate . newBuilder () // \u65b0\u7528\u6237usr-0\u7684\u8bc1\u4e66 . setCertificate ( certPem ) . setAlgType ( \"sha256withecdsa\" ) . setCertValid ( true ) . setCertType ( Peer . Certificate . CertType . CERT_AUTHENTICATION ) . setId ( Peer . CertId . newBuilder (). setCreditCode ( \"credence-net:usr-0\" ). setCertName ( \"0\" ). build ()) . setCertHash ( DigestUtils . sha256Hex ( certPem . replaceAll ( \"\\r\\n|\\r|\\n|\\\\s\" , \"\" ))) . build (); Peer . Signer usr0_signer = Peer . Signer . newBuilder () . setName ( \"usr-0\" ) // \u65b0\u7528\u6237usr-0\u7684\u8d26\u6237ID . setCreditCode ( \"credence-net:usr-0\" ) // \u65b0\u6ce8\u518c\u7528\u6237 \u4e1a\u52a1\u94fe\u524d\u7f00\uff0ccredence-net:*****.usr-11 . setMobile ( \"18888888888\" ) . addAllAuthenticationCerts ( Collections . singletonList ( cert_proto )) . setSignerValid ( true ) . build (); // super_admin\u5411\u8eab\u4efd\u94fe\u63d0\u4ea4\u4ea4\u6613\uff0c\u6ce8\u518c\u7528\u6237\uff0c\u4ee5\u4fbf\u5728\u4e1a\u52a1\u94fe\u4f7f\u7528 String tranId_1 = UUID . randomUUID (). toString (); Peer . Transaction tran_1 = superCreator . createInvokeTran ( tranId_1 , superCertId , didChaincodeId , signUpSigner , JsonFormat . printer (). print ( usr0_signer ), 0 , \"\" ); postClient . postSignedTran ( tran_1 ); TimeUnit . SECONDS . sleep ( 5 ); Peer . TransactionResult tranResult_1 = infoClient . getTranResultByTranId ( tranId_1 ); Assertions . assertEquals ( 0 , tranResult_1 . getErr (). getCode (), \"\u6ca1\u6709\u9519\u8bef\uff0c\u6ce8\u518c\u6210\u529f\" ); } @Test @DisplayName ( \"super_admin\u6ce8\u518cOperate-\u53ef\u4ee5\u90e8\u7f72\u5408\u7ea6CredenceTPL.deploy\u7684\u64cd\u4f5c\" ) @Order ( 2 ) void signUpOperate () throws InterruptedException , IOException { // super_admin\u6ce8\u518c\u90e8\u7f72\u5408\u7ea6credence-net:CredenceTPL.deploy\u7684\u64cd\u4f5c\uff0c\u5411<\u8eab\u4efd\u94fe>\u63d0\u4ea4 //\u82e5\u4e3a\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1\u7684\u591a\u94fe\u6a21\u578b\uff0c\u5219\u5411<\u4e1a\u52a1\u94fe>\u63d0\u4ea4\uff0c\u5c06\u8be5\u6bb5\u4ee3\u7801\u4e2d\u7684\u8eab\u4efd\u94fe\u524d\u7f00\"identity-net\"\u6539\u4e3a\u4e1a\u52a1\u94fe\u524d\u7f00\u201ccredence-net\u201d //\u5c06\u63d0\u4ea4\u81f3<\u8eab\u4efd\u94fe>\u201cpostClient\u201d\u7684\u4ea4\u6613\u6539\u4e3a\u201c\u63d0\u4ea4\u81f3<\u4e1a\u52a1\u94fe>\u201cpostCredenceClient\u201d long millis_1 = System . currentTimeMillis (); Peer . Operate operate = Peer . Operate . newBuilder () . setOpId ( DigestUtils . sha256Hex ( \"credence-net:CredenceTPL.deploy\" )) . setDescription ( \"\u90e8\u7f72\u5b58\u8bc1\u5408\u7ea6-CredenceTPL\u7684\u6743\u9650\" ) . setRegister ( \"identity-net:951002007l78123233\" ) . setIsPublish ( false ) . setOperateType ( Peer . Operate . OperateType . OPERATE_CONTRACT ) . setAuthFullName ( \"credence-net:CredenceTPL.deploy\" ) . setCreateTime ( Timestamp . newBuilder (). setSeconds ( millis_1 / 1000 ). setNanos (( int ) (( millis_1 % 1000 ) * 1000000 )). build ()) . setOpValid ( true ) . setVersion ( \"1.0\" ) . build (); String tranId_2 = UUID . randomUUID (). toString (); Peer . Transaction tran_2 = superCreator . createInvokeTran ( tranId_2 , superCertId , didChaincodeId , signUpOperate , JsonFormat . printer (). print ( operate ), 0 , \"\" ); postClient . postSignedTran ( tran_2 ); TimeUnit . SECONDS . sleep ( 5 ); Peer . TransactionResult tranResult_2 = infoClient . getTranResultByTranId ( tranId_2 ); Peer . ActionResult actionResult_2 = tranResult_2 . getErr (); Assertions . assertEquals ( 0 , actionResult_2 . getCode (), \"\u6ca1\u6709\u9519\u8bef\uff0c\u64cd\u4f5c\u6ce8\u518c\u6210\u529f\" ); } @Test @DisplayName ( \"super_admin\u6388\u6743\u7ed9credence-net:usr-0\u53ef\u90e8\u7f72CredenceTPL\u7684\u6743\u9650\" ) @Order ( 3 ) void grantOperate () throws InterruptedException , IOException { //super_admin\u6388\u6743\u7ed9usr0\u90e8\u7f72\u5408\u7ea6(\"credence-net:CredenceTPL.deploy\")\u7684\u6743\u9650\uff0c\u5411<\u8eab\u4efd\u94fe>\u63d0\u4ea4 //\u82e5\u4e3a\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1\u7684\u591a\u94fe\u6a21\u578b\uff0c\u5219\u5411<\u4e1a\u52a1\u94fe>\u63d0\u4ea4\uff0c\u5c06\u8be5\u6bb5\u4ee3\u7801\u4e2d\u7684\u8eab\u4efd\u94fe\u524d\u7f00\"identity-net\"\u6539\u4e3a\u4e1a\u52a1\u94fe\u524d\u7f00\u201ccredence-net\u201d //\u5c06\u63d0\u4ea4\u81f3<\u8eab\u4efd\u94fe>\u201cpostClient\u201d\u7684\u4ea4\u6613\u6539\u4e3a\u201c\u63d0\u4ea4\u81f3<\u4e1a\u52a1\u94fe>\u201cpostCredenceClient\u201d long millis = System . currentTimeMillis (); Peer . Authorize authorize_1 = Peer . Authorize . newBuilder () . setId ( \"credence-net:\" + UUID . randomUUID ()) . setGrant ( \"identity-net:951002007l78123233\" ) // \u6388\u6743\u8005\uff0c\u8fd9\u91cc\u662fsuper_admin . addGranted ( \"credence-net:usr-0\" ) // \u88ab\u6388\u6743\u8005 usr-0 //\u6b64\u5904\u5408\u7ea6\u4e3aCredenceTPL\uff0c\u540e\u7eed\u90e8\u7f72\u5176\u4ed6\u5408\u7ea6\u9700\u8981\u4fee\u6539 . addOpId ( DigestUtils . sha256Hex ( \"credence-net:CredenceTPL.deploy\" )) // \u6743\u9650\u8ba9\u6e21\uff0c\u6b64\u5904\u4ee3\u8868usr-0\u53ef\u4ee5\u7ee7\u7eed\u6388\u6743\u7ed9\u522b\u4eba . setIsTransfer ( Peer . Authorize . TransferType . TRANSFER_REPEATEDLY ) . setCreateTime ( Timestamp . newBuilder (). setSeconds ( millis / 1000 ). setNanos (( int ) (( millis % 1000 ) * 1000000 )). build ()) . setAuthorizeValid ( true ) . setVersion ( \"1.0\" ) . build (); String tranId_3 = UUID . randomUUID (). toString (); Peer . Transaction tran_3 = superCreator . createInvokeTran ( tranId_3 , superCertId , didChaincodeId , grantOperate , JSONObject . toJSONString ( Collections . singletonList ( JsonFormat . printer (). print ( authorize_1 ))), 0 , \"\" ); postClient . postSignedTran ( tran_3 ); TimeUnit . SECONDS . sleep ( 5 ); Peer . TransactionResult tranResult_3 = infoClient . getTranResultByTranId ( tranId_3 ); Peer . ActionResult actionResult_3 = tranResult_3 . getErr (); Assertions . assertEquals ( 0 , actionResult_3 . getCode (), \"\u6ca1\u6709\u9519\u8bef\uff0c\u6388\u6743\u6210\u529f\" ); } @Test @DisplayName ( \"usr-0\u5177\u6709\u4e86\u5411\u4e1a\u52a1\u94fe\u90e8\u7f72CredenceTPL\u7684\u6743\u9650\uff0c\u56e0\u6b64\u5411\u4e1a\u52a1\u94fe\u90e8\u7f72\u5408\u7ea6\" ) @Order ( 4 ) void testDeployContract () throws InterruptedException , IOException { // \u5411\u4e1a\u52a1\u94fe\u63d0\u4ea4\uff0c\u90e8\u7f72\u5408\u7ea6 String tplString = FileUtils . readFileToString ( new File ( \"jks/test/tpl/CredenceTPL.scala\" ), StandardCharsets . UTF_8 ); Peer . ChaincodeDeploy chaincodeDeploy = Peer . ChaincodeDeploy . newBuilder () . setTimeout ( 5000 ) . setCodePackage ( tplString ) . setLegalProse ( \"\" ) . setCType ( Peer . ChaincodeDeploy . CodeType . CODE_SCALA ) . setRType ( Peer . ChaincodeDeploy . RunType . RUN_SERIAL ) . setSType ( Peer . ChaincodeDeploy . StateType . STATE_BLOCK ) . setInitParameter ( \"\" ) . setCclassification ( Peer . ChaincodeDeploy . ContractClassification . CONTRACT_CUSTOM ) . build (); DeployTran deployTran = DeployTran . newBuilder () . setTxid ( UUID . randomUUID (). toString ()) . setCertId ( usr0_certId_0 ) . setChaincodeIdScredenceTPLId ) . setChaincodeDeploy ( chaincodeDeploy ) . build (); // \u6b64\u6b65\u9aa4\u4e2dusr0\u90e8\u7f72\u5408\u7ea6\u6210\u529f DeployTran deployTran_1 = deployTran . toBuilder (). setTxid ( UUID . randomUUID (). toString ()). build (); Peer . Transaction signedDeployTran_1 = usr0_tranCreator_0 . createDeployTran ( deployTran_1 ); postCredenceClient . postSignedTran ( signedDeployTran_1 ); TimeUnit . SECONDS . sleep ( 5 ); Peer . TransactionResult tranResult_4 = infoCredenceClient . getTranResultByTranId ( signedDeployTran_1 . getId ()); Peer . ActionResult actionResult_4 = tranResult_4 . getErr (); Assertions . assertEquals ( 0 , actionResult_4 . getCode (), \"\u6ca1\u6709\u9519\u8bef\uff0c\u5408\u7ea6\u90e8\u7f72\u6210\u529f\" ); } @Test @DisplayName ( \"usr-0\uff0c\u4f5c\u4e3a\u5408\u7ea6\u90e8\u7f72\u8005\uff0c\u6ce8\u518c\u5408\u7ea6\u91cc\u7684Operate-\u6ce8\u518c\u5408\u7ea6\u7684\u67d0\u4e2a\u65b9\u6cd5\" ) @Order ( 5 ) void testSignUpOperate_1 () throws InterruptedException , InvalidProtocolBufferException { // usr0\u6ce8\u518c\u5408\u7ea6\u7684\u67d0\u4e2a\u65b9\u6cd5\u7684Operate\u6210\u529f\uff0c\u5411\u8eab\u4efd\u94fe\u63d0\u4ea4 //\u82e5\u4e3a\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1\u7684\u591a\u94fe\u6a21\u578b\uff0c\u5219\u5411<\u4e1a\u52a1\u94fe>\u63d0\u4ea4\uff0c\u5c06\u8be5\u6bb5\u4ee3\u7801\u4e2d\u7684\u8eab\u4efd\u94fe\u524d\u7f00\"identity-net\"\u6539\u4e3a\u4e1a\u52a1\u94fe\u524d\u7f00\u201ccredence-net\u201d //\u5c06\u63d0\u4ea4\u81f3<\u8eab\u4efd\u94fe>\u201cpostClient\u201d\u7684\u4ea4\u6613\u6539\u4e3a\u201c\u63d0\u4ea4\u81f3<\u4e1a\u52a1\u94fe>\u201cpostCredenceClient\u201d long millis = System . currentTimeMillis (); Peer . Operate operate = Peer . Operate . newBuilder () // \u5408\u7ea6\u7684\u67d0\u4e2a\u65b9\u6cd5 . setOpId ( DigestUtils . sha256Hex ( \"credence-net:CredenceTPL.creProof3\" )) // \u63cf\u8ff0\u968f\u610f . setDescription ( \"CredenceTPL.creProof3\" ) . setRegister ( \"credence-net:usr-0\" ) // setIsPublish\u8bbe\u7f6e\u65b9\u6cd5\u662f\u5426\u516c\u5f00\uff0c\u6bd4\u5982\u65b0\u6ce8\u518c\u4e86\u4e00\u4e2a\u7528\u6237usr-1\uff0c\u5982\u679c\u662ffalse\u7684\u8bdd\uff0cusr-1\u9700\u8981\u88ab\u6388\u6743\u624d\u80fd\u8c03\u7528creProof3 // \u5982\u679c\u8bbe\u7f6etrue\uff0c\u65b0\u6ce8\u518c\u7684\u4efb\u4f55\u7528\u6237\uff0c\u90fd\u53ef\u4ee5\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5 //\u4e5f\u5373\uff0cfalse\u5219\u522b\u7684\u7528\u6237\u9700\u8981\u5f97\u5230\u6388\u6743\u624d\u53ef\u4ee5\u8c03\u7528\uff0ctrue\u5219\u8868\u793a\u516c\u5f00\uff0c\u4efb\u4f55\u4eba(\u6ce8\u518c\u7528\u6237)\u90fd\u53ef\u4ee5\u8c03\u7528 . setIsPublish ( true ) . setOperateType ( Peer . Operate . OperateType . OPERATE_CONTRACT ) . setAuthFullName ( \"credence-net:CredenceTPL.creProof3\" ) // \u5047\u8bbeCredenceTPL \u6709\u591a\u4e2a\u7248\u672c . setCreateTime ( Timestamp . newBuilder (). setSeconds ( millis / 1000 ). setNanos (( int ) (( millis % 1000 ) * 1000000 )). build ()) . setOpValid ( true ) . setVersion ( \"1.0\" ) . build (); String tranId = UUID . randomUUID (). toString (); Peer . Transaction tran = usr0_tranCreator_0 . createInvokeTran ( tranId , usr0_certId_0 , didChaincodeId , signUpOperate , JsonFormat . printer (). print ( operate ), 0 , \"\" ); // \u5411\u8eab\u4efd\u94fe\u63d0\u4ea4 postClient . postSignedTran ( tran ); TimeUnit . SECONDS . sleep ( 5 ); Peer . TransactionResult tranResult = infoClient . getTranResultByTranId ( tranId ); Peer . ActionResult actionResult = tranResult . getErr (); Assertions . assertEquals ( 0 , actionResult . getCode (), \"\u6ca1\u6709\u9519\u8bef\uff0c\u64cd\u4f5c\u6ce8\u518c\u6210\u529f\" ); } @Test @DisplayName ( \"\u8c03\u7528\u4e1a\u52a1\u94fe\u4e2d\u521a\u90e8\u7f72\u7684\u5408\u7ea6\uff0c\u5b58\u8bc1\u6570\u636e\" ) @Order ( 6 ) void testCredenceProof () throws InterruptedException { // usr0\u63d0\u4ea4\u5b58\u8bc1\u4ea4\u6613\uff0c\u5411\u4e1a\u52a1\u94fe\u63d0\u4ea4 String tranId = UUID . randomUUID (). toString (); Peer . Transaction tran = usr0_tranCreator_0 . createInvokeTran ( tranId , usr0_certId_0 , credenceTPLId , \"creProof3\" , String . format ( \"{\\\"uuid\\\" : \\\"%s\\\",\\\"data\\\" : \\\"{\\\\\\\"data1\\\\\\\": \\\\\\\"xyb002\\\\\\\",\\\\\\\"data2\\\\\\\": \\\\\\\"xyb003\\\\\\\"}\\\"}\" , tranId ), 0 , \"\" ); String tranHex = Hex . encodeHexString ( tran . toByteArray ()); postCredenceClient . postSignedTran ( tranHex ); TimeUnit . SECONDS . sleep ( 5 ); Peer . TransactionResult tranResult = infoCredenceClient . getTranResultByTranId ( tranId ); Peer . ActionResult actionResult = tranResult . getErr (); Assertions . assertEquals ( 0 , actionResult . getCode (), \"\u5b58\u8bc1\u6210\u529f\" ); } } \u4f7f\u7528 KeyStoreExplorer \uff08\u6216\u8005\u4f7f\u7528 \u4ee3\u7801 \uff09\u5373\u53ef\u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u5bfc\u51fa\u8bc1\u4e66 \u52a8\u6001\u7ba1\u7406\u7ec4\u7f51\u8282\u70b9 \u5728RepChain2.0.0\u4e4b\u524d\uff0c\u57fa\u4e8eTLS1.2\u7ec4\u7f51\u7684RepChain\u7684\u5404\u4e2a\u8282\u70b9\u9ed8\u8ba4\u4f7f\u7528 mytruststore.jks \u6765\u4fdd\u5b58\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\uff08\u5305\u542b\u53c2\u4e0e\u7ec4\u7f51\u7684\u6240\u6709\u8282\u70b9\u8bc1\u4e66\uff09\uff0c\u5982\u679c\u60f3\u8981\u52a0\u5165\u65b0\u7684\u7ec4\u7f51\u8282\u70b9\uff0c\u6709\u4e24\u79cd\u65b9\u6848\uff1a \u65b9\u6848\u4e00\uff1a\u5c06\u7f51\u7edc\u91cc\u73b0\u6709\u7684\u6240\u6709\u8282\u70b9\u7684 mytruststore.jks \u90fd\u66f4\u65b0\uff08\u5c06\u65b0\u7684\u8282\u70b9\u7684\u8bc1\u4e66\u5230\u5982\u5230\u8be5\u5b58\u50a8\u5e93\uff09\uff0c\u7136\u540e\u91cd\u542f\u6240\u6709\u8282\u70b9 \u65b9\u6848\u4e8c\uff1a\u5728 mytruststore.jks \u4e2d\u9884\u7f6e\u591a\u4e00\u4e9b\u8282\u70b9\u8bc1\u4e66\uff0c\u8fd9\u6837\u65e0\u9700\u91cd\u542f\u7f51\u7edc\uff0c\u4f46\u662f\u4e5f\u65e0\u6cd5\u9884\u4f30\u9884\u7f6e\u591a\u5c11\u5408\u9002 \u4ece\u4e0a\u9762\u4e24\u4e2a\u65b9\u6848\u53ef\u4ee5\u770b\u51fa\uff0c\u65b9\u5f0f\u4e8c\u6bd4\u65b9\u5f0f\u4e00\u7a0d\u5fae\u597d\u4e00\u4e9b\uff0c\u4f46\u662f\u4e5f\u4e0d\u662f\u4e00\u52b3\u6c38\u9038 RepChain2.0.0\u5b9e\u73b0\u4e86\u901a\u8fc7\u5408\u7ea6\u6765\u7ba1\u7406\u7ec4\u7f51\u8282\u70b9\u7684\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\uff0c\u8c03\u7528\u5408\u7ea6\u5bf9\u5b58\u653e\u5728\u94fe\u4e0a\u7684\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\u66f4\u65b0\u65f6\uff0c\u4f1a\u89e6\u53d1RepChain\u91cd\u6784TrustKeyStore\uff08\u4f9d\u636e\u94fe\u4e0a\u7684\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\uff09\uff0c\u5408\u7ea6\u53ef\u4ee5\u5b9e\u73b0\u65b0\u589e\u6216\u5220\u9664\u8282\u70b9\u8bc1\u4e66\uff1a \u5bf9\u94fe\u4e0a\u7684\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\u589e\u52a0\u65b0\u7684\u8282\u70b9\u8bc1\u4e66\uff0c\u4e4b\u540e\u52a0\u5165\u65b0\u7684\u8282\u70b9\u5230\u73b0\u6709\u7f51\u7edc\u65f6\uff0c\u7f51\u7edc\u91cc\u7684\u6240\u6709\u8282\u70b9\u4f1a\u91cd\u6784TrustKeyStore\uff0c\u65b0\u7684\u8282\u70b9\u5c31\u53ef\u4ee5\u6210\u529f\u7684\u4e0e\u5176\u4ed6\u8282\u70b9\u5efa\u7acbTLS\u8fde\u63a5 \u6d4b\u8bd5\u7528\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/multi_chain/ManageNodeCertTest.java#L128 \u5bf9\u94fe\u4e0a\u7684\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\u5220\u9664\u67d0\u4e2a\u8282\u70b9\u8bc1\u4e66\uff0c\u7f51\u7edc\u91cc\u7684\u6240\u6709\u8282\u70b9\u4f1a\u91cd\u6784TrustKeyStore\uff0c\u5e76\u5c06\u76f8\u5e94\u7684\u8282\u70b9down\u6389 \u6d4b\u8bd5\u7528\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/multi_chain/ManageNodeCertTest.java#L148 \u4ece\u4e0a\u9762\u65b9\u6848\u53ef\u4ee5\u771f\u6b63\u7684\u5b9e\u73b0\u52a8\u6001\u7ba1\u7406\u7ec4\u7f51\u8282\u70b9\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\uff0c\u4ee5\u53ca\u52a8\u6001\u7ba1\u7406\u7ec4\u7f51\u8282\u70b9 \u52a8\u6001\u7ba1\u7406\u5171\u8bc6\u5217\u8868 RepChain2.0.0\u4e4b\u524d\uff0c\u57fa\u4e8e\u914d\u7f6e\u91cc\u7684\u62bd\u7b7e\u5217\u8868\u8fdb\u884c\u62bd\u7b7e\u9009\u62e9\u51fa\u5757\u4eba\uff0c\u5982\u679c\u60f3\u8981\u4fee\u6539\u62bd\u7b7e\u5217\u8868\uff08\u5171\u8bc6\u8282\u70b9\u5217\u8868\uff09\uff0c\u9700\u8981\u4fee\u6539\u6240\u6709\u8282\u70b9\u7684\u914d\u7f6e\uff0c\u5e76\u91cd\u542f\u6574\u4e2a\u7f51\u7edc RepChain2.0.0\u5b9e\u73b0\u4e86\u901a\u8fc7\u5408\u7ea6\u7ba1\u7406RepChain\u7684\u5171\u8bc6\u62bd\u7b7e\u5217\u8868\uff0c\u65e0\u9700\u518d\u4fee\u6539\u914d\u7f6e\u5e76\u91cd\u542f\u6574\u4e2a\u7f51\u7edc\u4e86\u3002 \u6d4b\u8bd5\u7528\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/multi_chain/ManageNodeCertTest.java#L149 RepChain\u542f\u52a8\u65b9\u5f0f \u5355\u673a\u591a\u8282\u70b9 java - cp RepChain . jar rep . app . Repchain \"***.nodex\" \u5355\u673a\u5355\u8282\u70b9 // \u53ef\u4ee5\u8bbe\u7f6e\u591a\u53c2\u6570\uff0c\u5206\u522b\u4e3a\u8282\u70b9\u540d java - cp RepChain . jar rep . app . Repchain_Single \"***.nodex\" \u8282\u70b9\u7ba1\u7406\u670d\u52a1 // \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u7ba1\u7406\u670d\u52a1\u7684\u7aef\u53e3\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u662f\u5426\u5f00\u542fssl\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u4e3a\u662f\u5426\u5f00\u542fssl\u53cc\u5411\u8ba4\u8bc1\uff0c\u4e4b\u540e\u7684\u53c2\u6570\u90fd\u4e3a\u8282\u70b9\u540d java - cp RepChain . jar rep . app . RepChain_Management 8080 0 false \"***.node1\" Q&A \u5224\u65ad\u4ea4\u6613\u662f\u5426\u4e0a\u94fe \u67e5\u8be2\u4ea4\u6613\u5728\u533a\u5757\u4e2d\u7684\u6267\u884c\u7ed3\u679c\uff0c\u5373TransactionResult","title":"\u529f\u80fd\u4ecb\u7ecd"},{"location":"RepChain-2.0/#_1","text":"","title":"\u591a\u94fe\u534f\u540c"},{"location":"RepChain-2.0/#_2","text":"\u5355\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u540c\u65f6\u8d1f\u8d23\u4e1a\u52a1 1.\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\u7684levelDB 2.\u8981\u6784\u5efa\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo \uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09 \u4f7f\u7528\u793a\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/did \u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u4e1a\u52a1\u94fe\u53ea\u8d1f\u8d23\u4e1a\u52a1 1.\u8981\u914d\u7f6e\u4e3a\u5171\u4eablevelDB 2.\u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo \uff08\u8eab\u4efd\u94fe\uff09\u548c rep.utils.CreateGenesisInfo4NoTransaction \uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09\u548c json/credence-net/genesis.json \uff08\u4e1a\u52a1\u94fe\uff09 \u4f7f\u7528\u793a\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/multi_chain/MultiChainTest.java \u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1 1.\u8981\u914d\u7f6e\u4e3a\u5171\u4eablevelDB 2.\u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.identity.CreateIdentityGenesisInfo \uff08\u8eab\u4efd\u94fe\uff09 \u548c rep.utils.credence.CreateCredenceGenesisInfo \uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09\u548c json/credence-net/genesis.json \uff08\u4e1a\u52a1\u94fe\uff09 \u4f7f\u7528\u793a\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/multi_chain/MultiChainSeparateTest.java \u914d\u7f6e\u6587\u4ef6\u5982\u4e0b\u6240\u793a\uff0c identity-net \u4e3a\u8eab\u4efd\u94fe\u6807\u8bc6\uff0c credence-net \u4e3a\u4e1a\u52a1\u94fe\u6807\u8bc6\uff0cnode1\u53c2\u4e0e\u8eab\u4efd\u94fe\u7ec4\u7f51\uff0cnode6\u53c2\u4e0e\u4e1a\u52a1\u94fe\u7ec4\u7f51\uff0cnode1\u548cnode6\u7684LevelDB\u914d\u7f6e\u4e3a\u540c\u4e00\u4e2a\u5b58\u50a8\u76ee\u5f55\uff0cnode6\u7684 basic_chain_id \u4e3a\u8eab\u4efd\u94fe\uff1a // \u8eab\u4efd\u94fe\u53c2\u8003conf/121000005l35120456.node1/system.conf system { chain_network_id = \"identity-net\" #\u7ec4\u7f51id\uff0c\u7ec4\u7f51id\u7684\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26 basic_chain_id = \"identity-net\" #\u8d26\u6237\u3001\u8bc1\u4e66\u8eab\u4efd\u5168\u90e8\u4ea4\u7531\u81ea\u5df1\u7ba1\u7406 } storage { db_type = \"LevelDB\" #\u652f\u6301\u6570\u636e\u5e93\u7684\u7c7b\u578b\uff1aLevelDB\u3001RocksDB db_path = \"./repchaindata/data/leveldbdata\" db_name = \"215159697776981712.node1\" db_cache_size=48 #\u6570\u636e\u5e93\u8bfb\u5199\u7f13\u5b58\uff0c\u5355\u4f4d\u4e3aM block_file_type = \"localFileSystem\" block_file_path = \"./repchaindata/data/blockdata\" block_file_name = \"215159697776981712.node1\" file_max_length = 100 #\u5355\u4f4d\u4e3aM } // \u4e1a\u52a1\u94fe\u53c2\u8003conf/330597659476689954.node6/system.conf system { chain_network_id = \"credence-net\" #\u7ec4\u7f51id\uff0c\u7ec4\u7f51id\u7684\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26 basic_chain_id = \"identity-net\" #\u8d26\u6237\u3001\u8bc1\u4e66\u4ea4\u7531identity-net\u7ba1\u7406 } storage { db_type = \"LevelDB\" #\u652f\u6301\u6570\u636e\u5e93\u7684\u7c7b\u578b\uff1aLevelDB\u3001RocksDB db_path = \"./repchaindata/data/leveldbdata\" db_name = \"215159697776981712.node1\" db_cache_size=48 #\u6570\u636e\u5e93\u8bfb\u5199\u7f13\u5b58\uff0c\u5355\u4f4d\u4e3aM block_file_type = \"localFileSystem\" block_file_path = \"./repchaindata/data/blockdata\" block_file_name = \"215159697776981712.node1\" file_max_length = 100 #\u5355\u4f4d\u4e3aM }","title":"\u5e94\u7528\u6a21\u5f0f"},{"location":"RepChain-2.0/#_3","text":"\u8d26\u6237 \u7528\u6237\u8981\u4f7f\u7528\u533a\u5757\u94fe\uff0c\u5fc5\u987b\u5148\u5728RepChain\u4e0a\u6ce8\u518c\u4e00\u4e2a\u8d26\u6237\u3002 \u8bc1\u4e66 \u88abRepChain\u7528\u4e8e\u9a8c\u8bc1\u7528\u6237\u63d0\u4ea4\u7684\u7b7e\u540d\u4ea4\u6613\u3002\u4e00\u4e2a\u8d26\u6237\u4e0b\u53ef\u4ee5\u6ce8\u518c\u591a\u4e2a\u6570\u5b57\u8bc1\u4e66\uff0c\u8d26\u6237\u4e0e\u8bc1\u4e66\u4e3a\u4e00\u5bf9\u591a\u7684\u5173\u7cfb \u64cd\u4f5c \u53ea\u8981\u662f\u6d89\u53ca\u5230\u7b7e\u540d\u4ea4\u6613\uff0c\u90fd\u5177\u4f53\u5230\u67d0\u4e00\u4e2a \u64cd\u4f5c \u4e0a\uff0c\u64cd\u4f5c\u5206 \u516c\u5f00\u4e0e\u975e\u516c\u5f00 \uff0c\u5982\u679c\u64cd\u4f5c\u88ab\u6ce8\u518c\u4e3a \u201d\u516c\u5f00\u201c\uff0c\u4e0d\u9700\u8981\u6388\u6743\u7ed9\u5176\u4ed6\u7528\u6237\uff0c\u5176\u4ed6\u7528\u6237\u4e5f\u53ef\u4ee5\u8c03\u7528 \uff0c\u5982\u679c\u88ab\u6ce8\u518c\u4e3a\u201d\u975e\u516c\u5f00\u201c\uff0c\u5219\u5176\u4ed6\u7528\u6237\u9700\u8981\u5f97\u5230\u6388\u6743\u624d\u80fd\u8c03\u7528\u3002\u4e00\u4e2a\u8d26\u6237\u4e0b\uff0c\u53ef\u4ee5\u6ce8\u518c\u591a\u4e2a\u64cd\u4f5c\uff0c\u8d26\u6237\u4e0e\u64cd\u4f5c\u4e3a\u4e00\u5bf9\u591a\u7684\u5173\u7cfb \u6ce8\uff1a\u7ed3\u5408\u4ea4\u6613\u7684\u4e09\u79cd\u7c7b\u578b\uff08\u90e8\u7f72\u5408\u7ea6\u3001\u4fee\u6539\u5408\u7ea6\u72b6\u6001\u548c\u8c03\u7528\u5408\u7ea6\uff09\u6765\u7406\u89e3 \u6388\u6743 \u5c06\u7528\u6237 \u81ea\u6709\u7684\u64cd\u4f5c \u6216 \u522b\u4eba\u6388\u6743\u7ed9\u81ea\u5df1\u4e14\u53ef\u4ee5\u518d\u6b21\u8ba9\u6e21 \u7684\u64cd\u4f5c\uff0c\u6388\u6743\u7ed9\u522b\u4eba\u3002\u4e00\u4e2a\u8d26\u6237\u4e0b\u53ef\u4ee5\u6709\u591a\u4e2a\u88ab\u6388\u6743\u7684\u64cd\u4f5c\uff0c\u8d26\u6237\u4e0e\u88ab\u6388\u6743\u7684\u64cd\u4f5c\u4e3a\u4e00\u5bf9\u591a\u7684\u5173\u7cfb","title":"\u672f\u8bed"},{"location":"RepChain-2.0/#_4","text":"RepChain-v2.0.0\u901a\u8fc7 \u6743\u9650\u7ba1\u7406\u5408\u7ea6 \uff08\u9ed8\u8ba4\u5185\u7f6e\u7684\u7cfb\u7edf\u5408\u7ea6\uff0c\u5408\u7ea6\u540d\uff1a RdidOperateAuthorizeTPL \uff0c\u7248\u672c\u53f7\uff1a 1 \uff09\u6765\u7ba1\u7406\u7528\u6237\u8eab\u4efd\uff08\u8d26\u6237\u3001\u6743\u9650\u7b49\uff09\uff0c\u76ee\u524d\u5408\u7ea6\u91cc\u5b9a\u4e49\u7684\u6240\u6709\u65b9\u6cd5\u5982\u4e0b\u8868\u6240\u793a\uff1a \u662f\u5426\u516c\u5f00\uff1a\"\u5426\"\u8868\u793a\u7528\u6237\u8c03\u7528\u8be5\u65b9\u6cd5\u9700\u8981\u88ab\u6388\u6743\uff0c\"\u662f\"\u8868\u793a\u7528\u6237\u8c03\u7528\u8be5\u65b9\u6cd5\u65e0\u9700\u88ab\u6388\u6743 \u5408\u7ea6\u65b9\u6cd5\u540d \u7528\u9014\u63cf\u8ff0 \u662f\u5426\u516c\u5f00 \u65b9\u6cd5\u5f62\u53c2 signUpSigner \u6ce8\u518c\u8d26\u6237 \u5426 rep.proto.rc2.Signer updateSigner \u66f4\u65b0\u8d26\u6237 \u5426 rep.proto.rc2.Signer updateSignerStatus \u4fee\u6539\u8d26\u6237\u72b6\u6001\uff0c\u7981\u7528/\u542f\u7528 \u5426 SignerStatus(creditCode: String, state: Boolean) signUpCertificate \u6ce8\u518c\u666e\u901a\u8bc1\u4e66 \u662f rep.proto.rc2.Certificate updateCertificateStatus \u4fee\u6539\u666e\u901a\u8bc1\u4e66\u72b6\u6001 \u662f CertStatus(creditCode: String, certName: String, state: Boolean) signUpAllTypeCertificate \u6ce8\u518c\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66 \u5426 rep.proto.rc2.Certificate updateAllTypeCertificateStatus \u4fee\u6539\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66\u72b6\u6001 \u5426 CertStatus(creditCode: String, certName: String, state: Boolean) signUpOperate \u4e3a\u7528\u6237\u81ea\u5df1\u6ce8\u518c\u64cd\u4f5c \u662f rep.proto.rc2.Operate updateOperateStatus \u4fee\u6539\u64cd\u4f5c\u72b6\u6001\uff0c\u7981\u7528/\u542f\u7528 \u662f OperateStatus(opId: String, state: Boolean) grantOperate \u6388\u6743\uff08\u8ba9\u6e21\u6743\u9650\uff09\u7ed9\u5176\u4ed6\u7528\u6237 \u662f List[AuthorizeString]] updateGrantOperateStatus \u66f4\u65b0\u6388\u6743\u72b6\u6001\uff0c\u7981\u7528/\u542f\u7528 \u662f AuthorizeStatus(authId: String, state: Boolean) bindCertToAuthorize \u5c06\u6743\u9650\u7ed1\u5b9a\u5230\u7528\u6237\u5177\u4f53\u7684\u67d0\u4e2a\u8bc1\u4e66 \u662f rep.proto.rc2.BindCertToAuthorize \u4e0a\u9762\u5217\u4e3e\u7684\u6240\u6709\u65b9\u6cd5\uff08\u64cd\u4f5c\uff09\u90fd\u5df2\u7ecf\u5728\u901a\u8fc7\u521b\u4e16\u5757\u6ce8\u518c\u5230\u4e86super_admin\uff08 \"identity-net:951002007l78123233\" \uff09\u7684\u8d26\u6237\u4e0b super_admin\u53ef\u4ee5\u5c06\u975e\u516c\u5f00\u7684\u65b9\u6cd5\u6388\u6743\u7ed9\u5176\u4ed6\u6ce8\u518c\u7528\u6237\uff08\u6388\u6743\u65f6\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u5141\u8bb8/\u7981\u6b62\u8be5\u7528\u6237\u518d\u6b21\u8ba9\u6e21\u7ed9\u5176\u4ed6\u7528\u6237\uff09 \u90e8\u5206\u5f62\u53c2\u7ed3\u6784\u4f53\u5728RepChain\u9879\u76ee\u7684 src/main/protobuf/rc2.proto \u91cc\u5b9a\u4e49","title":"\u8d26\u6237\u6743\u9650\u7ba1\u7406"},{"location":"RepChain-2.0/#_5","text":"\u8d26\u6237\u4f5c\u4e3a\u7528\u6237\u5728\u94fe\u4e0a\u7684\u8eab\u4efd\u6743\u9650\u7684\u8f7d\u4f53\uff0c\u4e3b\u8981\u7ec4\u6210\u90e8\u5206\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u8d26\u6237ID\u662f\u552f\u4e00\u6807\u8bc6\uff0c\u4e00\u4e2a\u8d26\u6237\u4e0b\u53ef\u5305\u542b\u591a\u4e2a\u8bc1\u4e66\u3001\u591a\u4e2a\u64cd\u4f5c\u3001\u591a\u4e2a\u88ab\u6388\u6743\u7684\u64cd\u4f5c\u3002","title":"\u8d26\u6237"},{"location":"RepChain-2.0/#_6","text":"\u5408\u7ea6\u65b9\u6cd5\uff1a signUpSigner \uff0c\u975e\u516c\u5f00\uff0c\u9700\u8981\u6388\u6743\uff0c\u56e0\u6b64\u53ea\u8981\u6709\u8c03\u7528 \"signUpSigner\" \u65b9\u6cd5\u7684\u6743\u9650\u5373\u53ef\u4e3a\u65b0\u7528\u6237\u6ce8\u518c\u8d26\u6237 \u8d26\u6237ID\u547d\u540d\u89c4\u8303 NetWorkID:UUID \uff0c\u5982\uff1a \"identity-net:121000005l35120456\" \u6ce8\u518c\u6d41\u7a0b \u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\u3001B\uff0c\u7528\u6237A\u60f3\u4e3a\u7528\u6237B\u6ce8\u518c\u8d26\u6237 \u5206\u6790\uff1a\u9996\u5148\u7528\u6237A\u8981\u53d6\u5f97\u53ef\u4ee5\u8c03\u7528 signUpSigner \u7684\u6743\u9650 \u65b9\u6848\u4e4b\u4e00\uff1astep1\uff1asuperAdmin\uff08\u6216\u5177\u6709\u4e14\u53ef\u7ee7\u7eed\u8ba9\u6e21\u8be5\u6743\u9650\u7684\u5176\u4ed6\u7528\u6237\uff09\u8981\u5148\u6388\u6743\u7528\u6237A\u8c03\u7528 signUpSigner \u7684\u6743\u9650\uff1bstep2\uff1a\u7528\u6237A\u8c03\u7528 signUpSigner \u4e3a\u7528\u6237B\u6ce8\u518c\u8d26\u6237 \u4e0b\u9762\u4ee5\u4f7f\u7528 identity-net:951002007l78123233 \uff08superAdmin\uff09\u76f4\u63a5\u6784\u9020\u7b7e\u540d\u4ea4\u6613\u6765\u8c03\u7528\u6743\u9650\u7ba1\u7406\u5408\u7ea6\u4e3a\u65b0\u7528\u6237\u6ce8\u518c\u8d26\u6237\uff08 \"identity-net:usr-0\" \uff09\u4e3a\u4f8b\uff08\u57fa\u4e8eRCJava-core\uff09 step1\uff1a\u7528\u6237usr-0\u81ea\u5df1\u751f\u6210\u5bc6\u94a5\u5bf9\u4ee5\u53ca\u8bc1\u4e66 usr-0_0.cer \uff08\u81ea\u7b7e\u540d\u6216CA\u7b7e\u53d1\uff09 step2\uff1a\u7528\u6237usr-0\u5c06step1\u751f\u6210\u7684\u8bc1\u4e66 usr-0_0.cer \u4ea4\u7ed9\u5177\u6709\u6ce8\u518c\u8d26\u6237\u6743\u9650\u7684\u7528\u6237\uff08\u5982super_admin\uff09 step3\uff1asuper_admin\u8c03\u7528\u6743\u9650\u7ba1\u7406\u5408\u7ea6\u4e3a\u7528\u6237usr-0\u6ce8\u518c\u8d26\u6237 identity-net:usr-0 TranPostClient postClient = new TranPostClient ( \"localhost:9081\" ); ChainInfoClient infoClient = new ChainInfoClient ( \"localhost:9081\" ); // \u8d26\u6237\u6743\u9650\u7ba1\u7406\u5408\u7ea6 ChaincodeId didChaincodeId = ChaincodeId . newBuilder (). setChaincodeName ( \"RdidOperateAuthorizeTPL\" ). setVersion ( 1 ). build (); // \u6784\u9020\u7ba1\u7406\u5458\u7684\u79c1\u94a5 PrivateKey super_pri = CertUtil . genX509CertPrivateKey ( new File ( \"jks/identity-net/951002007l78123233.super_admin.jks\" ), \"super_admin\" , \"951002007l78123233.super_admin\" ). getPrivateKey (); TranCreator superCreator = TranCreator . newBuilder (). setPrivateKey ( super_pri ). setSignAlgorithm ( \"SHA256withECDSA\" ). build (); CertId superCertId = CertId . newBuilder (). setCreditCode ( \"identity-net:951002007l78123233\" ). setCertName ( \"super_admin\" ). build (); // \u8bc1\u4e66pem\u5b57\u7b26\u4e32 String certPem = new String ( Files . readAllBytes ( new File ( \"jks/test/did/usr-0_0.cer\" ). toPath ())); Peer . Certificate cert_proto = Peer . Certificate . newBuilder () // \u65b0\u7528\u6237usr-0\u7684\u8bc1\u4e66<Pem\u5b57\u7b26\u4e32> . setCertificate ( certPem ) . setAlgType ( \"sha256withecdsa\" ) . setCertValid ( true ) . setCertType ( Peer . Certificate . CertType . CERT_AUTHENTICATION ) // \u8bbe\u7f6eCertId\uff0c<\u8d26\u6237ID>\u548c<\u8bc1\u4e66\u522b\u540d> . setId ( Peer . CertId . newBuilder (). setCreditCode ( \"identity-net:usr-0\" ). setCertName ( \"0\" ). build ()) . setCertHash ( DigestUtils . sha256Hex ( certPem . replaceAll ( \"\\r\\n|\\r|\\n|\\\\s\" , \"\" ))) . build (); Peer . Signer usr0_signer = Peer . Signer . newBuilder () . setName ( \"usr-0\" ) // \u7528\u6237usr-0\u7684\u8d26\u6237ID . setCreditCode ( \"identity-net:usr-0\" ) . setMobile ( \"18888888888\" ) // \u6ce8\u518c\u8d26\u6237\u65f6\uff0c\u8981\u9644\u5e26\u4e00\u4e2a\u6570\u5b57\u8bc1\u4e66\uff08\u8eab\u4efd\u8bc1\u4e66\uff09 . addAllAuthenticationCerts ( Collections . singletonList ( cert_proto )) . setSignerValid ( true ) . build (); // super_admin\u5411\u8eab\u4efd\u94fe\u63d0\u4ea4\u4ea4\u6613\uff0c\u6ce8\u518c\u7528\u6237\uff0c\u4ee5\u4fbf\u5728\u4e1a\u52a1\u94fe\u4f7f\u7528 String tranId = UUID . randomUUID (). toString (); // \u6784\u9020\u7b7e\u540d\u4ea4\u6613 Peer . Transaction tran = superCreator . createInvokeTran ( tranId , superCertId , didChaincodeId , signUpSigner , JsonFormat . printer (). print ( usr0_signer ), 0 , \"\" ); // \u63d0\u4ea4\u4ea4\u6613 postClient . postSignedTran ( tran ); TimeUnit . SECONDS . sleep ( 5 ); // \u67e5\u8be2\u4ea4\u6613\u4e0a\u94fe\u6267\u884c\u7ed3\u679c Peer . TransactionResult tranResult = infoClient . getTranResultByTranId ( tranId ); Assertions . assertEquals ( 0 , tranResult . getErr (). getCode (), \"\u6ca1\u6709\u9519\u8bef\uff0c\u6ce8\u518c\u6210\u529f\" );","title":"\u6ce8\u518c\u8d26\u6237"},{"location":"RepChain-2.0/#_7","text":"\u5982\u679c\u7528\u6237\u4e0d\u518d\u4f7f\u7528RepChain\uff0c\u6216\u8005\u7531\u4e8e\u67d0\u4e9b\u539f\u56e0\u9700\u8981\u7981\u7528\u8d26\u6237\uff0c\u53ef\u4fee\u6539\u7528\u6237\u7684\u8d26\u6237\u72b6\u6001\uff0c\u53ea\u8981\u6709\u8c03\u7528 \"updateSignerStatus\" \u7684\u6743\u9650\u5373\u53ef\u4fee\u6539\u7528\u6237\u7684\u8d26\u6237\u72b6\u6001\uff0c\u53ef\u6267\u884c\u7981\u7528\u6216\u542f\u7528 \u5408\u7ea6\u65b9\u6cd5\uff1a updateSignerStatus \uff0c\u975e\u516c\u5f00\uff0c\u9700\u8981\u6388\u6743\uff0c\u88ab\u6388\u6743\u7684\u7528\u6237\u624d\u53ef\u8c03\u7528 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\u3001B\uff0c\u7528\u6237A\u60f3\u7981\u7528\u7528\u6237B\u7684\u8d26\u6237 \u5206\u6790\uff1a\u9996\u5148\u7528\u6237A\u8981\u53d6\u5f97\u53ef\u4ee5\u8c03\u7528 updateSignerStatus \u7684\u6743\u9650 \u65b9\u6848\u4e4b\u4e00\uff1astep1\uff1asuperAmdin\uff08\u6216\u5177\u6709\u4e14\u53ef\u7ee7\u7eed\u8ba9\u6e21\u8be5\u6743\u9650\u7684\u5176\u4ed6\u7528\u6237\uff09\u8981\u5148\u6388\u6743\u7528\u6237A\u8c03\u7528 updateSignerStatus \u7684\u6743\u9650\uff1bstep2\uff1a\u7528\u6237A\u8c03\u7528 updateSignerStatus \u4e3a\u7981\u7528/\u542f\u7528\u7528\u6237B\u7684\u8d26\u6237","title":"\u7981\u7528/\u542f\u7528\u8d26\u6237"},{"location":"RepChain-2.0/#_8","text":"\u6d4b\u8bd5\u7528\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/did/SignerOperationTest.java","title":"\u4ee3\u7801\u793a\u4f8b"},{"location":"RepChain-2.0/#_9","text":"\u8bc1\u4e66\u5206\u4e3a\u8eab\u4efd\u8bc1\u4e66\u548c\u666e\u901a\u8bc1\u4e66\uff0c\u8eab\u4efd\u8bc1\u4e66\u76f8\u5bf9\u666e\u901a\u8bc1\u4e66\u6bd4\u8f83\u91cd\u8981\uff0c\u56e0\u4e3a\u8eab\u4efd\u8bc1\u4e66\u5bf9\u5e94\u7684\u5bc6\u94a5\u5bf9\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613\uff0c\u53ef\u4ee5\u4e3a\u672c\u8d26\u6237\u6ce8\u518c\u666e\u901a\u8bc1\u4e66\u6216\u4fee\u6539\u666e\u901a\u8bc1\u4e66\u7684\u72b6\u6001\uff08\u6709\u6548\u6027\uff09","title":"\u8bc1\u4e66"},{"location":"RepChain-2.0/#_10","text":"\u6ce8\u518c\u666e\u901a\u8bc1\u4e66 \u7528\u6237\u8d26\u6237\u6ce8\u518c\u6210\u529f\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8eab\u4efd\u8bc1\u4e66\u5bf9\u5e94\u7684\u5bc6\u94a5\u5bf9\u6784\u9020\u7b7e\u540d\u4ea4\u6613\uff0c\u81ea\u884c\u8c03\u7528\u7cfb\u7edf\u5408\u7ea6 RdidOperateAuthorizeTPL \u4e2d\u7684 signUpCertificate \u65b9\u6cd5\u6765\u4e3a \u81ea\u5df1 \u6ce8\u518c\u666e\u901a\u8bc1\u4e66 \u5408\u7ea6\u65b9\u6cd5\uff1a signUpCertificate \uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u6ce8\u518c\u7528\u6237\u5747\u53ef\u8c03\u7528 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\uff0c\u7528\u6237A\u60f3\u4e3a\u7528\u6237A\u81ea\u5df1\u6ce8\u518c\u666e\u901a\u8bc1\u4e66 \u7528\u6237A\u8c03\u7528 signUpCertificate \u5373\u53ef\u4e3a\u81ea\u5df1\u6ce8\u518c\u8bc1\u4e66 \u6ce8\u518c\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66 \u6ce8\u518c\u8d26\u6237\u65f6\uff0c\u4f1a\u9644\u5e26\u6ce8\u518c\u4e00\u4e2a\u8eab\u4efd\u8bc1\u4e66 \u9664 1 \u4e4b\u5916\uff0c\u53ef\u5728\u5176\u4ed6\u6709\u9700\u8981\u7684\u65f6\u5019\uff0c\u901a\u8fc7\u8c03\u7528\u7cfb\u7edf\u5408\u7ea6 RdidOperateAuthorizeTPL \u4e2d\u7684 signUpAllTypeCertificate \u65b9\u6cd5\u4e3a\u4e00\u4e2a\u6709\u6548\u8d26\u6237\uff08 \u81ea\u5df1\u6216\u5176\u4ed6 \uff09\u6ce8\u518c\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66 \u5408\u7ea6\u65b9\u6cd5\uff1a signUpAllTypeCertificate \uff0c\u975e\u516c\u5f00\uff0c\u9700\u8981\u6388\u6743\uff0c\u88ab\u6388\u6743\u7684\u7528\u6237\u624d\u53ef\u8c03\u7528 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\u3001B\uff0c\u7528\u6237A\u60f3\u4e3a\u7528\u6237A\u6216B\u6ce8\u518c\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66 \u5206\u6790\uff1a\u9996\u5148\u7528\u6237A\u8981\u53d6\u5f97\u53ef\u4ee5\u8c03\u7528 signUpAllTypeCertificate \u7684\u6743\u9650 \u65b9\u6848\u4e4b\u4e00\uff1astep1\uff1asuperAdmin\uff08\u6216\u5177\u6709\u4e14\u53ef\u7ee7\u7eed\u8ba9\u6e21\u8be5\u6743\u9650\u7684\u5176\u4ed6\u7528\u6237\uff09\u8981\u5148\u6388\u6743\u7528\u6237A\u8c03\u7528 signUpAllTypeCertificate \u7684\u6743\u9650\uff1bstep2\uff1a\u7528\u6237A\u8c03\u7528 signUpAllTypeCertificate \u4e3a\u7528\u6237A/B\u6ce8\u518c\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66 // \u6388\u6743\uff0csuper\u6388\u6743\u7ed9usr0, \u6ce8\u518c\u4efb\u610f\u8bc1\u4e66\u7684\u65b9\u6cd5 long millis = System . currentTimeMillis (); Peer . Authorize authorize = Peer . Authorize . newBuilder () . setId ( \"identity-net:\" + UUID . randomUUID ()) . setGrant ( \"identity-net:951002007l78123233\" ) . addGranted ( \"identity-net:usr-0\" ) . addOpId ( DigestUtils . sha256Hex ( \"identity-net:RdidOperateAuthorizeTPL.signUpAllTypeCertificate\" )) // \u8bbe\u7f6e\u662f\u5426\u53ef\u7ee7\u7eed\u8ba9\u6e21 . setIsTransfer ( Peer . Authorize . TransferType . TRANSFER_REPEATEDLY ) . setCreateTime ( Timestamp . newBuilder (). setSeconds ( millis / 1000 ). setNanos (( int ) (( millis % 1000 ) * 1000000 )). build ()) . setAuthorizeValid ( true ) . setVersion ( \"1.0\" ) . build (); String tranId = UUID . randomUUID (). toString (); // \u6388\u6743\u7ed9usr-0 Peer . Transaction tran = node1Creator . createInvokeTran ( tranId , superCertId , didChaincodeId , grantOperate , JSONObject . toJSONString ( Collections . singletonList ( JsonFormat . printer (). print ( authorize ))), 0 , \"\" ); postClient . postSignedTran ( tran ); TimeUnit . SECONDS . sleep ( 2 ); Peer . TransactionResult tranResult = getTransactionResult ( tranId ); Peer . ActionResult actionResult = tranResult . getErr (); Assertions . assertEquals ( 0 , actionResult . getCode (), \"\u6ca1\u6709\u9519\u8bef\uff0c\u6388\u6743\u6210\u529f\" ); // step2: usr0\u4e3ausr1 \u6ce8\u518c\u8eab\u4efd\u8bc1\u4e66 Peer . Certificate usr1_cert_1 = Peer . Certificate . newBuilder () . setCertificate ( certPem ) . setAlgType ( \"sha256withecdsa\" ) . setCertValid ( true ) // \u8bbe\u7f6e\u8bc1\u4e66\u7c7b\u578b\uff0c\u8bc1\u4e66\u7c7b\u578b\u4e3a\u8eab\u4efd\u8bc1\u4e66 . setCertType ( Peer . Certificate . CertType . CERT_AUTHENTICATION ) // \u8bc1\u4e66\u540d\u6839\u636e\u81ea\u5df1\u9700\u8981\u8bbe\u7f6e . setId ( Peer . CertId . newBuilder (). setCreditCode ( \"identity-net:usr-1\" ). setCertName ( \"0\" ). build ()) . setCertHash ( DigestUtils . sha256Hex ( certPem . replaceAll ( \"\\r\\n|\\r|\\n|\\\\s\" , \"\" ))) . build ();; String tranId_1 = UUID . randomUUID (). toString (); // \u6784\u9020\u4ea4\u6613 Peer . Transaction tran_1 = usr0_tranCreator_0 . createInvokeTran ( tranId_1 , usr0_certId_0 , didChaincodeId , signUpAllTypeCertificate , JsonFormat . printer (). print ( usr1_cert_1 ), 0 , \"\" ); postClient . postSignedTran ( tran_1 ); TimeUnit . SECONDS . sleep ( 2 ); Peer . TransactionResult tranResult_1 = getTransactionResult ( tranId_1 ); Peer . ActionResult actionResult_1 = tranResult_1 . getErr (); Assertions . assertEquals ( 0 , tranResult_1 . getErr (). getCode (), \"\u6ca1\u6709\u9519\u8bef\uff0c\u6ce8\u518c\u6210\u529f\" );","title":"\u6ce8\u518c\u8bc1\u4e66"},{"location":"RepChain-2.0/#_11","text":"\u5982\u679c\u7528\u6237\u79c1\u94a5\u4e22\u5931\uff0c\u6216\u8005\u4e0d\u60f3\u518d\u4f7f\u7528\u67d0\u4e2a\u79c1\u94a5\uff0c\u53ef\u4ee5\u5c06\u5728\u94fe\u4e0a\u7684\u3001\u4e0e\u79c1\u94a5\u5bf9\u5e94\u7684\u8bc1\u4e66\u7981\u7528\u6389\uff1b\u540e\u7eed\u627e\u56de\u6216\u8005\u60f3\u542f\u7528\u79c1\u94a5\u65f6\uff0c\u53ef\u4ee5\u6062\u590d\u8bc1\u4e66\u72b6\u6001 \u7981\u7528/\u542f\u7528\u666e\u901a\u8bc1\u4e66 \u7528\u6237\u4f7f\u7528\u81ea\u5df1 \u8eab\u4efd\u8bc1\u4e66 \u5bf9\u5e94\u7684\u5bc6\u94a5\u6784\u5efa\u7684\u7b7e\u540d\u4ea4\u6613\uff0c\u53ef\u4ee5\u8c03\u7528 updateCertificateStatus \u65b9\u6cd5\u6765\u4fee\u6539 \u81ea\u5df1 \u8d26\u6237\u4e0b\u7684\u666e\u901a\u8bc1\u4e66\u7684\u72b6\u6001 \u5408\u7ea6\u65b9\u6cd5\uff1a updateCertificateStatus \uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u6ce8\u518c\u7528\u6237\u5747\u53ef\u8c03\u7528\uff0c\u4f46\u662f\u8981\u6ce8\u610f\uff0c\u9700\u4f7f\u7528\u81ea\u5df1 \u8eab\u4efd\u8bc1\u4e66\u5bf9\u5e94\u7684\u5bc6\u94a5 \u6765\u6784\u5efa\u7b7e\u540d\u4ea4\u6613\uff0c\u5e76\u4e14\u53ea\u80fd\u4fee\u6539 \u81ea\u5df1 \u8d26\u6237\u4e0b\u7684\u666e\u901a\u8bc1\u4e66\u72b6\u6001 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\uff0c\u7528\u6237A\u60f3\u7981\u7528\u7528\u6237A\u81ea\u5df1\u7684\u666e\u901a\u8bc1\u4e66 \u7528\u6237A\u8c03\u7528 updateCertificateStatus \u5373\u53ef\u7981\u7528\u81ea\u5df1\u7684\u666e\u901a\u8bc1\u4e66 \u7981\u7528/\u542f\u7528\u8eab\u4efd/\u666e\u901a\u8bc1\u4e66 \u5408\u7ea6\u65b9\u6cd5\uff1a updateAllTypeCertificateStatus \uff0c\u975e\u516c\u5f00\uff0c\u9700\u8981\u6388\u6743\uff0c\u7528\u6237\u8c03\u7528\u8be5\u65b9\u6cd5\u53ef\u4fee\u6539 \u81ea\u5df1\u6216\u5176\u4ed6\u4eba \u8d26\u6237\u4e0b\u7684\u7684\u8eab\u4efd\u8bc1\u4e66\u6216\u666e\u901a\u8bc1\u4e66\u7684\u72b6\u6001 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\u3001B\uff0c\u7528\u6237A\u60f3\u7981\u7528\u7528\u6237A\u7684\u666e\u901a\u8bc1\u4e66\uff0c\u4ee5\u53ca\u7981\u7528\u7528\u6237B\u7684\u8eab\u4efd\u8bc1\u4e66 \u5206\u6790\uff1a\u9996\u5148\u7528\u6237A\u8981\u53d6\u5f97\u53ef\u4ee5\u8c03\u7528 updateAllTypeCertificateStatus \u7684\u6743\u9650 \u53ef\u9009\u65b9\u6848\u4e4b\u4e00\uff1astep1\uff1asuperAmdin\uff08\u6216\u5177\u6709\u4e14\u53ef\u7ee7\u7eed\u8ba9\u6e21\u8be5\u6743\u9650\u7684\u5176\u4ed6\u7528\u6237\uff09\u8981\u5148\u6388\u6743\u7528\u6237A\u8c03\u7528 updateAllTypeCertificateStatus \u7684\u6743\u9650\uff1bstep2\uff1a\u7528\u6237A\u8c03\u7528 updateAllTypeCertificateStatus \u7981\u7528\u7528\u6237B\u7684\u8eab\u4efd\u8bc1\u4e66\u4ee5\u53caA\u7684\u666e\u901a\u8bc1\u4e66","title":"\u7981\u7528/\u542f\u7528\u8bc1\u4e66"},{"location":"RepChain-2.0/#_12","text":"\u6d4b\u8bd5\u7528\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/did/CertOpeartionTest.java","title":"\u4ee3\u7801\u793a\u4f8b"},{"location":"RepChain-2.0/#_13","text":"\u6bcf\u4e2a\u8d26\u6237\u4e0b\u53ef\u4ee5\u6709\u5982\u4e0b\u4e09\u7c7b\u64cd\u4f5c\uff0c\u4e14\u6bcf\u4e2a\u7c7b\u578b\u53ef\u4ee5\u6709\u591a\u4e2a\u64cd\u4f5c \u90e8\u7f72\u5408\u7ea6\u3001\u4fee\u6539\u5408\u7ea6\u72b6\u6001 \u5408\u7ea6\u4e2d\u5177\u4f53\u7684\u67d0\u4e2a\u65b9\u6cd5 RepChain API\u4e2d\u5177\u4f53\u7684\u67d0\u4e2a\u63a5\u53e3","title":"\u64cd\u4f5c"},{"location":"RepChain-2.0/#_14","text":"\u6ce8\u518c\u5408\u7ea6\u4e2d\u5177\u4f53\u7684\u67d0\u4e2a\u65b9\u6cd5\uff0c\u53ea\u6709\u6ce8\u518c\u4e4b\u540e\uff0c\u7528\u6237\u624d\u53ef\u4ee5\u901a\u8fc7\u7b7e\u540d\u4ea4\u6613\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5e76\u4e14\u5c06\u8be5\u64cd\u4f5c\u6388\u6743\u7ed9\u5176\u4ed6\u7528\u6237\u540e\uff0c\u5176\u4ed6\u7528\u6237\u4e5f\u5f97\u5230\u4e86\u8c03\u7528\u8be5\u65b9\u6cd5\u7684\u6743\u9650 \u64cd\u4f5cID\u547d\u540d\u89c4\u8303 sha256(\u64cd\u4f5c\u540d)\uff0c\u64cd\u4f5c\u540d\u7684\u89c4\u8303\u8bf7\u53c2\u89c1\u4e0b\u6587 \u64cd\u4f5c\u547d\u540d\u89c4\u8303 API\uff0c\u53ea\u80fd\u7531superAdmin\u6765\u6ce8\u518c NetWorkID:transaction.postTranByString \uff0c\u5982\uff1a \"identity-net:transaction.postTranByString\" \u90e8\u7f72\u5408\u7ea6\uff0c\u53ea\u80fd\u7531superAdmin\u6765\u6ce8\u518c\uff0c\u4e4b\u540e\u518d\u6388\u6743\u7ed9\u522b\u7684\u7528\u6237 NetWorkID:ContractName.deploy \uff0c\u5982\uff1a \"identity-net:CredenceTPL.deploly\" \uff0c\u53ea\u80fd\u90e8\u7f72\u540d\u4e3a CredenceTPL \u7684\u5408\u7ea6 NetWorkID:*.deploy \uff0c\u5982\uff1a \"identity-net:*.deploly\" \uff0c\u90e8\u7f72\u4efb\u4f55\u5408\u7ea6\uff0c\u5728\u521b\u4e16\u5757\u4e2d\u5df2\u6ce8\u518c\u5230super_admin\u8d26\u6237\u4e0b \u4fee\u6539\u5408\u7ea6\u72b6\u6001\uff0c\u53ea\u80fd\u7531superAdmin\u6765\u6ce8\u518c\uff0c\u4e4b\u540e\u518d\u6388\u6743\u7ed9\u522b\u7684\u7528\u6237 NetWorkID:ContractName.setState \uff0c\u5982\uff1a \"identity-net:CredenceTPL.setState\" \uff0c\u53ea\u80fd\u4fee\u6539\u540d\u4e3a CredenceTPL \u7684\u5408\u7ea6\u72b6\u6001 NetWorkID:*.setState \uff0c\u5982\uff1a \"identity-net:*.setState\" \uff0c\u4fee\u6539\u4efb\u4f55\u5408\u7ea6\u72b6\u6001\uff0c\u5728\u521b\u4e16\u5757\u4e2d\u6ce8\u518c\u5230super_admin\u8d26\u6237\u4e0b \u5408\u7ea6\u64cd\u4f5c\uff0c \u5177\u6709\u5408\u7ea6\u90e8\u7f72\u6743\u9650 \u7684\u7528\u6237\uff0c\u5c31\u53ef\u4ee5\u6ce8\u518c NetWorkID:ContractName.MethodName \uff0c\u5982\uff1a \"identity-net:CredenceTPL.proof\" \uff0c\u540d\u4e3a CredenceTPL \u7684\u5408\u7ea6\u4e2d\u7684\u540d\u4e3a proof \u7684\u65b9\u6cd5 \u65b9\u6cd5\uff1a signUpOperate \uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u6ce8\u518c\u7528\u6237\u5747\u53ef\u8c03\u7528\uff0c\u4f46\u662f\u8981\u6ce8\u610f\uff0c\u7528\u6237\u60f3\u8981\u6ce8\u518c\u67d0\u5408\u7ea6\u91cc\u7684\u65b9\u6cd5\uff0c\u6709\u4e00\u4e2a\u524d\u63d0\u6761\u4ef6\uff0c\u5373\u7528\u6237\u62e5\u6709\u8be5\u5408\u7ea6\u7684\u90e8\u7f72\u6743\u9650\u3002 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\u3001B\uff0c\u7528\u6237A\u60f3\u90e8\u7f72\u5408\u7ea6TestProofTPL.scala\uff0c\u8fdb\u800c\u6ce8\u518c\u5408\u7ea6\u4e2d\u7684\u65b9\u6cd5method_1\uff0c\u7528\u6237B\u60f3\u6ce8\u518c\u5408\u7ea6\u4e2d\u7684\u65b9\u6cd5method_2 \u5206\u6790\uff1a\u53ea\u8981\u7528\u6237A\u548c\u7528\u6237B\u83b7\u5f97\u53ef\u4ee5\u90e8\u7f72\u5408\u7ea6TestProofTPL.scala\u7684\u6743\u9650\u5373\u53ef \u53ef\u9009\u62e9\u65b9\u6848\u4e4b\u4e00\uff1astep1\uff1asuperAmdin\u6ce8\u518c \"identity-net:TestProofTPL.deploy\" \u64cd\u4f5c\u5230\u81ea\u5df1\u8d26\u6237\uff1bstep2\uff1a\u6388\u6743\u7528\u6237A \"identity-net:TestProofTPL.deploy\" \u7684\u6743\u9650\uff0c\u6388\u4e88\u7528\u6237B \"identity-net:*.deploy\" \u7684\u6743\u9650\uff1bstep3\uff1a\u7528\u6237A\u90e8\u7f72\u5408\u7ea6TestProofTPL.scala\uff1bstep4\uff1a\u7528\u6237A\u6ce8\u518c \"identity-net:TestProofTPL.method_1\" \uff0c\u7528\u6237B\u6ce8\u518c \"identity-net:TestProofTPL.method_2\"","title":"\u6ce8\u518c\u64cd\u4f5c"},{"location":"RepChain-2.0/#_15","text":"\u64cd\u4f5c\u72b6\u6001\u7684\u4fee\u6539\u5177\u6709\u5168\u5c40\u6027\u548c\u4f20\u9012\u6027\uff0c\u5373\u64cd\u4f5c\u7684\u6ce8\u518c\u8005\uff0c\u5c06\u64cd\u4f5c\u7981\u7528\u540e\uff0c\u6240\u6709\u88ab\u6388\u6743\u8be5\u64cd\u4f5c\u7684\u7528\u6237\uff0c\u540e\u7eed\u90fd\u5c06\u65e0\u6cd5\u4f7f\u7528\u8be5\u64cd\u4f5c \u65b9\u6cd5\uff1a updateOperateStatus \uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u7528\u6237\u5747\u53ef\u8c03\u7528\uff0c\u7528\u6237\u60f3\u8981\u7981\u7528\u5408\u7ea6\u91cc\u7684\u67d0\u4e2a\u65b9\u6cd5\uff0c\u6709\u4e00\u4e2a\u524d\u63d0\u6761\u4ef6\uff0c\u5373\u7528\u6237\u62e5\u6709\u8be5\u5408\u7ea6\u7684\u90e8\u7f72\u6743\u9650\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u8d26\u6237B\u5177\u6709 \"identity-net:*.deploly\" \uff0c\u8d26\u6237A\u5177\u6709 \"identity-net:cName.deploy\" \uff0c\u7981\u7528\u64cd\u4f5c\u540e\uff0c\u6240\u6709\u7528\u6237\u5747\u4e0d\u53ef\u518d\u8c03\u7528\u6267\u884ccName.method_1\u4e0ecName.method_2\u4e86","title":"\u7981\u7528/\u542f\u7528\u64cd\u4f5c"},{"location":"RepChain-2.0/#_16","text":"\u6d4b\u8bd5\u7528\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/did/OperOperationTest.java","title":"\u4ee3\u7801\u793a\u4f8b"},{"location":"RepChain-2.0/#_17","text":"\u7528\u6237\u53ef\u5c06\u81ea\u5df1\u8d26\u6237\u4e0b\u7684\u64cd\u4f5c\u6216\u522b\u4eba\u8ba9\u6e21\u7ed9\u81ea\u5df1\u7684\u6709\u6548\u7684\u4e14\u53ef\u4ee5\u518d\u6b21\u8ba9\u6e21\u7684\u64cd\u4f5c\u6388\u6743\u7ed9\u522b\u7684\u7528\u6237\uff0c\u5728RepChain\u7684\u6240\u6709\u8d26\u6237\u96c6\u5408\u91cc\uff0c\u5404\u4e2a\u8d26\u6237\u4e4b\u95f4\u53ef\u4ee5\u76f8\u4e92\u6388\u6743\uff0c\u6bcf\u4e2a\u6388\u6743\u90fd\u6709\u552f\u4e00ID \u6388\u6743ID\u547d\u540d\u89c4\u8303 NetWorkID:UUID \uff0c\u5982\uff1a \"identity-net:auth-usr-0-to-usr-1\"","title":"\u6388\u6743"},{"location":"RepChain-2.0/#_18","text":"\u65b9\u6cd5\uff1a grantOperate \uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u7528\u6237\u5747\u53ef\u8c03\u7528 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u8d26\u6237B\u6709\u64cd\u4f5c \"identity-net:TestProofTPL.method_2\" \uff0c\u8d26\u6237A\u6709\u64cd\u4f5c \"identity-net:TestProofTPL.method_1\" \uff0c\u8d26\u6237B\u5728\u4e3a\u8d26\u6237D\u6388\u6743\u65f6\uff0c\u8bbe\u7f6e\u4e3a\u4e0d\u53ef\u7ee7\u7eed\u8ba9\u6e21\uff0c\u8d26\u6237A\u4e3a\u8d26\u6237C\u6388\u6743\u65f6\uff0c\u8bbe\u7f6e\u4e3a\u53ef\u7ee7\u7eed\u8ba9\u6e21\uff0c\u56e0\u6b64\u6700\u7ec8D\u4e0d\u53ef\u5c06 \"identity-net:TestProofTPL.method_2\" \u7ee7\u7eed\u8ba9\u6e21\u7ed9\u8d26\u6237E\uff0c\u800c\u8d26\u6237C\u53ef\u4ee5\u7ee7\u7eed\u5c06 \"identity-net:TestProofTPL.method_1\" \u8ba9\u6e21\u7ed9\u8d26\u6237E","title":"\u8ba9\u6e21\u64cd\u4f5c"},{"location":"RepChain-2.0/#_19","text":"\u7981\u7528/\u542f\u7528\u6388\u6743\u4e0d\u5177\u6709\u5168\u5c40\u6027\u548c\u4f20\u9012\u6027\uff0c\u5047\u8bbeA\u6388\u6743\u7ed9B\u7528\u6237\u4e00\u4e2a\u53ef\u4ee5\u518d\u6b21\u8ba9\u6e21\u7684\u6743\u9650\uff0cB\u7ee7\u7eed\u6388\u6743\u7ed9C\uff0cA\u5c06\u7ed9B\u7684\u6388\u6743\u7981\u7528\uff0c\u4e0d\u5f71\u54cdC\u7684\u4f7f\u7528 \u65b9\u6cd5\uff1a updateGrantOperateStatus \uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u7528\u6237\u5747\u53ef\u8c03\u7528 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u73b0\u6709\u7528\u6237A\uff0cC\uff0c\u7528\u6237A\u60f3\u7981\u7528\u7528\u6237A\u7ed9C\u7684\u67d0\u4e2a\u6388\u6743 \u7528\u6237A\u8c03\u7528 updateGrantOperateStatus \u53ef\u7981\u7528\u7ed9C\u7684\u6388\u6743 \"identity-net:cName.method_1\" \uff0c\u4e4b\u540eC\u4e0d\u53ef\u4ee5\u518d\u8c03\u7528\u8be5\u65b9\u6cd5","title":"\u7981\u7528/\u542f\u7528\u6388\u6743"},{"location":"RepChain-2.0/#_20","text":"\u7528\u6237\u53ef\u5c06\u522b\u7684\u7528\u6237\u6388\u4e88\u7ed9\u81ea\u5df1\u7684\u6743\u9650\u7ed1\u5b9a\u5230\u8d26\u6237\u4e0b\u7684\u67d0\u4e2a\u5177\u4f53\u8bc1\u4e66\u4e0a\uff0c\u4e4b\u540e\uff0c\u7528\u6237\u4f7f\u7528\u8be5\u8bc1\u4e66\u5bf9\u5e94\u7684\u79c1\u94a5\u5bf9\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613\u53ef\u901a\u8fc7\u8be5\u6743\u9650\u9a8c\u8bc1\uff0c\u5176\u4ed6\u8bc1\u4e66\u5bf9\u5e94\u7684\u79c1\u94a5\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613\u4e0d\u53ef\u4ee5\u901a\u8fc7\u8be5\u6743\u9650\u9a8c\u8bc1 \u65b9\u6cd5\uff1a bindCertToAuthorize \uff0c\u516c\u5f00\uff0c\u65e0\u9700\u6388\u6743\uff0c\u4efb\u4f55\u7528\u6237\u5747\u53ef\u8c03\u7528 \u4e3e\u4f8b\u8bf4\u660e\uff1a\u57fa\u4e8e\u4e0a\u4e00\u5c0f\u8282\u7684\u6743\u9650\u8ba9\u6e21\u64cd\u4f5c\u4e4b\u540e\uff0c\u73b0\u6709\u7528\u6237C\uff0c\u7528\u6237C\u6709\u4e24\u4e2a\u8bc1\u4e66\"cert_0\"\u548c\"cert_1\"\uff0c\u4e24\u4e2a\u8bc1\u4e66\u5206\u522b\u5bf9\u5e94\u7684\u79c1\u94a5\"pri_1\"\u4e0e\"pri_2\"\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613\u90fd\u53ef\u4ee5\u8c03\u7528 \"cName.method_1\" \uff0c\u5f53C\u5c06A\u6388\u4e88\u7ed9\u4ed6\u7684\u6743\u9650\u7ed1\u5b9a\u5230\u8bc1\u4e66\"cert_0\"\u540e\uff0c\u5219\u53ea\u80fd\"pri_1\"\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613 \u53ef\u4ee5 \u8c03\u7528 \"cName.method_1\" \uff0c\"pri_2\"\u6784\u9020\u7684\u7b7e\u540d\u4ea4\u6613 \u4e0d\u53ef\u4ee5 \u8c03\u7528 \"cName.method_1\"","title":"\u7ed1\u5b9a\u6388\u6743\u5230\u8bc1\u4e66"},{"location":"RepChain-2.0/#_21","text":"\u6d4b\u8bd5\u7528\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/did/AuthOperationTest.java","title":"\u4ee3\u7801\u793a\u4f8b"},{"location":"RepChain-2.0/#sdk","text":"","title":"SDK\u4f7f\u7528"},{"location":"RepChain-2.0/#rcjava-core","text":"\u65b0\u7528\u6237\u4ece\u6ce8\u518c\u4e0a\u94fe\u5230\u8c03\u7528\u5408\u7ea6\u65b9\u6cd5\u65f6\uff0c\u4f7f\u7528RCJava-core\u7684\u903b\u8f91\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u8be5\u903b\u8f91\u5177\u6709\u987a\u5e8f\u6027\uff0c\u540e\u7eed\u64cd\u4f5c\u9700\u8981\u5728\u524d\u7f6e\u64cd\u4f5c\u5df2\u5b8c\u6210\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u3002\u5728\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u4e1a\u52a1\u94fe\u53ea\u8d1f\u8d23\u4e1a\u52a1\u7684\u591a\u94fe\u6a21\u578b\u4e2d\uff0c\u4ee5 identity-net:951002007l78123233 \uff08super_admin\uff09\u76f4\u63a5\u6784\u9020\u7b7e\u540d\u4ea4\u6613\u6765\u8c03\u7528\u6743\u9650\u7ba1\u7406\u5408\u7ea6\u4e3a\u65b0\u7528\u6237usr-0\uff08 \"identity-net:usr-0\" \uff09\u6ce8\u518c\u5e76\u6388\u6743\u4e3a\u4f8b\uff0c\u64cd\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a step1\uff1a\u7528\u6237usr-0\u81ea\u5df1\u751f\u6210\u5bc6\u94a5\u5bf9\u4ee5\u53ca\u8bc1\u4e66 usr-0_0.cer \uff08\u81ea\u7b7e\u540d\u6216CA\u7b7e\u53d1\uff09 step2\uff1a\u7528\u6237usr-0\u5c06step1\u751f\u6210\u7684\u8bc1\u4e66 usr-0_0.cer \u4ea4\u7ed9\u5177\u6709\u6ce8\u518c\u8d26\u6237\u6743\u9650\u7684\u7528\u6237\uff08\u5982super_admin\uff09 step3\uff1asuper_admin\u8c03\u7528\u6743\u9650\u7ba1\u7406\u5408\u7ea6\u5411\u8eab\u4efd\u94fe\u53bb\u6ce8\u518c\u7528\u6237usr-0\uff0c\u6b64\u6b65\u9aa4\u4e2dusr-0\u7684\u8d26\u6237\u4ee5\u53ca\u8bc1\u4e66\u90fd\u88ab\u6ce8\u518c\u4e86 step4\uff1asuper_admin\u5411\u8eab\u4efd\u94fe\u53bb\u6ce8\u518c\u53ef\u4ee5\u90e8\u7f72\u5408\u7ea6credence-net:CredenceTPL.deploy\u7684\u64cd\u4f5c step5\uff1asuper_admin\u6388\u6743\u7ed9usr-0\u53ef\u90e8\u7f72\u5408\u7ea6credence-net:CredenceTPL.deploy\u7684\u6743\u9650 step6\uff1ausr-0\u5177\u6709\u4e86\u5411\u4e1a\u52a1\u94fe\u90e8\u7f72CredenceTPL\u7684\u6743\u9650\uff0c\u56e0\u6b64\u5411\u4e1a\u52a1\u94fe\u90e8\u7f72\u5408\u7ea6 step7\uff1ausr-0\u4f5c\u4e3a\u5408\u7ea6\u90e8\u7f72\u8005\uff0c\u6ce8\u518c\u5408\u7ea6\u7684\u67d0\u4e2a\u65b9\u6cd5 step8\uff1ausr-0\u8c03\u7528\u4e1a\u52a1\u94fe\u4e2d\u521a\u90e8\u7f72\u7684\u5408\u7ea6\uff0c\u5b58\u8bc1\u6570\u636e \u4e0a\u8ff0\u6d41\u7a0b\u7684\u4f7f\u7528\u793a\u4f8b\u5982\u4e0b\uff0c\u5b8c\u6574\u4ee3\u7801\u8bf7\u8bbf\u95ee RCJava-core \u9879\u76ee\u7684 src\\test\\java\\com\\rcjava\\did \u76ee\u5f55\uff1a //\u4ee5\u4e0b\u793a\u4f8b\u4e3a\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u4e1a\u52a1\u94fe\u53ea\u8d1f\u8d23\u4e1a\u52a1\u7684\u591a\u94fe\u6a21\u578b\uff0c\u82e5\u4e3a\u5355\u94fe\u6a21\u5f0f\uff1a //1.\u9700\u5c06\u4ee3\u7801\u4e2d\u7684\u4e1a\u52a1\u94fe\u524d\u7f00\u201ccredence-net\u201d\u6539\u4e3a\u8eab\u4efd\u94fe\u524d\u7f00\"identity-net\" //2.\u9700\u5c06\u63d0\u4ea4\u81f3<\u4e1a\u52a1\u94fe>\u201cpostCredenceClient\u201d\u7684\u4ea4\u6613\u6539\u4e3a\u201c\u63d0\u4ea4\u81f3<\u8eab\u4efd\u94fe>\u201cpostClient\u201d @TestMethodOrder ( MethodOrderer . OrderAnnotation . class ) @TestInstance ( TestInstance . Lifecycle . PER_CLASS ) public class Test { // \u8eab\u4efd\u94fe TranPostClient postClient = new TranPostClient ( \"localhost:9081\" ); ChainInfoClient infoClient = new ChainInfoClient ( \"localhost:9081\" ); // \u4e1a\u52a1\u94fe TranPostClient postCredenceClient = new TranPostClient ( \"localhost:9086\" ); ChainInfoClient infoCredenceClient = new ChainInfoClient ( \"localhost:9086\" ); // superAdmin TranCreator superCreator ; Peer . CertId superCertId ; // \u65b0\u7528\u6237usr0 TranCreator usr0_tranCreator_0 ; Peer . CertId usr0_certId_0 ; //\u8d26\u6237\u6743\u9650\u7ba1\u7406\u5408\u7ea6 Peer . ChaincodeId didChaincodeId = Peer . ChaincodeId . newBuilder (). setChaincodeName ( \"RdidOperateAuthorizeTPL\" ). setVersion ( 1 ). build (); Peer . ChaincodeId credenceTPLId = Peer . ChaincodeId . newBuilder (). setChaincodeName ( \"CredenceTPL\" ). setVersion ( 1 ). build (); @BeforeAll void init () { //\u6784\u9020\u7ba1\u7406\u5458\u7684\u79c1\u94a5 PrivateKey super_pri = CertUtil . genX509CertPrivateKey ( new File ( \"jks/test/multi_chain/identity.951002007l78123233.super_admin.jks\" ), \"super_admin\" , \"951002007l78123233.super_admin\" ). getPrivateKey (); superCreator = TranCreator . newBuilder (). setPrivateKey ( super_pri ). setSignAlgorithm ( \"SHA256withECDSA\" ). build (); superCertId = Peer . CertId . newBuilder (). setCreditCode ( \"identity-net:951002007l78123233\" ). setCertName ( \"super_admin\" ). build (); //\u6784\u9020usr0\u7684\u79c1\u94a5 //\u4f7f\u7528KeyStoreExplorer\u5de5\u5177\u6216\u8005\u4f7f\u7528\u4ee3\u7801\u5b9e\u4f8b(https://gitee.com/BTAJL/RCJava-core/blob/master/src/main/java/com/rcjava/util/CertUtil.java)\u5373\u53ef\u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u5bfc\u51fa\u8bc1\u4e66 PrivateKey usr0_pri = CertUtil . genX509CertPrivateKey ( new File ( \"jks/test/did/usr-0_0.jks\" ), \"123\" , \"usr_0_0\" ). getPrivateKey (); usr0_tranCreator_0 = TranCreator . newBuilder (). setPrivateKey ( usr0_pri ). setSignAlgorithm ( \"SHA256withECDSA\" ). build (); usr0_certId_0 = Peer . CertId . newBuilder (). setCreditCode ( \"credence-net:usr-0\" ). setCertName ( \"0\" ). build (); } @Test @DisplayName ( \"super_admin\u5411\u8eab\u4efd\u94fe\u53bb\u6ce8\u518c\u7528\u6237usr-0\uff0c\u8be5\u6b65\u9aa4\u6ce8\u518c\u4e86usr-0\u7684\u8d26\u6237\u4ee5\u53ca\u8bc1\u4e66\" ) @Order ( 1 ) void signUpSignerTest () throws InterruptedException , IOException { // \u8bc1\u4e66pem\u5b57\u7b26\u4e32 String certPem = new String ( Files . readAllBytes ( new File ( \"jks/test/did/usr-0_0.cer\" ). toPath ())); Peer . Certificate cert_proto = Peer . Certificate . newBuilder () // \u65b0\u7528\u6237usr-0\u7684\u8bc1\u4e66 . setCertificate ( certPem ) . setAlgType ( \"sha256withecdsa\" ) . setCertValid ( true ) . setCertType ( Peer . Certificate . CertType . CERT_AUTHENTICATION ) . setId ( Peer . CertId . newBuilder (). setCreditCode ( \"credence-net:usr-0\" ). setCertName ( \"0\" ). build ()) . setCertHash ( DigestUtils . sha256Hex ( certPem . replaceAll ( \"\\r\\n|\\r|\\n|\\\\s\" , \"\" ))) . build (); Peer . Signer usr0_signer = Peer . Signer . newBuilder () . setName ( \"usr-0\" ) // \u65b0\u7528\u6237usr-0\u7684\u8d26\u6237ID . setCreditCode ( \"credence-net:usr-0\" ) // \u65b0\u6ce8\u518c\u7528\u6237 \u4e1a\u52a1\u94fe\u524d\u7f00\uff0ccredence-net:*****.usr-11 . setMobile ( \"18888888888\" ) . addAllAuthenticationCerts ( Collections . singletonList ( cert_proto )) . setSignerValid ( true ) . build (); // super_admin\u5411\u8eab\u4efd\u94fe\u63d0\u4ea4\u4ea4\u6613\uff0c\u6ce8\u518c\u7528\u6237\uff0c\u4ee5\u4fbf\u5728\u4e1a\u52a1\u94fe\u4f7f\u7528 String tranId_1 = UUID . randomUUID (). toString (); Peer . Transaction tran_1 = superCreator . createInvokeTran ( tranId_1 , superCertId , didChaincodeId , signUpSigner , JsonFormat . printer (). print ( usr0_signer ), 0 , \"\" ); postClient . postSignedTran ( tran_1 ); TimeUnit . SECONDS . sleep ( 5 ); Peer . TransactionResult tranResult_1 = infoClient . getTranResultByTranId ( tranId_1 ); Assertions . assertEquals ( 0 , tranResult_1 . getErr (). getCode (), \"\u6ca1\u6709\u9519\u8bef\uff0c\u6ce8\u518c\u6210\u529f\" ); } @Test @DisplayName ( \"super_admin\u6ce8\u518cOperate-\u53ef\u4ee5\u90e8\u7f72\u5408\u7ea6CredenceTPL.deploy\u7684\u64cd\u4f5c\" ) @Order ( 2 ) void signUpOperate () throws InterruptedException , IOException { // super_admin\u6ce8\u518c\u90e8\u7f72\u5408\u7ea6credence-net:CredenceTPL.deploy\u7684\u64cd\u4f5c\uff0c\u5411<\u8eab\u4efd\u94fe>\u63d0\u4ea4 //\u82e5\u4e3a\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1\u7684\u591a\u94fe\u6a21\u578b\uff0c\u5219\u5411<\u4e1a\u52a1\u94fe>\u63d0\u4ea4\uff0c\u5c06\u8be5\u6bb5\u4ee3\u7801\u4e2d\u7684\u8eab\u4efd\u94fe\u524d\u7f00\"identity-net\"\u6539\u4e3a\u4e1a\u52a1\u94fe\u524d\u7f00\u201ccredence-net\u201d //\u5c06\u63d0\u4ea4\u81f3<\u8eab\u4efd\u94fe>\u201cpostClient\u201d\u7684\u4ea4\u6613\u6539\u4e3a\u201c\u63d0\u4ea4\u81f3<\u4e1a\u52a1\u94fe>\u201cpostCredenceClient\u201d long millis_1 = System . currentTimeMillis (); Peer . Operate operate = Peer . Operate . newBuilder () . setOpId ( DigestUtils . sha256Hex ( \"credence-net:CredenceTPL.deploy\" )) . setDescription ( \"\u90e8\u7f72\u5b58\u8bc1\u5408\u7ea6-CredenceTPL\u7684\u6743\u9650\" ) . setRegister ( \"identity-net:951002007l78123233\" ) . setIsPublish ( false ) . setOperateType ( Peer . Operate . OperateType . OPERATE_CONTRACT ) . setAuthFullName ( \"credence-net:CredenceTPL.deploy\" ) . setCreateTime ( Timestamp . newBuilder (). setSeconds ( millis_1 / 1000 ). setNanos (( int ) (( millis_1 % 1000 ) * 1000000 )). build ()) . setOpValid ( true ) . setVersion ( \"1.0\" ) . build (); String tranId_2 = UUID . randomUUID (). toString (); Peer . Transaction tran_2 = superCreator . createInvokeTran ( tranId_2 , superCertId , didChaincodeId , signUpOperate , JsonFormat . printer (). print ( operate ), 0 , \"\" ); postClient . postSignedTran ( tran_2 ); TimeUnit . SECONDS . sleep ( 5 ); Peer . TransactionResult tranResult_2 = infoClient . getTranResultByTranId ( tranId_2 ); Peer . ActionResult actionResult_2 = tranResult_2 . getErr (); Assertions . assertEquals ( 0 , actionResult_2 . getCode (), \"\u6ca1\u6709\u9519\u8bef\uff0c\u64cd\u4f5c\u6ce8\u518c\u6210\u529f\" ); } @Test @DisplayName ( \"super_admin\u6388\u6743\u7ed9credence-net:usr-0\u53ef\u90e8\u7f72CredenceTPL\u7684\u6743\u9650\" ) @Order ( 3 ) void grantOperate () throws InterruptedException , IOException { //super_admin\u6388\u6743\u7ed9usr0\u90e8\u7f72\u5408\u7ea6(\"credence-net:CredenceTPL.deploy\")\u7684\u6743\u9650\uff0c\u5411<\u8eab\u4efd\u94fe>\u63d0\u4ea4 //\u82e5\u4e3a\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1\u7684\u591a\u94fe\u6a21\u578b\uff0c\u5219\u5411<\u4e1a\u52a1\u94fe>\u63d0\u4ea4\uff0c\u5c06\u8be5\u6bb5\u4ee3\u7801\u4e2d\u7684\u8eab\u4efd\u94fe\u524d\u7f00\"identity-net\"\u6539\u4e3a\u4e1a\u52a1\u94fe\u524d\u7f00\u201ccredence-net\u201d //\u5c06\u63d0\u4ea4\u81f3<\u8eab\u4efd\u94fe>\u201cpostClient\u201d\u7684\u4ea4\u6613\u6539\u4e3a\u201c\u63d0\u4ea4\u81f3<\u4e1a\u52a1\u94fe>\u201cpostCredenceClient\u201d long millis = System . currentTimeMillis (); Peer . Authorize authorize_1 = Peer . Authorize . newBuilder () . setId ( \"credence-net:\" + UUID . randomUUID ()) . setGrant ( \"identity-net:951002007l78123233\" ) // \u6388\u6743\u8005\uff0c\u8fd9\u91cc\u662fsuper_admin . addGranted ( \"credence-net:usr-0\" ) // \u88ab\u6388\u6743\u8005 usr-0 //\u6b64\u5904\u5408\u7ea6\u4e3aCredenceTPL\uff0c\u540e\u7eed\u90e8\u7f72\u5176\u4ed6\u5408\u7ea6\u9700\u8981\u4fee\u6539 . addOpId ( DigestUtils . sha256Hex ( \"credence-net:CredenceTPL.deploy\" )) // \u6743\u9650\u8ba9\u6e21\uff0c\u6b64\u5904\u4ee3\u8868usr-0\u53ef\u4ee5\u7ee7\u7eed\u6388\u6743\u7ed9\u522b\u4eba . setIsTransfer ( Peer . Authorize . TransferType . TRANSFER_REPEATEDLY ) . setCreateTime ( Timestamp . newBuilder (). setSeconds ( millis / 1000 ). setNanos (( int ) (( millis % 1000 ) * 1000000 )). build ()) . setAuthorizeValid ( true ) . setVersion ( \"1.0\" ) . build (); String tranId_3 = UUID . randomUUID (). toString (); Peer . Transaction tran_3 = superCreator . createInvokeTran ( tranId_3 , superCertId , didChaincodeId , grantOperate , JSONObject . toJSONString ( Collections . singletonList ( JsonFormat . printer (). print ( authorize_1 ))), 0 , \"\" ); postClient . postSignedTran ( tran_3 ); TimeUnit . SECONDS . sleep ( 5 ); Peer . TransactionResult tranResult_3 = infoClient . getTranResultByTranId ( tranId_3 ); Peer . ActionResult actionResult_3 = tranResult_3 . getErr (); Assertions . assertEquals ( 0 , actionResult_3 . getCode (), \"\u6ca1\u6709\u9519\u8bef\uff0c\u6388\u6743\u6210\u529f\" ); } @Test @DisplayName ( \"usr-0\u5177\u6709\u4e86\u5411\u4e1a\u52a1\u94fe\u90e8\u7f72CredenceTPL\u7684\u6743\u9650\uff0c\u56e0\u6b64\u5411\u4e1a\u52a1\u94fe\u90e8\u7f72\u5408\u7ea6\" ) @Order ( 4 ) void testDeployContract () throws InterruptedException , IOException { // \u5411\u4e1a\u52a1\u94fe\u63d0\u4ea4\uff0c\u90e8\u7f72\u5408\u7ea6 String tplString = FileUtils . readFileToString ( new File ( \"jks/test/tpl/CredenceTPL.scala\" ), StandardCharsets . UTF_8 ); Peer . ChaincodeDeploy chaincodeDeploy = Peer . ChaincodeDeploy . newBuilder () . setTimeout ( 5000 ) . setCodePackage ( tplString ) . setLegalProse ( \"\" ) . setCType ( Peer . ChaincodeDeploy . CodeType . CODE_SCALA ) . setRType ( Peer . ChaincodeDeploy . RunType . RUN_SERIAL ) . setSType ( Peer . ChaincodeDeploy . StateType . STATE_BLOCK ) . setInitParameter ( \"\" ) . setCclassification ( Peer . ChaincodeDeploy . ContractClassification . CONTRACT_CUSTOM ) . build (); DeployTran deployTran = DeployTran . newBuilder () . setTxid ( UUID . randomUUID (). toString ()) . setCertId ( usr0_certId_0 ) . setChaincodeIdScredenceTPLId ) . setChaincodeDeploy ( chaincodeDeploy ) . build (); // \u6b64\u6b65\u9aa4\u4e2dusr0\u90e8\u7f72\u5408\u7ea6\u6210\u529f DeployTran deployTran_1 = deployTran . toBuilder (). setTxid ( UUID . randomUUID (). toString ()). build (); Peer . Transaction signedDeployTran_1 = usr0_tranCreator_0 . createDeployTran ( deployTran_1 ); postCredenceClient . postSignedTran ( signedDeployTran_1 ); TimeUnit . SECONDS . sleep ( 5 ); Peer . TransactionResult tranResult_4 = infoCredenceClient . getTranResultByTranId ( signedDeployTran_1 . getId ()); Peer . ActionResult actionResult_4 = tranResult_4 . getErr (); Assertions . assertEquals ( 0 , actionResult_4 . getCode (), \"\u6ca1\u6709\u9519\u8bef\uff0c\u5408\u7ea6\u90e8\u7f72\u6210\u529f\" ); } @Test @DisplayName ( \"usr-0\uff0c\u4f5c\u4e3a\u5408\u7ea6\u90e8\u7f72\u8005\uff0c\u6ce8\u518c\u5408\u7ea6\u91cc\u7684Operate-\u6ce8\u518c\u5408\u7ea6\u7684\u67d0\u4e2a\u65b9\u6cd5\" ) @Order ( 5 ) void testSignUpOperate_1 () throws InterruptedException , InvalidProtocolBufferException { // usr0\u6ce8\u518c\u5408\u7ea6\u7684\u67d0\u4e2a\u65b9\u6cd5\u7684Operate\u6210\u529f\uff0c\u5411\u8eab\u4efd\u94fe\u63d0\u4ea4 //\u82e5\u4e3a\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1\u7684\u591a\u94fe\u6a21\u578b\uff0c\u5219\u5411<\u4e1a\u52a1\u94fe>\u63d0\u4ea4\uff0c\u5c06\u8be5\u6bb5\u4ee3\u7801\u4e2d\u7684\u8eab\u4efd\u94fe\u524d\u7f00\"identity-net\"\u6539\u4e3a\u4e1a\u52a1\u94fe\u524d\u7f00\u201ccredence-net\u201d //\u5c06\u63d0\u4ea4\u81f3<\u8eab\u4efd\u94fe>\u201cpostClient\u201d\u7684\u4ea4\u6613\u6539\u4e3a\u201c\u63d0\u4ea4\u81f3<\u4e1a\u52a1\u94fe>\u201cpostCredenceClient\u201d long millis = System . currentTimeMillis (); Peer . Operate operate = Peer . Operate . newBuilder () // \u5408\u7ea6\u7684\u67d0\u4e2a\u65b9\u6cd5 . setOpId ( DigestUtils . sha256Hex ( \"credence-net:CredenceTPL.creProof3\" )) // \u63cf\u8ff0\u968f\u610f . setDescription ( \"CredenceTPL.creProof3\" ) . setRegister ( \"credence-net:usr-0\" ) // setIsPublish\u8bbe\u7f6e\u65b9\u6cd5\u662f\u5426\u516c\u5f00\uff0c\u6bd4\u5982\u65b0\u6ce8\u518c\u4e86\u4e00\u4e2a\u7528\u6237usr-1\uff0c\u5982\u679c\u662ffalse\u7684\u8bdd\uff0cusr-1\u9700\u8981\u88ab\u6388\u6743\u624d\u80fd\u8c03\u7528creProof3 // \u5982\u679c\u8bbe\u7f6etrue\uff0c\u65b0\u6ce8\u518c\u7684\u4efb\u4f55\u7528\u6237\uff0c\u90fd\u53ef\u4ee5\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5 //\u4e5f\u5373\uff0cfalse\u5219\u522b\u7684\u7528\u6237\u9700\u8981\u5f97\u5230\u6388\u6743\u624d\u53ef\u4ee5\u8c03\u7528\uff0ctrue\u5219\u8868\u793a\u516c\u5f00\uff0c\u4efb\u4f55\u4eba(\u6ce8\u518c\u7528\u6237)\u90fd\u53ef\u4ee5\u8c03\u7528 . setIsPublish ( true ) . setOperateType ( Peer . Operate . OperateType . OPERATE_CONTRACT ) . setAuthFullName ( \"credence-net:CredenceTPL.creProof3\" ) // \u5047\u8bbeCredenceTPL \u6709\u591a\u4e2a\u7248\u672c . setCreateTime ( Timestamp . newBuilder (). setSeconds ( millis / 1000 ). setNanos (( int ) (( millis % 1000 ) * 1000000 )). build ()) . setOpValid ( true ) . setVersion ( \"1.0\" ) . build (); String tranId = UUID . randomUUID (). toString (); Peer . Transaction tran = usr0_tranCreator_0 . createInvokeTran ( tranId , usr0_certId_0 , didChaincodeId , signUpOperate , JsonFormat . printer (). print ( operate ), 0 , \"\" ); // \u5411\u8eab\u4efd\u94fe\u63d0\u4ea4 postClient . postSignedTran ( tran ); TimeUnit . SECONDS . sleep ( 5 ); Peer . TransactionResult tranResult = infoClient . getTranResultByTranId ( tranId ); Peer . ActionResult actionResult = tranResult . getErr (); Assertions . assertEquals ( 0 , actionResult . getCode (), \"\u6ca1\u6709\u9519\u8bef\uff0c\u64cd\u4f5c\u6ce8\u518c\u6210\u529f\" ); } @Test @DisplayName ( \"\u8c03\u7528\u4e1a\u52a1\u94fe\u4e2d\u521a\u90e8\u7f72\u7684\u5408\u7ea6\uff0c\u5b58\u8bc1\u6570\u636e\" ) @Order ( 6 ) void testCredenceProof () throws InterruptedException { // usr0\u63d0\u4ea4\u5b58\u8bc1\u4ea4\u6613\uff0c\u5411\u4e1a\u52a1\u94fe\u63d0\u4ea4 String tranId = UUID . randomUUID (). toString (); Peer . Transaction tran = usr0_tranCreator_0 . createInvokeTran ( tranId , usr0_certId_0 , credenceTPLId , \"creProof3\" , String . format ( \"{\\\"uuid\\\" : \\\"%s\\\",\\\"data\\\" : \\\"{\\\\\\\"data1\\\\\\\": \\\\\\\"xyb002\\\\\\\",\\\\\\\"data2\\\\\\\": \\\\\\\"xyb003\\\\\\\"}\\\"}\" , tranId ), 0 , \"\" ); String tranHex = Hex . encodeHexString ( tran . toByteArray ()); postCredenceClient . postSignedTran ( tranHex ); TimeUnit . SECONDS . sleep ( 5 ); Peer . TransactionResult tranResult = infoCredenceClient . getTranResultByTranId ( tranId ); Peer . ActionResult actionResult = tranResult . getErr (); Assertions . assertEquals ( 0 , actionResult . getCode (), \"\u5b58\u8bc1\u6210\u529f\" ); } } \u4f7f\u7528 KeyStoreExplorer \uff08\u6216\u8005\u4f7f\u7528 \u4ee3\u7801 \uff09\u5373\u53ef\u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u5bfc\u51fa\u8bc1\u4e66","title":"RCJava-core"},{"location":"RepChain-2.0/#_22","text":"\u5728RepChain2.0.0\u4e4b\u524d\uff0c\u57fa\u4e8eTLS1.2\u7ec4\u7f51\u7684RepChain\u7684\u5404\u4e2a\u8282\u70b9\u9ed8\u8ba4\u4f7f\u7528 mytruststore.jks \u6765\u4fdd\u5b58\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\uff08\u5305\u542b\u53c2\u4e0e\u7ec4\u7f51\u7684\u6240\u6709\u8282\u70b9\u8bc1\u4e66\uff09\uff0c\u5982\u679c\u60f3\u8981\u52a0\u5165\u65b0\u7684\u7ec4\u7f51\u8282\u70b9\uff0c\u6709\u4e24\u79cd\u65b9\u6848\uff1a \u65b9\u6848\u4e00\uff1a\u5c06\u7f51\u7edc\u91cc\u73b0\u6709\u7684\u6240\u6709\u8282\u70b9\u7684 mytruststore.jks \u90fd\u66f4\u65b0\uff08\u5c06\u65b0\u7684\u8282\u70b9\u7684\u8bc1\u4e66\u5230\u5982\u5230\u8be5\u5b58\u50a8\u5e93\uff09\uff0c\u7136\u540e\u91cd\u542f\u6240\u6709\u8282\u70b9 \u65b9\u6848\u4e8c\uff1a\u5728 mytruststore.jks \u4e2d\u9884\u7f6e\u591a\u4e00\u4e9b\u8282\u70b9\u8bc1\u4e66\uff0c\u8fd9\u6837\u65e0\u9700\u91cd\u542f\u7f51\u7edc\uff0c\u4f46\u662f\u4e5f\u65e0\u6cd5\u9884\u4f30\u9884\u7f6e\u591a\u5c11\u5408\u9002 \u4ece\u4e0a\u9762\u4e24\u4e2a\u65b9\u6848\u53ef\u4ee5\u770b\u51fa\uff0c\u65b9\u5f0f\u4e8c\u6bd4\u65b9\u5f0f\u4e00\u7a0d\u5fae\u597d\u4e00\u4e9b\uff0c\u4f46\u662f\u4e5f\u4e0d\u662f\u4e00\u52b3\u6c38\u9038 RepChain2.0.0\u5b9e\u73b0\u4e86\u901a\u8fc7\u5408\u7ea6\u6765\u7ba1\u7406\u7ec4\u7f51\u8282\u70b9\u7684\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\uff0c\u8c03\u7528\u5408\u7ea6\u5bf9\u5b58\u653e\u5728\u94fe\u4e0a\u7684\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\u66f4\u65b0\u65f6\uff0c\u4f1a\u89e6\u53d1RepChain\u91cd\u6784TrustKeyStore\uff08\u4f9d\u636e\u94fe\u4e0a\u7684\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\uff09\uff0c\u5408\u7ea6\u53ef\u4ee5\u5b9e\u73b0\u65b0\u589e\u6216\u5220\u9664\u8282\u70b9\u8bc1\u4e66\uff1a \u5bf9\u94fe\u4e0a\u7684\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\u589e\u52a0\u65b0\u7684\u8282\u70b9\u8bc1\u4e66\uff0c\u4e4b\u540e\u52a0\u5165\u65b0\u7684\u8282\u70b9\u5230\u73b0\u6709\u7f51\u7edc\u65f6\uff0c\u7f51\u7edc\u91cc\u7684\u6240\u6709\u8282\u70b9\u4f1a\u91cd\u6784TrustKeyStore\uff0c\u65b0\u7684\u8282\u70b9\u5c31\u53ef\u4ee5\u6210\u529f\u7684\u4e0e\u5176\u4ed6\u8282\u70b9\u5efa\u7acbTLS\u8fde\u63a5 \u6d4b\u8bd5\u7528\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/multi_chain/ManageNodeCertTest.java#L128 \u5bf9\u94fe\u4e0a\u7684\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\u5220\u9664\u67d0\u4e2a\u8282\u70b9\u8bc1\u4e66\uff0c\u7f51\u7edc\u91cc\u7684\u6240\u6709\u8282\u70b9\u4f1a\u91cd\u6784TrustKeyStore\uff0c\u5e76\u5c06\u76f8\u5e94\u7684\u8282\u70b9down\u6389 \u6d4b\u8bd5\u7528\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/multi_chain/ManageNodeCertTest.java#L148 \u4ece\u4e0a\u9762\u65b9\u6848\u53ef\u4ee5\u771f\u6b63\u7684\u5b9e\u73b0\u52a8\u6001\u7ba1\u7406\u7ec4\u7f51\u8282\u70b9\u4fe1\u4efb\u8bc1\u4e66\u5217\u8868\uff0c\u4ee5\u53ca\u52a8\u6001\u7ba1\u7406\u7ec4\u7f51\u8282\u70b9","title":"\u52a8\u6001\u7ba1\u7406\u7ec4\u7f51\u8282\u70b9"},{"location":"RepChain-2.0/#_23","text":"RepChain2.0.0\u4e4b\u524d\uff0c\u57fa\u4e8e\u914d\u7f6e\u91cc\u7684\u62bd\u7b7e\u5217\u8868\u8fdb\u884c\u62bd\u7b7e\u9009\u62e9\u51fa\u5757\u4eba\uff0c\u5982\u679c\u60f3\u8981\u4fee\u6539\u62bd\u7b7e\u5217\u8868\uff08\u5171\u8bc6\u8282\u70b9\u5217\u8868\uff09\uff0c\u9700\u8981\u4fee\u6539\u6240\u6709\u8282\u70b9\u7684\u914d\u7f6e\uff0c\u5e76\u91cd\u542f\u6574\u4e2a\u7f51\u7edc RepChain2.0.0\u5b9e\u73b0\u4e86\u901a\u8fc7\u5408\u7ea6\u7ba1\u7406RepChain\u7684\u5171\u8bc6\u62bd\u7b7e\u5217\u8868\uff0c\u65e0\u9700\u518d\u4fee\u6539\u914d\u7f6e\u5e76\u91cd\u542f\u6574\u4e2a\u7f51\u7edc\u4e86\u3002 \u6d4b\u8bd5\u7528\u4f8b\uff1a https://gitee.com/BTAJL/RCJava-core/blob/master/src/test/java/com/rcjava/multi_chain/ManageNodeCertTest.java#L149","title":"\u52a8\u6001\u7ba1\u7406\u5171\u8bc6\u5217\u8868"},{"location":"RepChain-2.0/#repchain","text":"","title":"RepChain\u542f\u52a8\u65b9\u5f0f"},{"location":"RepChain-2.0/#_24","text":"java - cp RepChain . jar rep . app . Repchain \"***.nodex\"","title":"\u5355\u673a\u591a\u8282\u70b9"},{"location":"RepChain-2.0/#_25","text":"// \u53ef\u4ee5\u8bbe\u7f6e\u591a\u53c2\u6570\uff0c\u5206\u522b\u4e3a\u8282\u70b9\u540d java - cp RepChain . jar rep . app . Repchain_Single \"***.nodex\"","title":"\u5355\u673a\u5355\u8282\u70b9"},{"location":"RepChain-2.0/#_26","text":"// \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u7ba1\u7406\u670d\u52a1\u7684\u7aef\u53e3\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u662f\u5426\u5f00\u542fssl\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u4e3a\u662f\u5426\u5f00\u542fssl\u53cc\u5411\u8ba4\u8bc1\uff0c\u4e4b\u540e\u7684\u53c2\u6570\u90fd\u4e3a\u8282\u70b9\u540d java - cp RepChain . jar rep . app . RepChain_Management 8080 0 false \"***.node1\"","title":"\u8282\u70b9\u7ba1\u7406\u670d\u52a1"},{"location":"RepChain-2.0/#qa","text":"\u5224\u65ad\u4ea4\u6613\u662f\u5426\u4e0a\u94fe \u67e5\u8be2\u4ea4\u6613\u5728\u533a\u5757\u4e2d\u7684\u6267\u884c\u7ed3\u679c\uff0c\u5373TransactionResult","title":"Q&amp;A"},{"location":"deploy/","text":"RepChain\u90e8\u7f72 \u2014\u2014\u5355\u94fe\u6a21\u5f0f \u5355\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u540c\u65f6\u8d1f\u8d23\u4e1a\u52a1 1.\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\u7684levelDB 2.\u8981\u6784\u5efa\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo \uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09 RepChain\u6240\u652f\u6301\u7684\u7f51\u7edc\u73af\u5883 \u652f\u6301\u5c40\u57df\u7f51\u3001\u4e13\u7f51\u3001\u516c\u7f51\u90e8\u7f72\uff0c NAT \u6216 docker \u73af\u5883 RepChain\u6240\u652f\u6301\u7684\u8f6f\u786c\u4ef6\u73af\u5883 \u786c\u4ef6\u73af\u5883\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\u3001RISK-V\uff1b\u8f6f\u4ef6\u73af\u5883\uff1a\u865a\u62df\u673a\u3001Docker \u90e8\u7f72\u548c\u8fd0\u884cRepChain\u8282\u70b9\u7684\u65b9\u5f0f \u4f7f\u7528 jar \u5305\u90e8\u7f72\uff0c\u8fd0\u884c\u5728JVM\u4e0a\uff08jdk11+\uff0c\u63a8\u8350jdk13+\uff09\uff0c\u57fa\u4e8eJAVA\u7684\u8de8\u5e73\u53f0\u90e8\u7f72\uff0cRepChain\u652f\u6301\u90e8\u7f72\u5728\u7edd\u5927\u90e8\u5206\u7684Windows\u3001Linux\u4e0eMacOS\u7cfb\u7edf\u4e0a RepChain\u7684\u5355\u94fe\u90e8\u7f72\u6a21\u5f0f \u53ef\u4ee5\u5206\u4e3a\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u3001\u8282\u70b9\u7ba1\u7406\u670d\u52a1 1. \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 \u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u8fd0\u884c\u5728\u540c\u4e00\u5bbf\u4e3b\u673a\u4e0a\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u7f16\u5199\u597d\u7684\u5408\u7ea6 2. \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 \u53ef\u4ee5\u7406\u89e3\u4e3a\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u5404\u4e2a\u8282\u70b9\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u5bbf\u4e3b\u673a\u4e0a 3. \u8282\u70b9\u7ba1\u7406\u670d\u52a1 \u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u53ef\u4ee5\u5728\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u4e5f\u53ef\u4ee5\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b \u7f16\u8bd1\u6253\u5305 \u73af\u5883\u9700\u6c42\uff1a 1.\u786c\u4ef6\u7684\u63a8\u8350\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G\uff0cDisk\uff1a100G \u6240\u8ff0\u914d\u7f6e\u662f\u63a8\u8350\u7684 \u57fa\u7840\u8fd0\u884c\u73af\u5883 \u7684\u786c\u4ef6\u914d\u7f6e\uff0c\u6253\u5305\u7f16\u8bd1\u73af\u5883\u7684\u914d\u7f6e\u53ef\u964d\u4f4e\uff08\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u964d\u4f4e\u6216\u63d0\u5347\u914d\u7f6e\uff09 2.Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350 Azul-zuluJdk \uff0c\u4e5f\u53ef\u4f7f\u7528 Oracle-Jdk 3.\u64cd\u4f5c\u7cfb\u7edf\uff1a\u53ef\u4ee5\u5b89\u88c5Jdk-13\u7684\u7cfb\u7edf 4.\u652f\u6301\u67b6\u6784\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\uff0c\u76ee\u524d\u4e5f\u652f\u6301\uff1aRISC-V\uff1b\u5982\u679c\u662fArm-64\u67b6\u6784\uff0c\u5219\u9700\u8981\u66ff\u6362RepChain\u4ee3\u7801\u9ed8\u8ba4\u6240\u4f9d\u8d56\u7684leveldbjni\u7684\u5305\uff0c\u66ff\u6362\u65b9\u5f0f\u53c2\u89c1\u540e\u7eed\u7684\u4ecb\u7ecd 5. Git \uff1a\u7528\u6765\u4e0b\u8f7dRepChain\u7684\u6e90\u7801\uff08\u975e\u5fc5\u987b\uff0c\u53ef\u76f4\u63a5\u4e0b\u8f7d \u538b\u7f29\u5305 \uff09 6.\u7f16\u8bd1\u5de5\u5177\uff1a Sbt \uff0c\u5b89\u88c5\u65b9\u5f0f\u89c1 \u5b98\u65b9\u6559\u7a0b \uff1b \u6216 \u5b89\u88c5\u4e86 Scala \u63d2\u4ef6\u7684 IDEA \uff0c\u63d2\u4ef6\u5b89\u88c5\u65b9\u5f0f\u89c1 \u5b98\u65b9\u6559\u7a0b \u4e0b\u8f7d\u6e90\u7801\uff1a 1.\u5982\u679c\u6709\u5b89\u88c5Git\uff0c\u4e14\u4e3aGit\u914d\u7f6e\u4e86\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\uff0c\u5219\u4f7f\u7528GitBash\u6216\u8005\u7cfb\u7edf\u81ea\u5e26Terminal\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a git clone https://gitee.com/BTAJL/repchain.git cd repchain git fetch git checkout -b dev_jdk13_2.0.0.0 RepChain_2.0.0_RC \u5982\u4e0d\u4f7f\u7528git\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d \u538b\u7f29\u5305 \uff0c\u5e76\u89e3\u538b\u4e3arepchain 2.\u627e\u5230repchain\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\uff0c\u4fee\u6539build.sbt\u4e2d\u7684 mainClass \uff08Jar\u5305\u4e3b\u7c7b\uff09\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.Repchain \uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.Repchain_Single \uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u8282\u70b9\u7ba1\u7406\u670d\u52a1 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.RepChain_Management \uff0c\u5982\u4e0b\u6240\u793a\uff1a # \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.Repchain\" ) # \u6216 # \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.Repchain_Single\" ) # \u6216 # \u8282\u70b9\u7ba1\u7406\u670d\u52a1 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.RepChain_Management\" ) RepChain\u9ed8\u8ba4\u4f7f\u7528\u7684 leveldbjni \u5305\u4e0d\u652f\u6301Arm-64\uff0c\u56e0\u6b64\u5982\u679c\u8981\u5c06RepChain\u90e8\u7f72\u5728Arm-64\u67b6\u6784\u7684\u670d\u52a1\u5668\uff0c\u9700\u8981\u5c06\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\u4e2d\u914d\u7f6e\u7684 leveldb-jni \u4f9d\u8d56\u5305\u66ff\u6362\uff08\u53ef\u4ee5\u81ea\u5df1\u6839\u636e leveldb-jni \u7684\u8bf4\u660e\u6587\u6863\u81ea\u884c\u7f16\u8bd1\uff09\uff0c\u5982\u4e0b\u6240\u793a\uff1a # \u5c06 libraryDependencies += \"org.fusesource.leveldbjni\" % \"leveldbjni-all\" % \"1.8\" # \u66ff\u6362\u4e3a libraryDependencies += \"com.github.huangtianhua\" % \"leveldbjni-linux64-aarch64\" % \"1.9\" # \u6216 libraryDependencies += \"org.openlabtesting.leveldbjni\" % \"leveldbjni-linux64-aarch64\" % \"1.8\" 3.\u7f16\u8bd1\u5e76\u6253\u5305 \u6709\u4e24\u79cd\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u5728IDEA\u4e2d\u4f7f\u7528 sbt-shell \uff08\u5b89\u88c5\u4e86Scala\u63d2\u4ef6\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u53e6\u4e00\u79cd\u662f\u5728\u7ec8\u7aef\u4f7f\u7528 sbt-repl \uff08\u5b89\u88c5\u4e86Sbt\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u8be6\u7ec6\u8bf4\u660e\u8fc7\u7a0b\u53ef\u53c2\u8003\u540e\u9762\u7684\u6253\u5305\u6f14\u793a\uff1a \u5728IDEA\u4e2d\u6253\u5f00 sbt shell \u5e76\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1aclean->compile->assembly\uff0c\u5982\u4e0b\u6240\u793a\uff1a sbt:RepChain> clean sbt:RepChain> compile sbt:RepChain> assembly \u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528 sbt-repl \uff0c\u8f93\u5165 sbt \u547d\u4ee4\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a > clean > compile > assembly 4.\u6253\u5305\u597d\u7684RepChain.jar\u5b58\u653e\u5728 repchain/target/scala-2.12/RepChain.jar \uff0c\u5c06Jar\u5305\u79fb\u52a8\u5230\u9879\u76ee\u6839\u76ee\u5f55\u4e0b \u6253\u5305\u8fc7\u7a0b\u6f14\u793a\uff1a 1.\u4f7f\u7528IDEA\u4e2d\u7684 sbt-shell 2.\u4f7f\u7528\u7ec8\u7aef\uff08Terminal or cmd\uff09\uff0c\u4e0b\u9762\u4ee5mac\u4e0b\u7684\u7ec8\u7aef\u4e3a\u4f8b\uff08Windows\u6216Linux\u7c7b\u4f3c\uff09 \u90e8\u7f72 \u5728\u4e0a\u4e00\u5c0f\u8282\u4e2d\uff0c\u4e3b\u8981\u53d9\u8ff0\u4e86\u5982\u4f55\u5bf9RepChain\u7684\u6e90\u7801\u8fdb\u884c\u4e86\u7f16\u8bd1\u5e76\u6253\u5305\u5f97\u5230RepChain.jar\uff0c\u63a5\u4e0b\u6765\u4f7f\u7528RepChain.jar\u6765\u90e8\u7f72RepChain\u7f51\u7edc\uff0cRepChain\u7684\u90e8\u7f72\u6709\u4e09\u79cd\u65b9\u5f0f\uff1a\u4e00\u662f\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\uff1b\u4e8c\u662f\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff1b\u4e09\u662f\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u3002\u63a5\u4e0b\u6765\u5206\u522b\u505a\u8be6\u7ec6\u4ecb\u7ecd \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 \u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe 5 \u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a85\u4e2a\u8282\u70b9\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.Repchain \u73af\u5883\u9700\u6c42\uff1a \u786c\u4ef6\u7684\u57fa\u7840\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350 Azul-zuluJdk \uff0c\u4e5f\u53ef\u4f7f\u7528 Oracle-Jdk \u914d\u7f6e\u6587\u4ef6 \u4ee5node1\u4e3a\u4f8b\uff08node2-node5\u7c7b\u4f3c\uff09\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3a repchain/conf/121000005l35120456.node1/system.conf system.conf \u4e2d\u9700\u8981\u6ce8\u610f\u7684\u914d\u7f6e\u9879 1. system.httpServicePort= 9081 \uff0cRepChain\u7684http\u670d\u52a1\u7684\u7aef\u53e3 2. system.contractOperationMode = 1 \uff0c\u4ee5 jar \u5305\u6a21\u5f0f\u8fd0\u884cRepChain\uff0c\u8be5\u914d\u7f6e\u9879\u987b\u6539\u4e3a1 3. system.trans_create_type=0 \uff0c\u63a5\u53d7\u4eceAPI\u63d0\u4ea4\u8fc7\u6765\u7684\u4ea4\u6613\uff08\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u4ee3\u8868\u7684\u662f\u8282\u70b9\u81ea\u52a8\u4ea7\u751f\u5e76\u63d0\u4ea4\u4ea4\u6613\uff0c\u4e3b\u8981\u662f\u7528\u6765\u6d4b\u8bd5\u7528\uff09 4. sytetem.storage.dbpath \uff0cleveldb\u5b58\u50a8\u4f4d\u7f6e 5. sytetem.storage.blockpath \uff0cblock\u7684\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e \u542f\u52a8\u65b9\u5f0f\u4e3a\u5728\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a # \u5148\u524d\u5728\u6253\u5305\u73af\u8282\u5df2\u7ecf\u6307\u5b9a\u4e86\u4e3b\u7c7b java -jar RepChain.jar \u6216 # \u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.Repchain \u542f\u52a8\u6210\u529f\u6807\u5fd7\u6709\u4e24\u79cd\u9a8c\u8bc1\u65b9\u5f0f \u901a\u8fc7API\u63a5\u53e3\u6765\u9a8c\u8bc1\u3002\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:9081/chaininfo/node \uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a\u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf\uff0c\u5219\u8868\u793a\u6210\u529f\uff1b\u6216\u8005\u662f\u5728\u7ec8\u7aef\u4e2d\u8f93\u5165 curl http://localhost:9081/chaininfo/node \uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a \u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf \uff0c\u5219\u8868\u793a\u6210\u529f \u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:9081/web/g1.html \uff0c\u5982\u679c\u51fa\u73b0\u5982\u4e0b\u754c\u9762\uff0c\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u7ea2\u6846\u4e2d\u53ef\u4ee5\u770b\u5230\u5165\u7f51\u7684\u8282\u70b9\uff0c\u5219\u6807\u8bc6\u6210\u529f \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0\uff1a \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650 \u5176\u4ed6\uff1a\u5982\u679c\u60f3\u8981\u5728\u540c\u4e00\u4e2aJVM\u4e0a\u6a21\u62df\u542f\u52a8\u5927\u4e8e5\u4e2a\u8282\u70b9\uff0c\u5373\u5355\u673a\u6a21\u62df6~N\u8282\u70b9\uff0c\u5728\u4e3b\u7c7b rep.app.RepChain \u4e2d\u589e\u52a0\u8282\u70b9\u5b9e\u4f8b \u51c6\u5907\u5de5\u4f5c 1. jks/identity-net \u76ee\u5f55\u4e0b\u76f8\u5e94\u7684\u8282\u70b9\u5bc6\u94a5\u5bf9\u4e0e\u8bc1\u4e66\u5e94\u662f6~N\u4e2a\uff0c\u4eff\u7167\u539f\u6709jks\u6587\u4ef6\u653e\u7f6e\u65b0\u751f\u6210\u7684jks\u6587\u4ef6\u5373\u53ef\uff0c\u53ef\u4f7f\u7528 Kse \u6216\u8005 \u4ee3\u7801 \u6765\u751f\u6210\u8282\u70b9\u5bc6\u94a5\u5bf9\u548c\u81ea\u7b7e\u540d\u8bc1\u4e66\uff0c\u5e76\u5c06\u8bc1\u4e66\u5bfc\u5165mytruststore.jks\u4e2d\uff0c\u6ce8\u610fJks\u6587\u4ef6\u540d\uff0c\u4ee5\u53ca\u5176\u4e2d\u5b58\u50a8\u7684\u5bc6\u94a5\u5bf9\u6216\u8005\u8bc1\u4e66\u7684\u522b\u540d\uff0c ***.nodex \uff0c\u4e0b\u56fe\u662fKse\u7684\u7b80\u5355\u4f7f\u7528\u793a\u4f8b \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u8eab\u4efd\u94fe\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5982\u4e0b\u56fe\uff1a 2.conf\u76ee\u5f55\u4e0b\u4e3a\u8282\u70b9\u914d\u7f6e\u6587\u4ef6\uff0c\u65b0\u589e\u8282\u70b9node6-nodeN\u4eff\u7167node1-node5\u8fdb\u884c\u914d\u7f6e\uff0c\u9700\u8981\u989d\u5916\u6ce8\u610f\u4ee5\u4e0b\u914d\u7f6e\u9879\uff1a 1. chain_cert_name = \"identity-net:951002007l78123233.super_admin\" \uff0c\u5355\u94fe\u6a21\u5f0f\u4e0b\u8bbe\u7f6e\u4ee5 identity-net \u8eab\u4efd\u94fe\u6807\u8bc6\u7684\u7ba1\u7406\u5458super_admin 2. chain_network_id = \"identity-net\" \uff0c\u7ec4\u7f51id\uff0c\u5355\u94fe\u6a21\u5f0f\u4e0b\u8bbe\u7f6e\u4e3a identity-net \uff0c\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26 3. basic_chain_id = \"identity-net\" \uff0c\u5404\u79cd\u6a21\u5f0f\u4e0b\u5747\u8bbe\u7f6e\u4e3a identity-net 3.\u4eff\u7167node1-node5\u5728\u4e3b\u7c7b rep.app.RepChain \u4e2d\u589e\u52a0node6-nodeN\u8282\u70b9\u5b9e\u4f8b 4.\u7f16\u8bd1\u6253\u5305\u4ee5\u53ca\u90e8\u7f72\u7684\u5176\u4ed6\u5185\u5bb9\u4e0e\u524d\u8ff0\u4e00\u81f4 \u542f\u52a8\u65b9\u5f0f \u8bf7\u67e5\u770b\u6e90\u7801 src/main/scala/rep/app/RepChain.scala java -cp RepChain.jar rep.app.RepChain jar\u5305\u90e8\u7f72\u540e\uff08\u5355\u673a5\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c6~N\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66 \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u4e0e\u5355\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u533a\u522b\u5728\u4e8e\u591a\u673a\u591a\u8282\u70b9\u662f\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u540c\u4e00\u4e2a Jvm \u4e0a\u542f\u52a81\u4e2a\u8282\u70b9\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.Repchain_Single \u7f51\u7edc\u90e8\u7f72 \u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4 \u542f\u52a8\u65b9\u5f0f\u4ee5node1\u3001node2\u7684\u4e3a\u4f8b \u5728node1\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a java -jar RepChain.jar \"121000005l35120456.node1\" # \u6216\u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.Repchain_Single \"121000005l35120456.node1\" \u5728node2\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a java -jar RepChain.jar \"12110107bi45jh675g.node2\" # \u6216\u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.Repchain_Single \"12110107bi45jh675g.node2\" ip\u4e0eport\u7684\u914d\u7f6e \u975e NAT \u6216\u975e docker \u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51ip ca n o n ical.por t = 8082 # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9<seed-nodes>\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 hostname \u4e0e port \uff09 \u6ce8 \uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879<seed-nodes>\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879<seed-nodes>\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3 NAT \u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"139.10.1.3\" # \u5916\u90e8\u5730\u5740 ca n o n ical.por t = 8082 # \u5916\u90e8\u7aef\u53e3 bi n d.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51\u5730\u5740 bi n d.por t = 8082 # \u5c40\u57df\u7f51\u7aef\u53e3 } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u7f51\u7edc\u4e2d\u7684 3 \u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e86 1 \u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 \u5185\u90e8\u6216\u5916\u90e8 \u7684 hostname \u4e0e port \uff09 jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5 node1 \u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4 \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5 \u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3 \u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25 \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0 \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650 \u8282\u70b9\u7ba1\u7406\u670d\u52a1 \u8282\u70b9\u7ba1\u7406\u670d\u52a1\u4e0e\u5355\u673a\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a85\u4e2a\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u6ee1\u8db3\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u5373\u53ef\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.RepChain_Management \u7f51\u7edc\u90e8\u7f72 \u5355\u94fe\u6a21\u5f0f\u4e0b\u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe 5 \u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a85\u4e2a\u8282\u70b9 \u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4 \u542f\u52a8\u65b9\u5f0f \u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u5047\u8bbe\u5728\u4e00\u4e2a\u670d\u52a1\u5668\u4e0a\u6709node1-node5\uff0c\u5728\u5176\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a java -jar RepChain.jar \"121000005l35120456.node1\" \"12110107bi45jh675g.node2\" \"122000002n00123567.node3\" \"921000005k36123789.node4\" \"921000006e0012v696.node5\" ip\u4e0eport\u7684\u914d\u7f6e \u975e NAT \u6216\u975e docker \u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51ip ca n o n ical.por t = 8082 # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9<seed-nodes>\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 hostname \u4e0e port \uff09 \u6ce8 \uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879<seed-nodes>\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879<seed-nodes>\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3 NAT \u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"139.10.1.3\" # \u5916\u90e8\u5730\u5740 ca n o n ical.por t = 8082 # \u5916\u90e8\u7aef\u53e3 bi n d.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51\u5730\u5740 bi n d.por t = 8082 # \u5c40\u57df\u7f51\u7aef\u53e3 } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u7f51\u7edc\u4e2d\u7684 3 \u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e86 1 \u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 \u5185\u90e8\u6216\u5916\u90e8 \u7684 hostname \u4e0e port \uff09 jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5 node1 \u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4 \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5 \u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3 \u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25 \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0 \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650 \u9644\u5f55 \u521b\u4e16\u5757\u7684\u6784\u5efa \u8981\u6784\u5efa\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo \uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09 \u8282\u70b9\u5bc6\u94a5\u66ff\u6362 \u9ed8\u8ba4\u4e3a5\u8282\u70b9\uff0c\u6bcf\u4e2a\u8282\u70b9\u6709\u4e00\u4e2a\u5bc6\u94a5\u5bf9\uff0c \u5b9e\u9645 \u5728\u751f\u4ea7\u73af\u5883\u90e8\u7f72RepChain\u9700\u8981\u66f4\u6362\u5f00\u6e90\u4ed3\u5e93\u4e2d\u7684\u5bc6\u94a5\uff0c\u4f7f\u7528 KeyStoreExplorer \uff08\u6216\u8005\u4f7f\u7528 \u4ee3\u7801 \uff09\u5373\u53ef\u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u5bfc\u51fa\u8bc1\u4e66 \u4e3a\u6bcf\u4e2a\u8282\u70b9\u66ff\u6362\u5bc6\u94a5\uff0c\u5047\u8bbe\u67095\u4e2a\u8282\u70b9\uff0c\u5219\u4f7f\u7528 kse \u751f\u62105\u4e2a\u5305\u542b\u5bc6\u94a5\u5bf9\uff08\u9ed8\u8ba4\u4f7f\u7528 secp256r1 \uff09\u7684 jks \u5e76\u5bfc\u51fa\u8bc1\u4e66\uff0c\u66f4\u6362 jks/identity-net \u76ee\u5f55\u4e0b\u7684\u5bc6\u94a5\u4e0e\u8bc1\u4e66 \u4f7f\u7528 kse \u5c06\u5404\u4e2a\u8282\u70b9\u7684\u8bc1\u4e66\u5bfc\u5165\u5230 mytrustStore.jks \u4e2d \u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo \uff0c\u91cd\u65b0\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09 \u65b0\u589e\u8282\u70b9 \u65b0\u589e\u8282\u70b9\u9700\u8981\u505c\u673a\u5e76\u91cd\u542f\u7f51\u7edc \u5047\u8bbe\u73b0\u5728\u60f3\u589e\u52a0\u7ec4\u7f51\u8282\u70b9\uff0c\u5219\u9700\u8981\u751f\u6210\u65b0\u7684 jks \uff0c\u5e76\u653e\u5230 jks/identity \u76ee\u5f55\u4e0b\uff0c\u5e76\u4e14\u5c06\u8bc1\u4e66\u5bfc\u5165\u5230 mytrustStore.jks \u4e2d\uff0c\u6240\u6709\u8282\u70b9\u7684 mystruststore.jks \u90fd\u9700\u8981\u66f4\u65b0\uff1b\u8fd8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:7081/swagger/index.html \uff0c\u901a\u8fc7\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u7684API\u542f\u52a8\u505c\u6b62\u8282\u70b9\uff08\u9ed8\u8ba4http\u670d\u52a1\u7684\u7aef\u53e3\u53f7\u4e3a7081\uff09\u3002 \u589e\u52a0\u7684\u662f\u5171\u8bc6\u8282\u70b9 \u9700\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u5c06\u8be5\u8282\u70b9\u914d\u7f6e\u5230\u5171\u8bc6\u5217\u8868\u4e2d\uff0c\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u9700\u8981 \u4fee\u6539\u914d\u7f6e\u9879 \uff1a system.vote.vote_node_list \uff08\u914d\u7f6e\u9879\u5728conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\uff09 \u589e\u52a0\u7684\u662f\u540c\u6b65\u8282\u70b9 \u66f4\u65b0\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684 mytruststore.jks \uff0c\u4e0d\u7528\u4fee\u6539\u914d\u7f6e \u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9 \uff1a \u5982\u679c\u73b0\u5728\u6ca1\u6709\u5386\u53f2\u533a\u5757\u6570\u636e\uff0c\u5219\u91cd\u6784 genesis.json \uff0c\u5c06\u65b0\u8282\u70b9\u7684\u8d26\u6237\u4e0e\u8bc1\u4e66\u6ce8\u518c \u5982\u679c\u73b0\u5728\u6709\u5386\u53f2\u6570\u636e\uff0c\u5219\u65e0\u9700\u91cd\u6784 genesis.json \uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8c03\u7528 \u8d26\u6237\u8bc1\u4e66\u7ba1\u7406\u5408\u7ea6 \u6765\u6ce8\u518c\u8d26\u6237\u6216\u8bc1\u4e66 \u5982\u679c\u4e1a\u52a1\u903b\u8f91\u4e0d\u6d89\u53ca\u5230\u65b0\u8282\u70b9\u7684\u8d26\u6237\uff0c\u5219\u8be5\u6b65\u9aa4\u975e\u5fc5\u987b\uff0c\u56e0\u4e3a\u9ed8\u8ba4 RepChain \u4f1a\u4ece mytrustStore.jks \u4e2d\u52a0\u8f7d\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u65b0\u589e\u8282\u70b9\u6240\u63d0\u4ea4\u7684\u7b7e\u540d\u4ea4\u6613\u80fd\u591f\u88ab\u63a5\u53d7 \u2014\u2014\u591a\u94fe\u6a21\u5f0f\uff0c\u4e1a\u52a1\u94fe\u53ea\u8d1f\u8d23\u4e1a\u52a1 \u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u4e1a\u52a1\u94fe\u53ea\u8d1f\u8d23\u4e1a\u52a1 1.\u8981\u914d\u7f6e\u4e3a\u5171\u4eablevelDB 2.\u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo \uff08\u8eab\u4efd\u94fe\uff09\u548c rep.utils.CreateGenesisInfo4NoTransaction \uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09\u548c json/credence-net/genesis.json \uff08\u4e1a\u52a1\u94fe\uff09 RepChain\u6240\u652f\u6301\u7684\u7f51\u7edc\u73af\u5883 \u652f\u6301\u5c40\u57df\u7f51\u3001\u4e13\u7f51\u3001\u516c\u7f51\u90e8\u7f72\uff0c NAT \u6216 docker \u73af\u5883 RepChain\u6240\u652f\u6301\u7684\u8f6f\u786c\u4ef6\u73af\u5883 \u786c\u4ef6\u73af\u5883\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\u3001RISK-V\uff1b\u8f6f\u4ef6\u73af\u5883\uff1a\u865a\u62df\u673a\u3001Docker \u90e8\u7f72\u548c\u8fd0\u884cRepChain\u8282\u70b9\u7684\u65b9\u5f0f \u4f7f\u7528 jar \u5305\u90e8\u7f72\uff0c\u8fd0\u884c\u5728JVM\u4e0a\uff08jdk11+\uff0c\u63a8\u8350jdk13+\uff09\uff0c\u57fa\u4e8eJAVA\u7684\u8de8\u5e73\u53f0\u90e8\u7f72\uff0cRepChain\u652f\u6301\u90e8\u7f72\u5728\u7edd\u5927\u90e8\u5206\u7684Windows\u3001Linux\u4e0eMacOS\u7cfb\u7edf\u4e0a RepChain\u7684\u5355\u94fe\u90e8\u7f72\u6a21\u5f0f \u53ef\u4ee5\u5206\u4e3a\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u3001\u8282\u70b9\u7ba1\u7406\u670d\u52a1 1. \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 \u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u8fd0\u884c\u5728\u540c\u4e00\u5bbf\u4e3b\u673a\u4e0a\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u7f16\u5199\u597d\u7684\u5408\u7ea6 2. \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 \u53ef\u4ee5\u7406\u89e3\u4e3a\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u5404\u4e2a\u8282\u70b9\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u5bbf\u4e3b\u673a\u4e0a 3. \u8282\u70b9\u7ba1\u7406\u670d\u52a1 \u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u53ef\u4ee5\u5728\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u4e5f\u53ef\u4ee5\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b \u7f16\u8bd1\u6253\u5305 \u73af\u5883\u9700\u6c42\uff1a 1.\u786c\u4ef6\u7684\u63a8\u8350\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G\uff0cDisk\uff1a100G \u6240\u8ff0\u914d\u7f6e\u662f\u63a8\u8350\u7684 \u57fa\u7840\u8fd0\u884c\u73af\u5883 \u7684\u786c\u4ef6\u914d\u7f6e\uff0c\u6253\u5305\u7f16\u8bd1\u73af\u5883\u7684\u914d\u7f6e\u53ef\u964d\u4f4e\uff08\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u964d\u4f4e\u6216\u63d0\u5347\u914d\u7f6e\uff09 2.Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350 Azul-zuluJdk \uff0c\u4e5f\u53ef\u4f7f\u7528 Oracle-Jdk 3.\u64cd\u4f5c\u7cfb\u7edf\uff1a\u53ef\u4ee5\u5b89\u88c5Jdk-13\u7684\u7cfb\u7edf 4.\u652f\u6301\u67b6\u6784\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\uff0c\u76ee\u524d\u4e5f\u652f\u6301\uff1aRISC-V\uff1b\u5982\u679c\u662fArm-64\u67b6\u6784\uff0c\u5219\u9700\u8981\u66ff\u6362RepChain\u4ee3\u7801\u9ed8\u8ba4\u6240\u4f9d\u8d56\u7684leveldbjni\u7684\u5305\uff0c\u66ff\u6362\u65b9\u5f0f\u53c2\u89c1\u540e\u7eed\u7684\u4ecb\u7ecd 5. Git \uff1a\u7528\u6765\u4e0b\u8f7dRepChain\u7684\u6e90\u7801\uff08\u975e\u5fc5\u987b\uff0c\u53ef\u76f4\u63a5\u4e0b\u8f7d \u538b\u7f29\u5305 \uff09 6.\u7f16\u8bd1\u5de5\u5177\uff1a Sbt \uff0c\u5b89\u88c5\u65b9\u5f0f\u89c1 \u5b98\u65b9\u6559\u7a0b \uff1b \u6216 \u5b89\u88c5\u4e86 Scala \u63d2\u4ef6\u7684 IDEA \uff0c\u63d2\u4ef6\u5b89\u88c5\u65b9\u5f0f\u89c1 \u5b98\u65b9\u6559\u7a0b \u4e0b\u8f7d\u6e90\u7801\uff1a 1.\u5982\u679c\u6709\u5b89\u88c5Git\uff0c\u4e14\u4e3aGit\u914d\u7f6e\u4e86\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\uff0c\u5219\u4f7f\u7528GitBash\u6216\u8005\u7cfb\u7edf\u81ea\u5e26Terminal\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a git clone https://gitee.com/BTAJL/repchain.git cd repchain git fetch git checkout -b dev_jdk13_2.0.0.0 RepChain_2.0.0_RC \u5982\u4e0d\u4f7f\u7528git\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d \u538b\u7f29\u5305 \uff0c\u5e76\u89e3\u538b\u4e3arepchain 2.\u627e\u5230repchain\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\uff0c\u4fee\u6539build.sbt\u4e2d\u7684 mainClass \uff08Jar\u5305\u4e3b\u7c7b\uff09\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.Repchain \uff08\u4e3b\u7c7b rep.app.Repchain \u4e2d\u9ed8\u8ba4\u53ea\u6709node1-node5\u51715\u4e2a\u8282\u70b9\uff0c\u591a\u94fe\u6a21\u5f0f\u4e0b\u4eff\u7167node1-node5\u5728\u4e3b\u7c7b rep.app.RepChain \u4e2d\u589e\u52a0node6-nodeN\u8282\u70b9\u5b9e\u4f8b\uff09\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.Repchain_Single \uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u8282\u70b9\u7ba1\u7406\u670d\u52a1 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.RepChain_Management \uff0c\u5982\u4e0b\u6240\u793a\uff1a # \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.Repchain\" ) # \u6216 # \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.Repchain_Single\" ) # \u6216 # \u8282\u70b9\u7ba1\u7406\u670d\u52a1 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.RepChain_Management\" ) RepChain\u9ed8\u8ba4\u4f7f\u7528\u7684 leveldbjni \u5305\u4e0d\u652f\u6301Arm-64\uff0c\u56e0\u6b64\u5982\u679c\u8981\u5c06RepChain\u90e8\u7f72\u5728Arm-64\u67b6\u6784\u7684\u670d\u52a1\u5668\uff0c\u9700\u8981\u5c06\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\u4e2d\u914d\u7f6e\u7684 leveldb-jni \u4f9d\u8d56\u5305\u66ff\u6362\uff08\u53ef\u4ee5\u81ea\u5df1\u6839\u636e leveldb-jni \u7684\u8bf4\u660e\u6587\u6863\u81ea\u884c\u7f16\u8bd1\uff09\uff0c\u5982\u4e0b\u6240\u793a\uff1a # \u5c06 libraryDependencies += \"org.fusesource.leveldbjni\" % \"leveldbjni-all\" % \"1.8\" # \u66ff\u6362\u4e3a libraryDependencies += \"com.github.huangtianhua\" % \"leveldbjni-linux64-aarch64\" % \"1.9\" # \u6216 libraryDependencies += \"org.openlabtesting.leveldbjni\" % \"leveldbjni-linux64-aarch64\" % \"1.8\" 3.\u7f16\u8bd1\u5e76\u6253\u5305 \u6709\u4e24\u79cd\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u5728IDEA\u4e2d\u4f7f\u7528 sbt-shell \uff08\u5b89\u88c5\u4e86Scala\u63d2\u4ef6\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u53e6\u4e00\u79cd\u662f\u5728\u7ec8\u7aef\u4f7f\u7528 sbt-repl \uff08\u5b89\u88c5\u4e86Sbt\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u8be6\u7ec6\u8bf4\u660e\u8fc7\u7a0b\u53ef\u53c2\u8003\u540e\u9762\u7684\u6253\u5305\u6f14\u793a\uff1a \u5728IDEA\u4e2d\u6253\u5f00 sbt shell \u5e76\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1aclean->compile->assembly\uff0c\u5982\u4e0b\u6240\u793a\uff1a sbt:RepChain> clean sbt:RepChain> compile sbt:RepChain> assembly \u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528 sbt-repl \uff0c\u8f93\u5165 sbt \u547d\u4ee4\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a > clean > compile > assembly 4.\u6253\u5305\u597d\u7684RepChain.jar\u5b58\u653e\u5728 repchain/target/scala-2.12/RepChain.jar \uff0c\u5c06Jar\u5305\u79fb\u52a8\u5230\u9879\u76ee\u6839\u76ee\u5f55\u4e0b \u6253\u5305\u8fc7\u7a0b\u6f14\u793a\uff1a 1.\u4f7f\u7528IDEA\u4e2d\u7684 sbt-shell 2.\u4f7f\u7528\u7ec8\u7aef\uff08Terminal or cmd\uff09\uff0c\u4e0b\u9762\u4ee5mac\u4e0b\u7684\u7ec8\u7aef\u4e3a\u4f8b\uff08Windows\u6216Linux\u7c7b\u4f3c\uff09 \u90e8\u7f72 \u5728\u4e0a\u4e00\u5c0f\u8282\u4e2d\uff0c\u4e3b\u8981\u53d9\u8ff0\u4e86\u5982\u4f55\u5bf9RepChain\u7684\u6e90\u7801\u8fdb\u884c\u4e86\u7f16\u8bd1\u5e76\u6253\u5305\u5f97\u5230RepChain.jar\uff0c\u63a5\u4e0b\u6765\u4f7f\u7528RepChain.jar\u6765\u90e8\u7f72RepChain\u7f51\u7edc\uff0cRepChain\u7684\u90e8\u7f72\u6709\u4e09\u79cd\u65b9\u5f0f\uff1a\u4e00\u662f\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\uff1b\u4e8c\u662f\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff1b\u4e09\u662f\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u3002\u63a5\u4e0b\u6765\u5206\u522b\u505a\u8be6\u7ec6\u4ecb\u7ecd \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 \u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe 5 \u8282\u70b9\u548c\u4e1a\u52a1\u94fe 5 \u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.Repchain \u73af\u5883\u9700\u6c42\uff1a \u786c\u4ef6\u7684\u57fa\u7840\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350 Azul-zuluJdk \uff0c\u4e5f\u53ef\u4f7f\u7528 Oracle-Jdk \u914d\u7f6e\u6587\u4ef6 \u8eab\u4efd\u94fe\u4ee5node1\u4e3a\u4f8b\uff08node2-node5\u7c7b\u4f3c\uff09\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3a repchain/conf/121000005l35120456.node1/system.conf system.conf \u4e2d\u9700\u8981\u6ce8\u610f\u7684\u914d\u7f6e\u9879 1. chain_cert_name = \"identity-net:951002007l78123233.super_admin\" \uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4ee5 identity-net \u6807\u8bc6\u7684\u7ba1\u7406\u5458super_admin 2. chain_network_id = \"identity-net\" \uff0c\u7ec4\u7f51id\uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4e3a identity-net \uff0c\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26 3. basic_chain_id = \"identity-net\" \uff0c\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u5747\u8bbe\u7f6e\u4e3a identity-net \uff0c \u8d26\u6237\u3001\u8bc1\u4e66\u7531\u8eab\u4efd\u94fe\u7ba1\u7406 4. system.httpServicePort= 9081 \uff0cRepChain\u7684http\u670d\u52a1\u7684\u7aef\u53e3 5. system.contractOperationMode = 1 \uff0c\u4ee5 jar \u5305\u6a21\u5f0f\u8fd0\u884cRepChain\uff0c\u8be5\u914d\u7f6e\u9879\u987b\u6539\u4e3a1 6. system.trans_create_type=0 \uff0c\u63a5\u53d7\u4eceAPI\u63d0\u4ea4\u8fc7\u6765\u7684\u4ea4\u6613\uff08\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u4ee3\u8868\u7684\u662f\u8282\u70b9\u81ea\u52a8\u4ea7\u751f\u5e76\u63d0\u4ea4\u4ea4\u6613\uff0c\u4e3b\u8981\u662f\u7528\u6765\u6d4b\u8bd5\u7528\uff09 7. sytetem.storage.dbpath \uff0cleveldb\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u4e1a\u52a1\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684 8. sytetem.storage.blockpath \uff0cblock\u7684\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u4e1a\u52a1\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684 \u4e1a\u52a1\u94fe\u4ee5node6\u4e3a\u4f8b\uff08node7-node10\u7c7b\u4f3c\uff09\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3a repchain/conf/330597659476689954.node6/system.conf system.conf \u4e2d\u9700\u8981\u6ce8\u610f\u7684\u914d\u7f6e\u9879 1. chain_cert_name = \"credence-net:951002007l78123233.super_admin\" \uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4ee5 credence-net \u6807\u8bc6\u7684\u7ba1\u7406\u5458super_admin 2. chain_network_id = \"credence-net\" \uff0c\u7ec4\u7f51id\uff0c\u4e1a\u52a1\u94fe\u8bbe\u7f6e\u4e3a credence-net \uff0c\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26 3. basic_chain_id = \"identity-net\" \uff0c\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u5747\u8bbe\u7f6e\u4e3a identity-net \uff0c \u8d26\u6237\u3001\u8bc1\u4e66\u7531\u8eab\u4efd\u94fe\u7ba1\u7406 4. system.httpServicePort= 9086 \uff0cRepChain\u7684http\u670d\u52a1\u7684\u7aef\u53e3 5. system.contractOperationMode = 1 \uff0c\u4ee5 jar \u5305\u6a21\u5f0f\u8fd0\u884cRepChain\uff0c\u8be5\u914d\u7f6e\u9879\u987b\u6539\u4e3a1 6. system.trans_create_type=0 \uff0c\u63a5\u53d7\u4eceAPI\u63d0\u4ea4\u8fc7\u6765\u7684\u4ea4\u6613\uff08\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u4ee3\u8868\u7684\u662f\u8282\u70b9\u81ea\u52a8\u4ea7\u751f\u5e76\u63d0\u4ea4\u4ea4\u6613\uff0c\u4e3b\u8981\u662f\u7528\u6765\u6d4b\u8bd5\u7528\uff09 7. sytetem.storage.dbpath \uff0cleveldb\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u8eab\u4efd\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684 8. sytetem.storage.blockpath \uff0cblock\u7684\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u8eab\u4efd\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684 \u542f\u52a8\u65b9\u5f0f\u4e3a\u5728\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a # \u5148\u524d\u5728\u6253\u5305\u73af\u8282\u5df2\u7ecf\u6307\u5b9a\u4e86\u4e3b\u7c7b java -jar RepChain.jar \u6216 # \u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.Repchain \u542f\u52a8\u6210\u529f\u6807\u5fd7\u6709\u4e24\u79cd\u9a8c\u8bc1\u65b9\u5f0f \u901a\u8fc7API\u63a5\u53e3\u6765\u9a8c\u8bc1\u3002\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:9081/chaininfo/node \uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a\u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf\uff0c\u5219\u8868\u793a\u6210\u529f\uff1b\u6216\u8005\u662f\u5728\u7ec8\u7aef\u4e2d\u8f93\u5165 curl http://localhost:9081/chaininfo/node \uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a \u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf \uff0c\u5219\u8868\u793a\u6210\u529f \u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:9081/web/g1.html \uff0c\u5982\u679c\u51fa\u73b0\u5982\u4e0b\u754c\u9762\uff0c\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u7ea2\u6846\u4e2d\u53ef\u4ee5\u770b\u5230\u5165\u7f51\u7684\u8282\u70b9\uff0c\u5219\u6807\u8bc6\u6210\u529f \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0\uff1a \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650 \u5176\u4ed6\uff1a\u5982\u679c\u60f3\u8981\u5728\u540c\u4e00\u4e2aJVM\u4e0a\u6a21\u62df\u542f\u52a8\u5927\u4e8e10\u4e2a\u8282\u70b9\uff0c\u5373\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe6~N\u8282\u70b9\u6216\u8005\u4e1a\u52a1\u94fe6~N\u8282\u70b9\uff0c\u5728\u4e3b\u7c7b rep.app.RepChain \u4e2d\u589e\u52a0\u8282\u70b9\u5b9e\u4f8b \u51c6\u5907\u5de5\u4f5c 1. jks/identity-net \u6216\u8005 jks/credence-net \u76ee\u5f55\u4e0b\u76f8\u5e94\u7684\u8282\u70b9\u5bc6\u94a5\u5bf9\u4e0e\u8bc1\u4e66\u5e94\u662f6~N\u4e2a\uff0c\u4eff\u7167\u539f\u6709jks\u6587\u4ef6\u653e\u7f6e\u65b0\u751f\u6210\u7684jks\u6587\u4ef6\u5373\u53ef\uff0c\u53ef\u4f7f\u7528 Kse \u6216\u8005 \u4ee3\u7801 \u6765\u751f\u6210\u8282\u70b9\u5bc6\u94a5\u5bf9\u548c\u81ea\u7b7e\u540d\u8bc1\u4e66\uff0c\u5e76\u5c06\u8bc1\u4e66\u5bfc\u5165mytruststore.jks\u4e2d\uff0c\u6ce8\u610fJks\u6587\u4ef6\u540d\uff0c\u4ee5\u53ca\u5176\u4e2d\u5b58\u50a8\u7684\u5bc6\u94a5\u5bf9\u6216\u8005\u8bc1\u4e66\u7684\u522b\u540d\uff0c ***.nodex \uff0c\u4e0b\u56fe\u662fKse\u7684\u7b80\u5355\u4f7f\u7528\u793a\u4f8b \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u8eab\u4efd\u94fe\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5982\u4e0b\u56fe\uff1a 2.conf\u76ee\u5f55\u4e0b\u4e3a\u8282\u70b9\u914d\u7f6e\u6587\u4ef6\uff0c\u8eab\u4efd\u94fe\u65b0\u589e\u8282\u70b9\u4eff\u7167node1-node5\u8fdb\u884c\u914d\u7f6e\uff0c\u4e1a\u52a1\u94fe\u65b0\u589e\u8282\u70b9\u4eff\u7167node6-node10\u8fdb\u884c\u914d\u7f6e\u3002 3.\u4eff\u7167node1-node5\u5728\u4e3b\u7c7b rep.app.RepChain \u4e2d\u589e\u52a0\u8282\u70b9\u5b9e\u4f8b\u3002 \u542f\u52a8\u65b9\u5f0f \u8bf7\u67e5\u770b\u6e90\u7801 src/main/scala/rep/app/RepChain.scala java -cp RepChain.jar rep.app.RepChain jar\u5305\u90e8\u7f72\u540e\uff08\u5355\u673a10\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u65b0\u589e\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66 \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u4e0e\u5355\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u533a\u522b\u5728\u4e8e\u591a\u673a\u591a\u8282\u70b9\u662f\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u540c\u4e00\u4e2a Jvm \u4e0a\u542f\u52a82\u4e2a\u8282\u70b9\u5206\u522b\u53c2\u4e0e\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7ec4\u7f51\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.Repchain_Single \u7f51\u7edc\u90e8\u7f72\u53ca\u542f\u52a8\u65b9\u5f0f \u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4 \u542f\u52a8\u65b9\u5f0f\u4ee5\u8eab\u4efd\u94fe\u8282\u70b9node1\u548c\u4e1a\u52a1\u94fe\u8282\u70b9node6\u4e3a\u4f8b\uff0cnode1\u548cnode6\u9700\u8981\u90e8\u7f72\u5728\u540c\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\uff0cnode1\u548cnode6\u7684LevelDB\uff08 system.conf \u4e2d sytetem.storage.dbpath \u548c sytetem.storage.blockpath \uff09\u914d\u7f6e\u4e3a\u540c\u4e00\u4e2a\u5b58\u50a8\u76ee\u5f55\uff1a \u5728node1\u548cnode6\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a java -jar RepChain.jar \"121000005l35120456.node1\" \"330597659476689954.node6\" # \u6216\u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.Repchain_Single \"121000005l35120456.node1\" \"330597659476689954.node6\" ip\u4e0eport\u7684\u914d\u7f6e \u975e NAT \u6216\u975e docker \u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51ip ca n o n ical.por t = 8082 # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\\<seed-nodes>\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 hostname \u4e0e port \uff09 \u6ce8 \uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879\\<seed-nodes>\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879\\<seed-nodes>\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3 NAT \u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"139.10.1.3\" # \u5916\u90e8\u5730\u5740 ca n o n ical.por t = 8082 # \u5916\u90e8\u7aef\u53e3 bi n d.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51\u5730\u5740 bi n d.por t = 8082 # \u5c40\u57df\u7f51\u7aef\u53e3 } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u7684 3 \u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e86 1 \u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 \u5185\u90e8\u6216\u5916\u90e8 \u7684 hostname \u4e0e port \uff09 jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5 node1 \u548c node6 \u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4 \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5 \u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3 \u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25 \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0 \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650 \u8282\u70b9\u7ba1\u7406\u670d\u52a1 \u8282\u70b9\u7ba1\u7406\u670d\u52a1\u4e0e\u5355\u673a\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u6ee1\u8db3\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u5373\u53ef\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.RepChain_Management \u7f51\u7edc\u90e8\u7f72\u53ca\u542f\u52a8\u65b9\u5f0f \u5355\u94fe\u6a21\u5f0f\u4e0b\u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe 5 \u8282\u70b9\u548c\u4e1a\u52a1\u94fe 5 \u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9 \u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8eab\u4efd\u94fe\u8282\u70b9\u548c\u4e00\u4e2a\u4e1a\u52a1\u94fe\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4 \u542f\u52a8\u65b9\u5f0f \u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u5047\u8bbe\u5728\u4e00\u4e2a\u670d\u52a1\u5668\u4e0a\u6709node1\u548cnode6\uff0c\u5728\u5176\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a java -jar RepChain.jar \"121000005l35120456.node1\" \"330597659476689954.node6\" # \u6216\u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.RepChain_Management \"121000005l35120456.node1\" \"330597659476689954.node6\" ip\u4e0eport\u7684\u914d\u7f6e \u975e NAT \u6216\u975e docker \u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51ip ca n o n ical.por t = 8082 # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9<seed-nodes>\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 hostname \u4e0e port \uff09 \u6ce8 \uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879<seed-nodes>\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879<seed-nodes>\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3 NAT \u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"139.10.1.3\" # \u5916\u90e8\u5730\u5740 ca n o n ical.por t = 8082 # \u5916\u90e8\u7aef\u53e3 bi n d.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51\u5730\u5740 bi n d.por t = 8082 # \u5c40\u57df\u7f51\u7aef\u53e3 } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u7684 3 \u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e86 1 \u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 \u5185\u90e8\u6216\u5916\u90e8 \u7684 hostname \u4e0e port \uff09 jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5 node1 \u548c node6 \u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4 \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5 \u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3 \u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25 \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0 \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650 \u9644\u5f55 \u521b\u4e16\u5757\u7684\u6784\u5efa \u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo \uff08\u8eab\u4efd\u94fe\uff09\u548c rep.utils.CreateGenesisInfo4NoTransaction \uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09\u548c json/credence-net/genesis.json \uff08\u4e1a\u52a1\u94fe\uff09 \u8282\u70b9\u5bc6\u94a5\u66ff\u6362 \u9ed8\u8ba4\u4e3a5\u4e2a\u8eab\u4efd\u94fe\u8282\u70b9\u548c5\u4e2a\u4e1a\u52a1\u94fe\u8282\u70b9\uff0c\u6bcf\u4e2a\u8282\u70b9\u6709\u4e00\u4e2a\u5bc6\u94a5\u5bf9\uff0c \u5b9e\u9645 \u5728\u751f\u4ea7\u73af\u5883\u90e8\u7f72RepChain\u9700\u8981\u66f4\u6362\u5f00\u6e90\u4ed3\u5e93\u4e2d\u7684\u5bc6\u94a5\uff0c\u4f7f\u7528 KeyStoreExplorer \uff08\u6216\u8005\u4f7f\u7528 \u4ee3\u7801 \uff09\u5373\u53ef\u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u5bfc\u51fa\u8bc1\u4e66 \u5bf9\u4e8e\u8eab\u4efd\u94fe 1.\u4e3a\u6bcf\u4e2a\u8282\u70b9\u66ff\u6362\u5bc6\u94a5\uff0c\u5047\u8bbe\u67095\u4e2a\u8282\u70b9\uff0c\u5219\u4f7f\u7528 kse \u751f\u62105\u4e2a\u5305\u542b\u5bc6\u94a5\u5bf9\uff08\u9ed8\u8ba4\u4f7f\u7528 secp256r1 \uff09\u7684 jks \u5e76\u5bfc\u51fa\u8bc1\u4e66\uff0c\u66f4\u6362 jks/identity-net \u76ee\u5f55\u4e0b\u7684\u5bc6\u94a5\u4e0e\u8bc1\u4e66 2.\u4f7f\u7528 kse \u5c06\u5404\u4e2a\u8282\u70b9\u7684\u8bc1\u4e66\u5bfc\u5165\u5230 mytrustStore.jks \u4e2d 3.\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo \uff0c\u91cd\u65b0\u751f\u6210\u7684\u8eab\u4efd\u94fe\u521b\u4e16\u5757\u6587\u4ef6\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09 \u5bf9\u4e8e\u4e1a\u52a1\u94fe 1.\u4e3a\u6bcf\u4e2a\u8282\u70b9\u66ff\u6362\u5bc6\u94a5\uff0c\u5047\u8bbe\u67095\u4e2a\u8282\u70b9\uff0c\u5219\u4f7f\u7528 kse \u751f\u62105\u4e2a\u5305\u542b\u5bc6\u94a5\u5bf9\uff08\u9ed8\u8ba4\u4f7f\u7528 secp256r1 \uff09\u7684 jks \u5e76\u5bfc\u51fa\u8bc1\u4e66\uff0c\u66f4\u6362 jks/credence-net \u76ee\u5f55\u4e0b\u7684\u5bc6\u94a5\u4e0e\u8bc1\u4e66 2.\u4f7f\u7528 kse \u5c06\u5404\u4e2a\u8282\u70b9\u7684\u8bc1\u4e66\u5bfc\u5165\u5230 mytrustStore.jks \u4e2d 3.\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo4NoTransaction \uff0c\u91cd\u65b0\u751f\u6210\u7684\u4e1a\u52a1\u94fe\u521b\u4e16\u5757\u6587\u4ef6\u5728 json/credence-net/genesis.json \uff08\u4e1a\u52a1\u94fe\uff09 \u65b0\u589e\u8282\u70b9 \u65b0\u589e\u8282\u70b9\u9700\u8981\u505c\u673a\u5e76\u91cd\u542f\u7f51\u7edc \u5047\u8bbe\u73b0\u5728\u60f3\u589e\u52a0\u7ec4\u7f51\u8282\u70b9\uff0c\u5219\u9700\u8981\u751f\u6210\u65b0\u7684 jks \uff0c\u5e76\u653e\u5230 jks/identity \u4ee5\u53ca jks/credence \u76ee\u5f55\u4e0b\uff0c\u5e76\u4e14\u5c06\u8bc1\u4e66\u5bfc\u5165\u5230 mytrustStore.jks \u4e2d\uff0c\u6240\u6709\u8282\u70b9\u7684 mystruststore.jks \u90fd\u9700\u8981\u66f4\u65b0\uff1b\u8fd8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:7081/swagger/index.html \uff0c\u901a\u8fc7\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u7684API\u542f\u52a8\u505c\u6b62\u8282\u70b9\uff08\u9ed8\u8ba4http\u670d\u52a1\u7684\u7aef\u53e3\u53f7\u4e3a7081\uff09\u3002 \u589e\u52a0\u7684\u662f\u5171\u8bc6\u8282\u70b9 \u9700\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u5c06\u8be5\u8282\u70b9\u914d\u7f6e\u5230\u5171\u8bc6\u5217\u8868\u4e2d\uff0c\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u9700\u8981 \u4fee\u6539\u914d\u7f6e\u9879 \uff1a system.vote.vote_node_list \uff08\u914d\u7f6e\u9879\u5728conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\uff09 \u589e\u52a0\u7684\u662f\u540c\u6b65\u8282\u70b9 \u66f4\u65b0\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684 mytruststore.jks \uff0c\u4e0d\u7528\u4fee\u6539\u914d\u7f6e \u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9 \uff1a \u5982\u679c\u73b0\u5728\u6ca1\u6709\u5386\u53f2\u533a\u5757\u6570\u636e\uff0c\u5219\u91cd\u6784 genesis.json \uff0c\u5c06\u65b0\u8282\u70b9\u7684\u8d26\u6237\u4e0e\u8bc1\u4e66\u6ce8\u518c \u5982\u679c\u73b0\u5728\u6709\u5386\u53f2\u6570\u636e\uff0c\u5219\u65e0\u9700\u91cd\u6784 genesis.json \uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8c03\u7528 \u8d26\u6237\u8bc1\u4e66\u7ba1\u7406\u5408\u7ea6 \u6765\u6ce8\u518c\u8d26\u6237\u6216\u8bc1\u4e66 \u5982\u679c\u4e1a\u52a1\u903b\u8f91\u4e0d\u6d89\u53ca\u5230\u65b0\u8282\u70b9\u7684\u8d26\u6237\uff0c\u5219\u8be5\u6b65\u9aa4\u975e\u5fc5\u987b\uff0c\u56e0\u4e3a\u9ed8\u8ba4 RepChain \u4f1a\u4ece mytrustStore.jks \u4e2d\u52a0\u8f7d\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u65b0\u589e\u8282\u70b9\u6240\u63d0\u4ea4\u7684\u7b7e\u540d\u4ea4\u6613\u80fd\u591f\u88ab\u63a5\u53d7 \u2014\u2014\u591a\u94fe\u6a21\u5f0f\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1 \u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1 1.\u8981\u914d\u7f6e\u4e3a\u5171\u4eablevelDB 2.\u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.identity.CreateIdentityGenesisInfo \uff08\u8eab\u4efd\u94fe\uff09 \u548c rep.utils.credence.CreateCredenceGenesisInfo \uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09\u548c json/credence-net/genesis.json \uff08\u4e1a\u52a1\u94fe\uff09 RepChain\u6240\u652f\u6301\u7684\u7f51\u7edc\u73af\u5883 \u652f\u6301\u5c40\u57df\u7f51\u3001\u4e13\u7f51\u3001\u516c\u7f51\u90e8\u7f72\uff0c NAT \u6216 docker \u73af\u5883 RepChain\u6240\u652f\u6301\u7684\u8f6f\u786c\u4ef6\u73af\u5883 \u786c\u4ef6\u73af\u5883\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\u3001RISK-V\uff1b\u8f6f\u4ef6\u73af\u5883\uff1a\u865a\u62df\u673a\u3001Docker \u90e8\u7f72\u548c\u8fd0\u884cRepChain\u8282\u70b9\u7684\u65b9\u5f0f \u4f7f\u7528 jar \u5305\u90e8\u7f72\uff0c\u8fd0\u884c\u5728JVM\u4e0a\uff08jdk11+\uff0c\u63a8\u8350jdk13+\uff09\uff0c\u57fa\u4e8eJAVA\u7684\u8de8\u5e73\u53f0\u90e8\u7f72\uff0cRepChain\u652f\u6301\u90e8\u7f72\u5728\u7edd\u5927\u90e8\u5206\u7684Windows\u3001Linux\u4e0eMacOS\u7cfb\u7edf\u4e0a RepChain\u7684\u5355\u94fe\u90e8\u7f72\u6a21\u5f0f \u53ef\u4ee5\u5206\u4e3a\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u3001\u8282\u70b9\u7ba1\u7406\u670d\u52a1 \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 \u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u8fd0\u884c\u5728\u540c\u4e00\u5bbf\u4e3b\u673a\u4e0a\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u7f16\u5199\u597d\u7684\u5408\u7ea6 \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 \u53ef\u4ee5\u7406\u89e3\u4e3a\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u5404\u4e2a\u8282\u70b9\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u5bbf\u4e3b\u673a\u4e0a \u8282\u70b9\u7ba1\u7406\u670d\u52a1 \u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u53ef\u4ee5\u5728\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u4e5f\u53ef\u4ee5\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b \u7f16\u8bd1\u6253\u5305 \u73af\u5883\u9700\u6c42\uff1a 1.\u786c\u4ef6\u7684\u63a8\u8350\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G\uff0cDisk\uff1a100G \u6240\u8ff0\u914d\u7f6e\u662f\u63a8\u8350\u7684 \u57fa\u7840\u8fd0\u884c\u73af\u5883 \u7684\u786c\u4ef6\u914d\u7f6e\uff0c\u6253\u5305\u7f16\u8bd1\u73af\u5883\u7684\u914d\u7f6e\u53ef\u964d\u4f4e\uff08\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u964d\u4f4e\u6216\u63d0\u5347\u914d\u7f6e\uff09 2.Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350 Azul-zuluJdk \uff0c\u4e5f\u53ef\u4f7f\u7528 Oracle-Jdk 3.\u64cd\u4f5c\u7cfb\u7edf\uff1a\u53ef\u4ee5\u5b89\u88c5Jdk-13\u7684\u7cfb\u7edf 4.\u652f\u6301\u67b6\u6784\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\uff0c\u76ee\u524d\u4e5f\u652f\u6301\uff1aRISC-V\uff1b\u5982\u679c\u662fArm-64\u67b6\u6784\uff0c\u5219\u9700\u8981\u66ff\u6362RepChain\u4ee3\u7801\u9ed8\u8ba4\u6240\u4f9d\u8d56\u7684leveldbjni\u7684\u5305\uff0c\u66ff\u6362\u65b9\u5f0f\u53c2\u89c1\u540e\u7eed\u7684\u4ecb\u7ecd 5. Git \uff1a\u7528\u6765\u4e0b\u8f7dRepChain\u7684\u6e90\u7801\uff08\u975e\u5fc5\u987b\uff0c\u53ef\u76f4\u63a5\u4e0b\u8f7d \u538b\u7f29\u5305 \uff09 6.\u7f16\u8bd1\u5de5\u5177\uff1a Sbt \uff0c\u5b89\u88c5\u65b9\u5f0f\u89c1 \u5b98\u65b9\u6559\u7a0b \uff1b \u6216 \u5b89\u88c5\u4e86 Scala \u63d2\u4ef6\u7684 IDEA \uff0c\u63d2\u4ef6\u5b89\u88c5\u65b9\u5f0f\u89c1 \u5b98\u65b9\u6559\u7a0b \u4e0b\u8f7d\u6e90\u7801\uff1a 1.\u5982\u679c\u6709\u5b89\u88c5Git\uff0c\u4e14\u4e3aGit\u914d\u7f6e\u4e86\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\uff0c\u5219\u4f7f\u7528GitBash\u6216\u8005\u7cfb\u7edf\u81ea\u5e26Terminal\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a git clone https://gitee.com/BTAJL/repchain.git cd repchain git fetch git checkout -b dev_jdk13_2.0.0.0 RepChain_2.0.0_RC \u5982\u4e0d\u4f7f\u7528git\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d \u538b\u7f29\u5305 \uff0c\u5e76\u89e3\u538b\u4e3arepchain 2.\u627e\u5230repchain\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\uff0c\u4fee\u6539build.sbt\u4e2d\u7684 mainClass \uff08Jar\u5305\u4e3b\u7c7b\uff09\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.Repchain \uff08\u4e3b\u7c7b rep.app.Repchain \u4e2d\u9ed8\u8ba4\u53ea\u6709node1-node5\u51715\u4e2a\u8282\u70b9\uff0c\u591a\u94fe\u6a21\u5f0f\u4e0b\u4eff\u7167node1-node5\u5728\u4e3b\u7c7b rep.app.RepChain \u4e2d\u589e\u52a0node6-nodeN\u8282\u70b9\u5b9e\u4f8b\uff09\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.Repchain_Single \uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u8282\u70b9\u7ba1\u7406\u670d\u52a1 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.RepChain_Management \uff0c\u5982\u4e0b\u6240\u793a\uff1a # \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.Repchain\" ) # \u6216 # \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.Repchain_Single\" ) # \u6216 # \u8282\u70b9\u7ba1\u7406\u670d\u52a1 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.RepChain_Management\" ) RepChain\u9ed8\u8ba4\u4f7f\u7528\u7684 leveldbjni \u5305\u4e0d\u652f\u6301Arm-64\uff0c\u56e0\u6b64\u5982\u679c\u8981\u5c06RepChain\u90e8\u7f72\u5728Arm-64\u67b6\u6784\u7684\u670d\u52a1\u5668\uff0c\u9700\u8981\u5c06\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\u4e2d\u914d\u7f6e\u7684 leveldb-jni \u4f9d\u8d56\u5305\u66ff\u6362\uff08\u53ef\u4ee5\u81ea\u5df1\u6839\u636e leveldb-jni \u7684\u8bf4\u660e\u6587\u6863\u81ea\u884c\u7f16\u8bd1\uff09\uff0c\u5982\u4e0b\u6240\u793a\uff1a # \u5c06 libraryDependencies += \"org.fusesource.leveldbjni\" % \"leveldbjni-all\" % \"1.8\" # \u66ff\u6362\u4e3a libraryDependencies += \"com.github.huangtianhua\" % \"leveldbjni-linux64-aarch64\" % \"1.9\" # \u6216 libraryDependencies += \"org.openlabtesting.leveldbjni\" % \"leveldbjni-linux64-aarch64\" % \"1.8\" 3.\u7f16\u8bd1\u5e76\u6253\u5305 \u6709\u4e24\u79cd\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u5728IDEA\u4e2d\u4f7f\u7528 sbt-shell \uff08\u5b89\u88c5\u4e86Scala\u63d2\u4ef6\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u53e6\u4e00\u79cd\u662f\u5728\u7ec8\u7aef\u4f7f\u7528 sbt-repl \uff08\u5b89\u88c5\u4e86Sbt\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u8be6\u7ec6\u8bf4\u660e\u8fc7\u7a0b\u53ef\u53c2\u8003\u540e\u9762\u7684\u6253\u5305\u6f14\u793a\uff1a \u5728IDEA\u4e2d\u6253\u5f00 sbt shell \u5e76\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1aclean->compile->assembly\uff0c\u5982\u4e0b\u6240\u793a\uff1a sbt:RepChain> clean sbt:RepChain> compile sbt:RepChain> assembly \u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528 sbt-repl \uff0c\u8f93\u5165 sbt \u547d\u4ee4\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a > clean > compile > assembly 4.\u6253\u5305\u597d\u7684RepChain.jar\u5b58\u653e\u5728 repchain/target/scala-2.12/RepChain.jar \uff0c\u5c06Jar\u5305\u79fb\u52a8\u5230\u9879\u76ee\u6839\u76ee\u5f55\u4e0b \u6253\u5305\u8fc7\u7a0b\u6f14\u793a\uff1a 1.\u4f7f\u7528IDEA\u4e2d\u7684 sbt-shell 2.\u4f7f\u7528\u7ec8\u7aef\uff08Terminal or cmd\uff09\uff0c\u4e0b\u9762\u4ee5mac\u4e0b\u7684\u7ec8\u7aef\u4e3a\u4f8b\uff08Windows\u6216Linux\u7c7b\u4f3c\uff09 \u90e8\u7f72 \u5728\u4e0a\u4e00\u5c0f\u8282\u4e2d\uff0c\u4e3b\u8981\u53d9\u8ff0\u4e86\u5982\u4f55\u5bf9RepChain\u7684\u6e90\u7801\u8fdb\u884c\u4e86\u7f16\u8bd1\u5e76\u6253\u5305\u5f97\u5230RepChain.jar\uff0c\u63a5\u4e0b\u6765\u4f7f\u7528RepChain.jar\u6765\u90e8\u7f72RepChain\u7f51\u7edc\uff0cRepChain\u7684\u90e8\u7f72\u6709\u4e09\u79cd\u65b9\u5f0f\uff1a\u4e00\u662f\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\uff1b\u4e8c\u662f\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff1b\u4e09\u662f\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u3002\u63a5\u4e0b\u6765\u5206\u522b\u505a\u8be6\u7ec6\u4ecb\u7ecd \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 \u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe 5 \u8282\u70b9\u548c\u4e1a\u52a1\u94fe 5 \u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.Repchain \u73af\u5883\u9700\u6c42\uff1a \u786c\u4ef6\u7684\u57fa\u7840\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350 Azul-zuluJdk \uff0c\u4e5f\u53ef\u4f7f\u7528 Oracle-Jdk \u914d\u7f6e\u6587\u4ef6 \u8eab\u4efd\u94fe\u4ee5node1\u4e3a\u4f8b\uff08node2-node5\u7c7b\u4f3c\uff09\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3a repchain/conf/121000005l35120456.node1/system.conf system.conf \u4e2d\u9700\u8981\u6ce8\u610f\u7684\u914d\u7f6e\u9879 1. chain_cert_name = \"identity-net:951002007l78123233.super_admin\" \uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4ee5 identity-net \u6807\u8bc6\u7684\u7ba1\u7406\u5458super_admin 2. chain_network_id = \"identity-net\" \uff0c\u7ec4\u7f51id\uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4e3a identity-net \uff0c\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26 3. basic_chain_id = \"identity-net\" \uff0c\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u5747\u8bbe\u7f6e\u4e3a identity-net \uff0c \u8d26\u6237\u3001\u8bc1\u4e66\u7531\u8eab\u4efd\u94fe\u7ba1\u7406 4. system.httpServicePort= 9081 \uff0cRepChain\u7684http\u670d\u52a1\u7684\u7aef\u53e3 5. system.contractOperationMode = 1 \uff0c\u4ee5 jar \u5305\u6a21\u5f0f\u8fd0\u884cRepChain\uff0c\u8be5\u914d\u7f6e\u9879\u987b\u6539\u4e3a1 6. system.trans_create_type=0 \uff0c\u63a5\u53d7\u4eceAPI\u63d0\u4ea4\u8fc7\u6765\u7684\u4ea4\u6613\uff08\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u4ee3\u8868\u7684\u662f\u8282\u70b9\u81ea\u52a8\u4ea7\u751f\u5e76\u63d0\u4ea4\u4ea4\u6613\uff0c\u4e3b\u8981\u662f\u7528\u6765\u6d4b\u8bd5\u7528\uff09 7. sytetem.storage.dbpath \uff0cleveldb\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u4e1a\u52a1\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684 8. sytetem.storage.blockpath \uff0cblock\u7684\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u4e1a\u52a1\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684 \u4e1a\u52a1\u94fe\u4ee5node6\u4e3a\u4f8b\uff08node7-node10\u7c7b\u4f3c\uff09\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3a repchain/conf/330597659476689954.node6/system.conf system.conf \u4e2d\u9700\u8981\u6ce8\u610f\u7684\u914d\u7f6e\u9879 1. chain_cert_name = \"credence-net:951002007l78123233.super_admin\" \uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4ee5 credence-net \u6807\u8bc6\u7684\u7ba1\u7406\u5458super_admin 2. chain_network_id = \"credence-net\" \uff0c\u7ec4\u7f51id\uff0c\u4e1a\u52a1\u94fe\u8bbe\u7f6e\u4e3a credence-net \uff0c\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26 3. basic_chain_id = \"identity-net\" \uff0c\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u5747\u8bbe\u7f6e\u4e3a identity-net \uff0c \u8d26\u6237\u3001\u8bc1\u4e66\u7531\u8eab\u4efd\u94fe\u7ba1\u7406 4. system.httpServicePort= 9086 \uff0cRepChain\u7684http\u670d\u52a1\u7684\u7aef\u53e3 5. system.contractOperationMode = 1 \uff0c\u4ee5 jar \u5305\u6a21\u5f0f\u8fd0\u884cRepChain\uff0c\u8be5\u914d\u7f6e\u9879\u987b\u6539\u4e3a1 6. system.trans_create_type=0 \uff0c\u63a5\u53d7\u4eceAPI\u63d0\u4ea4\u8fc7\u6765\u7684\u4ea4\u6613\uff08\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u4ee3\u8868\u7684\u662f\u8282\u70b9\u81ea\u52a8\u4ea7\u751f\u5e76\u63d0\u4ea4\u4ea4\u6613\uff0c\u4e3b\u8981\u662f\u7528\u6765\u6d4b\u8bd5\u7528\uff09 7. sytetem.storage.dbpath \uff0cleveldb\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u8eab\u4efd\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684 8. sytetem.storage.blockpath \uff0cblock\u7684\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u8eab\u4efd\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684 \u542f\u52a8\u65b9\u5f0f\u4e3a\u5728\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a # \u5148\u524d\u5728\u6253\u5305\u73af\u8282\u5df2\u7ecf\u6307\u5b9a\u4e86\u4e3b\u7c7b java -jar RepChain.jar \u6216 # \u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.Repchain \u542f\u52a8\u6210\u529f\u6807\u5fd7\u6709\u4e24\u79cd\u9a8c\u8bc1\u65b9\u5f0f \u901a\u8fc7API\u63a5\u53e3\u6765\u9a8c\u8bc1\u3002\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:9081/chaininfo/node \uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a\u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf\uff0c\u5219\u8868\u793a\u6210\u529f\uff1b\u6216\u8005\u662f\u5728\u7ec8\u7aef\u4e2d\u8f93\u5165 curl http://localhost:9081/chaininfo/node \uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a \u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf \uff0c\u5219\u8868\u793a\u6210\u529f \u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:9081/web/g1.html \uff0c\u5982\u679c\u51fa\u73b0\u5982\u4e0b\u754c\u9762\uff0c\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u7ea2\u6846\u4e2d\u53ef\u4ee5\u770b\u5230\u5165\u7f51\u7684\u8282\u70b9\uff0c\u5219\u6807\u8bc6\u6210\u529f \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0\uff1a \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650 \u5176\u4ed6\uff1a\u5982\u679c\u60f3\u8981\u5728\u540c\u4e00\u4e2aJVM\u4e0a\u6a21\u62df\u542f\u52a8\u5927\u4e8e10\u4e2a\u8282\u70b9\uff0c\u5373\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe6~N\u8282\u70b9\u6216\u8005\u4e1a\u52a1\u94fe6~N\u8282\u70b9\uff0c\u5728\u4e3b\u7c7b rep.app.RepChain \u4e2d\u589e\u52a0\u8282\u70b9\u5b9e\u4f8b \u51c6\u5907\u5de5\u4f5c 1. jks/identity-net \u6216\u8005 jks/credence-net \u76ee\u5f55\u4e0b\u76f8\u5e94\u7684\u8282\u70b9\u5bc6\u94a5\u5bf9\u4e0e\u8bc1\u4e66\u5e94\u662f6~N\u4e2a\uff0c\u4eff\u7167\u539f\u6709jks\u6587\u4ef6\u653e\u7f6e\u65b0\u751f\u6210\u7684jks\u6587\u4ef6\u5373\u53ef\uff0c\u53ef\u4f7f\u7528 Kse \u6216\u8005 \u4ee3\u7801 \u6765\u751f\u6210\u8282\u70b9\u5bc6\u94a5\u5bf9\u548c\u81ea\u7b7e\u540d\u8bc1\u4e66\uff0c\u5e76\u5c06\u8bc1\u4e66\u5bfc\u5165mytruststore.jks\u4e2d\uff0c\u6ce8\u610fJks\u6587\u4ef6\u540d\uff0c\u4ee5\u53ca\u5176\u4e2d\u5b58\u50a8\u7684\u5bc6\u94a5\u5bf9\u6216\u8005\u8bc1\u4e66\u7684\u522b\u540d\uff0c ***.nodex \uff0c\u4e0b\u56fe\u662fKse\u7684\u7b80\u5355\u4f7f\u7528\u793a\u4f8b \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u8eab\u4efd\u94fe\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5982\u4e0b\u56fe\uff1a 2.conf\u76ee\u5f55\u4e0b\u4e3a\u8282\u70b9\u914d\u7f6e\u6587\u4ef6\uff0c\u8eab\u4efd\u94fe\u65b0\u589e\u8282\u70b9\u4eff\u7167node1-node5\u8fdb\u884c\u914d\u7f6e\uff0c\u4e1a\u52a1\u94fe\u65b0\u589e\u8282\u70b9\u4eff\u7167node6-node10\u8fdb\u884c\u914d\u7f6e\u3002 3.\u4eff\u7167node1-node5\u5728\u4e3b\u7c7b rep.app.RepChain \u4e2d\u589e\u52a0\u8282\u70b9\u5b9e\u4f8b\u3002 \u542f\u52a8\u65b9\u5f0f \u8bf7\u67e5\u770b\u6e90\u7801 src/main/scala/rep/app/RepChain.scala java -cp RepChain.jar rep.app.RepChain jar\u5305\u90e8\u7f72\u540e\uff08\u5355\u673a10\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u65b0\u589e\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66 \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u4e0e\u5355\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u533a\u522b\u5728\u4e8e\u591a\u673a\u591a\u8282\u70b9\u662f\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u540c\u4e00\u4e2a Jvm \u4e0a\u542f\u52a82\u4e2a\u8282\u70b9\u5206\u522b\u53c2\u4e0e\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7ec4\u7f51\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.Repchain_Single \u7f51\u7edc\u90e8\u7f72\u53ca\u542f\u52a8\u65b9\u5f0f \u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4 \u542f\u52a8\u65b9\u5f0f\u4ee5\u8eab\u4efd\u94fe\u8282\u70b9node1\u548c\u4e1a\u52a1\u94fe\u8282\u70b9node6\u4e3a\u4f8b\uff0cnode1\u548cnode6\u9700\u8981\u90e8\u7f72\u5728\u540c\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\uff0cnode1\u548cnode6\u7684LevelDB\uff08 system.conf \u4e2d sytetem.storage.dbpath \u548c sytetem.storage.blockpath \uff09\u914d\u7f6e\u4e3a\u540c\u4e00\u4e2a\u5b58\u50a8\u76ee\u5f55\uff1a \u5728node1\u548cnode6\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a java -jar RepChain.jar \"121000005l35120456.node1\" \"330597659476689954.node6\" # \u6216\u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.Repchain_Single \"121000005l35120456.node1\" \"330597659476689954.node6\" ip\u4e0eport\u7684\u914d\u7f6e \u975e NAT \u6216\u975e docker \u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51ip ca n o n ical.por t = 8082 # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9<seed-nodes>\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 hostname \u4e0e port \uff09 \u6ce8 \uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879<seed-nodes>\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879<seed-nodes>\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3 NAT \u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"139.10.1.3\" # \u5916\u90e8\u5730\u5740 ca n o n ical.por t = 8082 # \u5916\u90e8\u7aef\u53e3 bi n d.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51\u5730\u5740 bi n d.por t = 8082 # \u5c40\u57df\u7f51\u7aef\u53e3 } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u7684 3 \u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e86 1 \u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 \u5185\u90e8\u6216\u5916\u90e8 \u7684 hostname \u4e0e port \uff09 jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5 node1 \u548c node6 \u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4 \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5 \u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3 \u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25 \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0 \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650 \u8282\u70b9\u7ba1\u7406\u670d\u52a1 \u8282\u70b9\u7ba1\u7406\u670d\u52a1\u4e0e\u5355\u673a\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u6ee1\u8db3\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u5373\u53ef\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.RepChain_Management \u7f51\u7edc\u90e8\u7f72 \u5355\u94fe\u6a21\u5f0f\u4e0b\u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe 5 \u8282\u70b9\u548c\u4e1a\u52a1\u94fe 5 \u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9 \u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8eab\u4efd\u94fe\u8282\u70b9\u548c\u4e00\u4e2a\u4e1a\u52a1\u94fe\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4 \u542f\u52a8\u65b9\u5f0f \u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u5047\u8bbe\u5728\u4e00\u4e2a\u670d\u52a1\u5668\u4e0a\u6709node1\u548cnode6\uff0c\u5728\u5176\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a java -jar RepChain.jar \"121000005l35120456.node1\" \"330597659476689954.node6\" # \u6216\u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.RepChain_Management \"121000005l35120456.node1\" \"330597659476689954.node6\" ip\u4e0eport\u7684\u914d\u7f6e \u975e NAT \u6216\u975e docker \u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51ip ca n o n ical.por t = 8082 # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\\<seed-nodes>\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 hostname \u4e0e port \uff09 \u6ce8 \uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879\\<seed-nodes>\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879\\<seed-nodes>\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3 NAT \u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"139.10.1.3\" # \u5916\u90e8\u5730\u5740 ca n o n ical.por t = 8082 # \u5916\u90e8\u7aef\u53e3 bi n d.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51\u5730\u5740 bi n d.por t = 8082 # \u5c40\u57df\u7f51\u7aef\u53e3 } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u7684 3 \u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e86 1 \u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 \u5185\u90e8\u6216\u5916\u90e8 \u7684 hostname \u4e0e port \uff09 jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5 node1 \u548c node6 \u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4 \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5 \u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3 \u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25 \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0\uff1a \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650 \u9644\u5f55 \u521b\u4e16\u5757\u7684\u6784\u5efa \u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.identity.CreateIdentityGenesisInfo \uff08\u8eab\u4efd\u94fe\uff09 \u548c rep.utils.credence.CreateCredenceGenesisInfo \uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09\u548c json/credence-net/genesis.json \uff08\u4e1a\u52a1\u94fe\uff09 \u8282\u70b9\u5bc6\u94a5\u66ff\u6362 \u9ed8\u8ba4\u4e3a5\u4e2a\u8eab\u4efd\u94fe\u8282\u70b9\u548c5\u4e2a\u4e1a\u52a1\u94fe\u8282\u70b9\uff0c\u6bcf\u4e2a\u8282\u70b9\u6709\u4e00\u4e2a\u5bc6\u94a5\u5bf9\uff0c \u5b9e\u9645 \u5728\u751f\u4ea7\u73af\u5883\u90e8\u7f72RepChain\u9700\u8981\u66f4\u6362\u5f00\u6e90\u4ed3\u5e93\u4e2d\u7684\u5bc6\u94a5\uff0c\u4f7f\u7528 KeyStoreExplorer \uff08\u6216\u8005\u4f7f\u7528 \u4ee3\u7801 \uff09\u5373\u53ef\u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u5bfc\u51fa\u8bc1\u4e66 \u5bf9\u4e8e\u8eab\u4efd\u94fe 1.\u4e3a\u6bcf\u4e2a\u8282\u70b9\u66ff\u6362\u5bc6\u94a5\uff0c\u5047\u8bbe\u67095\u4e2a\u8282\u70b9\uff0c\u5219\u4f7f\u7528 kse \u751f\u62105\u4e2a\u5305\u542b\u5bc6\u94a5\u5bf9\uff08\u9ed8\u8ba4\u4f7f\u7528 secp256r1 \uff09\u7684 jks \u5e76\u5bfc\u51fa\u8bc1\u4e66\uff0c\u66f4\u6362 jks/identity-net \u76ee\u5f55\u4e0b\u7684\u5bc6\u94a5\u4e0e\u8bc1\u4e66 2.\u4f7f\u7528 kse \u5c06\u5404\u4e2a\u8282\u70b9\u7684\u8bc1\u4e66\u5bfc\u5165\u5230 mytrustStore.jks \u4e2d 3.\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.identity.CreateIdentityGenesisInfo \uff0c\u91cd\u65b0\u751f\u6210\u7684\u8eab\u4efd\u94fe\u521b\u4e16\u5757\u6587\u4ef6\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09 \u5bf9\u4e8e\u4e1a\u52a1\u94fe 1.\u4e3a\u6bcf\u4e2a\u8282\u70b9\u66ff\u6362\u5bc6\u94a5\uff0c\u5047\u8bbe\u67095\u4e2a\u8282\u70b9\uff0c\u5219\u4f7f\u7528 kse \u751f\u62105\u4e2a\u5305\u542b\u5bc6\u94a5\u5bf9\uff08\u9ed8\u8ba4\u4f7f\u7528 secp256r1 \uff09\u7684 jks \u5e76\u5bfc\u51fa\u8bc1\u4e66\uff0c\u66f4\u6362 jks/credence-net \u76ee\u5f55\u4e0b\u7684\u5bc6\u94a5\u4e0e\u8bc1\u4e66 2.\u4f7f\u7528 kse \u5c06\u5404\u4e2a\u8282\u70b9\u7684\u8bc1\u4e66\u5bfc\u5165\u5230 mytrustStore.jks \u4e2d 3.\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.credence.CreateCredenceGenesisInfo \uff0c\u91cd\u65b0\u751f\u6210\u7684\u4e1a\u52a1\u94fe\u521b\u4e16\u5757\u6587\u4ef6\u5728 json/credence-net/genesis.json \uff08\u4e1a\u52a1\u94fe\uff09 \u65b0\u589e\u8282\u70b9 \u65b0\u589e\u8282\u70b9\u9700\u8981\u505c\u673a\u5e76\u91cd\u542f\u7f51\u7edc \u5047\u8bbe\u73b0\u5728\u60f3\u589e\u52a0\u7ec4\u7f51\u8282\u70b9\uff0c\u5219\u9700\u8981\u751f\u6210\u65b0\u7684 jks \uff0c\u5e76\u653e\u5230 jks/identity \u4ee5\u53ca jks/credence \u76ee\u5f55\u4e0b\uff0c\u5e76\u4e14\u5c06\u8bc1\u4e66\u5bfc\u5165\u5230 mytrustStore.jks \u4e2d\uff0c\u6240\u6709\u8282\u70b9\u7684 mystruststore.jks \u90fd\u9700\u8981\u66f4\u65b0\uff1b\u8fd8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:7081/swagger/index.html \uff0c\u901a\u8fc7\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u7684API\u542f\u52a8\u505c\u6b62\u8282\u70b9\uff08\u9ed8\u8ba4http\u670d\u52a1\u7684\u7aef\u53e3\u53f7\u4e3a7081\uff09\u3002 \u589e\u52a0\u7684\u662f\u5171\u8bc6\u8282\u70b9 \u9700\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u5c06\u8be5\u8282\u70b9\u914d\u7f6e\u5230\u5171\u8bc6\u5217\u8868\u4e2d\uff0c\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u9700\u8981 \u4fee\u6539\u914d\u7f6e\u9879 \uff1a system.vote.vote_node_list \uff08\u914d\u7f6e\u9879\u5728conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\uff09 \u589e\u52a0\u7684\u662f\u540c\u6b65\u8282\u70b9 \u66f4\u65b0\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684 mytruststore.jks \uff0c\u4e0d\u7528\u4fee\u6539\u914d\u7f6e \u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9 \uff1a \u5982\u679c\u73b0\u5728\u6ca1\u6709\u5386\u53f2\u533a\u5757\u6570\u636e\uff0c\u5219\u91cd\u6784 genesis.json \uff0c\u5c06\u65b0\u8282\u70b9\u7684\u8d26\u6237\u4e0e\u8bc1\u4e66\u6ce8\u518c \u5982\u679c\u73b0\u5728\u6709\u5386\u53f2\u6570\u636e\uff0c\u5219\u65e0\u9700\u91cd\u6784 genesis.json \uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8c03\u7528 \u8d26\u6237\u8bc1\u4e66\u7ba1\u7406\u5408\u7ea6 \u6765\u6ce8\u518c\u8d26\u6237\u6216\u8bc1\u4e66 \u5982\u679c\u4e1a\u52a1\u903b\u8f91\u4e0d\u6d89\u53ca\u5230\u65b0\u8282\u70b9\u7684\u8d26\u6237\uff0c\u5219\u8be5\u6b65\u9aa4\u975e\u5fc5\u987b\uff0c\u56e0\u4e3a\u9ed8\u8ba4 RepChain \u4f1a\u4ece mytrustStore.jks \u4e2d\u52a0\u8f7d\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u65b0\u589e\u8282\u70b9\u6240\u63d0\u4ea4\u7684\u7b7e\u540d\u4ea4\u6613\u80fd\u591f\u88ab\u63a5\u53d7","title":"\u5b89\u88c5\u90e8\u7f72"},{"location":"deploy/#repchain","text":"","title":"RepChain\u90e8\u7f72"},{"location":"deploy/#_1","text":"\u5355\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u540c\u65f6\u8d1f\u8d23\u4e1a\u52a1 1.\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\u7684levelDB 2.\u8981\u6784\u5efa\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo \uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09 RepChain\u6240\u652f\u6301\u7684\u7f51\u7edc\u73af\u5883 \u652f\u6301\u5c40\u57df\u7f51\u3001\u4e13\u7f51\u3001\u516c\u7f51\u90e8\u7f72\uff0c NAT \u6216 docker \u73af\u5883 RepChain\u6240\u652f\u6301\u7684\u8f6f\u786c\u4ef6\u73af\u5883 \u786c\u4ef6\u73af\u5883\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\u3001RISK-V\uff1b\u8f6f\u4ef6\u73af\u5883\uff1a\u865a\u62df\u673a\u3001Docker \u90e8\u7f72\u548c\u8fd0\u884cRepChain\u8282\u70b9\u7684\u65b9\u5f0f \u4f7f\u7528 jar \u5305\u90e8\u7f72\uff0c\u8fd0\u884c\u5728JVM\u4e0a\uff08jdk11+\uff0c\u63a8\u8350jdk13+\uff09\uff0c\u57fa\u4e8eJAVA\u7684\u8de8\u5e73\u53f0\u90e8\u7f72\uff0cRepChain\u652f\u6301\u90e8\u7f72\u5728\u7edd\u5927\u90e8\u5206\u7684Windows\u3001Linux\u4e0eMacOS\u7cfb\u7edf\u4e0a RepChain\u7684\u5355\u94fe\u90e8\u7f72\u6a21\u5f0f \u53ef\u4ee5\u5206\u4e3a\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u3001\u8282\u70b9\u7ba1\u7406\u670d\u52a1 1. \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 \u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u8fd0\u884c\u5728\u540c\u4e00\u5bbf\u4e3b\u673a\u4e0a\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u7f16\u5199\u597d\u7684\u5408\u7ea6 2. \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 \u53ef\u4ee5\u7406\u89e3\u4e3a\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u5404\u4e2a\u8282\u70b9\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u5bbf\u4e3b\u673a\u4e0a 3. \u8282\u70b9\u7ba1\u7406\u670d\u52a1 \u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u53ef\u4ee5\u5728\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u4e5f\u53ef\u4ee5\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b","title":"\u2014\u2014\u5355\u94fe\u6a21\u5f0f"},{"location":"deploy/#_2","text":"\u73af\u5883\u9700\u6c42\uff1a 1.\u786c\u4ef6\u7684\u63a8\u8350\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G\uff0cDisk\uff1a100G \u6240\u8ff0\u914d\u7f6e\u662f\u63a8\u8350\u7684 \u57fa\u7840\u8fd0\u884c\u73af\u5883 \u7684\u786c\u4ef6\u914d\u7f6e\uff0c\u6253\u5305\u7f16\u8bd1\u73af\u5883\u7684\u914d\u7f6e\u53ef\u964d\u4f4e\uff08\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u964d\u4f4e\u6216\u63d0\u5347\u914d\u7f6e\uff09 2.Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350 Azul-zuluJdk \uff0c\u4e5f\u53ef\u4f7f\u7528 Oracle-Jdk 3.\u64cd\u4f5c\u7cfb\u7edf\uff1a\u53ef\u4ee5\u5b89\u88c5Jdk-13\u7684\u7cfb\u7edf 4.\u652f\u6301\u67b6\u6784\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\uff0c\u76ee\u524d\u4e5f\u652f\u6301\uff1aRISC-V\uff1b\u5982\u679c\u662fArm-64\u67b6\u6784\uff0c\u5219\u9700\u8981\u66ff\u6362RepChain\u4ee3\u7801\u9ed8\u8ba4\u6240\u4f9d\u8d56\u7684leveldbjni\u7684\u5305\uff0c\u66ff\u6362\u65b9\u5f0f\u53c2\u89c1\u540e\u7eed\u7684\u4ecb\u7ecd 5. Git \uff1a\u7528\u6765\u4e0b\u8f7dRepChain\u7684\u6e90\u7801\uff08\u975e\u5fc5\u987b\uff0c\u53ef\u76f4\u63a5\u4e0b\u8f7d \u538b\u7f29\u5305 \uff09 6.\u7f16\u8bd1\u5de5\u5177\uff1a Sbt \uff0c\u5b89\u88c5\u65b9\u5f0f\u89c1 \u5b98\u65b9\u6559\u7a0b \uff1b \u6216 \u5b89\u88c5\u4e86 Scala \u63d2\u4ef6\u7684 IDEA \uff0c\u63d2\u4ef6\u5b89\u88c5\u65b9\u5f0f\u89c1 \u5b98\u65b9\u6559\u7a0b \u4e0b\u8f7d\u6e90\u7801\uff1a 1.\u5982\u679c\u6709\u5b89\u88c5Git\uff0c\u4e14\u4e3aGit\u914d\u7f6e\u4e86\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\uff0c\u5219\u4f7f\u7528GitBash\u6216\u8005\u7cfb\u7edf\u81ea\u5e26Terminal\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a git clone https://gitee.com/BTAJL/repchain.git cd repchain git fetch git checkout -b dev_jdk13_2.0.0.0 RepChain_2.0.0_RC \u5982\u4e0d\u4f7f\u7528git\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d \u538b\u7f29\u5305 \uff0c\u5e76\u89e3\u538b\u4e3arepchain 2.\u627e\u5230repchain\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\uff0c\u4fee\u6539build.sbt\u4e2d\u7684 mainClass \uff08Jar\u5305\u4e3b\u7c7b\uff09\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.Repchain \uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.Repchain_Single \uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u8282\u70b9\u7ba1\u7406\u670d\u52a1 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.RepChain_Management \uff0c\u5982\u4e0b\u6240\u793a\uff1a # \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.Repchain\" ) # \u6216 # \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.Repchain_Single\" ) # \u6216 # \u8282\u70b9\u7ba1\u7406\u670d\u52a1 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.RepChain_Management\" ) RepChain\u9ed8\u8ba4\u4f7f\u7528\u7684 leveldbjni \u5305\u4e0d\u652f\u6301Arm-64\uff0c\u56e0\u6b64\u5982\u679c\u8981\u5c06RepChain\u90e8\u7f72\u5728Arm-64\u67b6\u6784\u7684\u670d\u52a1\u5668\uff0c\u9700\u8981\u5c06\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\u4e2d\u914d\u7f6e\u7684 leveldb-jni \u4f9d\u8d56\u5305\u66ff\u6362\uff08\u53ef\u4ee5\u81ea\u5df1\u6839\u636e leveldb-jni \u7684\u8bf4\u660e\u6587\u6863\u81ea\u884c\u7f16\u8bd1\uff09\uff0c\u5982\u4e0b\u6240\u793a\uff1a # \u5c06 libraryDependencies += \"org.fusesource.leveldbjni\" % \"leveldbjni-all\" % \"1.8\" # \u66ff\u6362\u4e3a libraryDependencies += \"com.github.huangtianhua\" % \"leveldbjni-linux64-aarch64\" % \"1.9\" # \u6216 libraryDependencies += \"org.openlabtesting.leveldbjni\" % \"leveldbjni-linux64-aarch64\" % \"1.8\" 3.\u7f16\u8bd1\u5e76\u6253\u5305 \u6709\u4e24\u79cd\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u5728IDEA\u4e2d\u4f7f\u7528 sbt-shell \uff08\u5b89\u88c5\u4e86Scala\u63d2\u4ef6\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u53e6\u4e00\u79cd\u662f\u5728\u7ec8\u7aef\u4f7f\u7528 sbt-repl \uff08\u5b89\u88c5\u4e86Sbt\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u8be6\u7ec6\u8bf4\u660e\u8fc7\u7a0b\u53ef\u53c2\u8003\u540e\u9762\u7684\u6253\u5305\u6f14\u793a\uff1a \u5728IDEA\u4e2d\u6253\u5f00 sbt shell \u5e76\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1aclean->compile->assembly\uff0c\u5982\u4e0b\u6240\u793a\uff1a sbt:RepChain> clean sbt:RepChain> compile sbt:RepChain> assembly \u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528 sbt-repl \uff0c\u8f93\u5165 sbt \u547d\u4ee4\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a > clean > compile > assembly 4.\u6253\u5305\u597d\u7684RepChain.jar\u5b58\u653e\u5728 repchain/target/scala-2.12/RepChain.jar \uff0c\u5c06Jar\u5305\u79fb\u52a8\u5230\u9879\u76ee\u6839\u76ee\u5f55\u4e0b \u6253\u5305\u8fc7\u7a0b\u6f14\u793a\uff1a 1.\u4f7f\u7528IDEA\u4e2d\u7684 sbt-shell 2.\u4f7f\u7528\u7ec8\u7aef\uff08Terminal or cmd\uff09\uff0c\u4e0b\u9762\u4ee5mac\u4e0b\u7684\u7ec8\u7aef\u4e3a\u4f8b\uff08Windows\u6216Linux\u7c7b\u4f3c\uff09","title":"\u7f16\u8bd1\u6253\u5305"},{"location":"deploy/#_3","text":"\u5728\u4e0a\u4e00\u5c0f\u8282\u4e2d\uff0c\u4e3b\u8981\u53d9\u8ff0\u4e86\u5982\u4f55\u5bf9RepChain\u7684\u6e90\u7801\u8fdb\u884c\u4e86\u7f16\u8bd1\u5e76\u6253\u5305\u5f97\u5230RepChain.jar\uff0c\u63a5\u4e0b\u6765\u4f7f\u7528RepChain.jar\u6765\u90e8\u7f72RepChain\u7f51\u7edc\uff0cRepChain\u7684\u90e8\u7f72\u6709\u4e09\u79cd\u65b9\u5f0f\uff1a\u4e00\u662f\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\uff1b\u4e8c\u662f\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff1b\u4e09\u662f\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u3002\u63a5\u4e0b\u6765\u5206\u522b\u505a\u8be6\u7ec6\u4ecb\u7ecd","title":"\u90e8\u7f72"},{"location":"deploy/#_4","text":"\u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe 5 \u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a85\u4e2a\u8282\u70b9\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.Repchain \u73af\u5883\u9700\u6c42\uff1a \u786c\u4ef6\u7684\u57fa\u7840\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350 Azul-zuluJdk \uff0c\u4e5f\u53ef\u4f7f\u7528 Oracle-Jdk \u914d\u7f6e\u6587\u4ef6 \u4ee5node1\u4e3a\u4f8b\uff08node2-node5\u7c7b\u4f3c\uff09\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3a repchain/conf/121000005l35120456.node1/system.conf system.conf \u4e2d\u9700\u8981\u6ce8\u610f\u7684\u914d\u7f6e\u9879 1. system.httpServicePort= 9081 \uff0cRepChain\u7684http\u670d\u52a1\u7684\u7aef\u53e3 2. system.contractOperationMode = 1 \uff0c\u4ee5 jar \u5305\u6a21\u5f0f\u8fd0\u884cRepChain\uff0c\u8be5\u914d\u7f6e\u9879\u987b\u6539\u4e3a1 3. system.trans_create_type=0 \uff0c\u63a5\u53d7\u4eceAPI\u63d0\u4ea4\u8fc7\u6765\u7684\u4ea4\u6613\uff08\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u4ee3\u8868\u7684\u662f\u8282\u70b9\u81ea\u52a8\u4ea7\u751f\u5e76\u63d0\u4ea4\u4ea4\u6613\uff0c\u4e3b\u8981\u662f\u7528\u6765\u6d4b\u8bd5\u7528\uff09 4. sytetem.storage.dbpath \uff0cleveldb\u5b58\u50a8\u4f4d\u7f6e 5. sytetem.storage.blockpath \uff0cblock\u7684\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e \u542f\u52a8\u65b9\u5f0f\u4e3a\u5728\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a # \u5148\u524d\u5728\u6253\u5305\u73af\u8282\u5df2\u7ecf\u6307\u5b9a\u4e86\u4e3b\u7c7b java -jar RepChain.jar \u6216 # \u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.Repchain \u542f\u52a8\u6210\u529f\u6807\u5fd7\u6709\u4e24\u79cd\u9a8c\u8bc1\u65b9\u5f0f \u901a\u8fc7API\u63a5\u53e3\u6765\u9a8c\u8bc1\u3002\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:9081/chaininfo/node \uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a\u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf\uff0c\u5219\u8868\u793a\u6210\u529f\uff1b\u6216\u8005\u662f\u5728\u7ec8\u7aef\u4e2d\u8f93\u5165 curl http://localhost:9081/chaininfo/node \uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a \u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf \uff0c\u5219\u8868\u793a\u6210\u529f \u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:9081/web/g1.html \uff0c\u5982\u679c\u51fa\u73b0\u5982\u4e0b\u754c\u9762\uff0c\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u7ea2\u6846\u4e2d\u53ef\u4ee5\u770b\u5230\u5165\u7f51\u7684\u8282\u70b9\uff0c\u5219\u6807\u8bc6\u6210\u529f \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0\uff1a \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650 \u5176\u4ed6\uff1a\u5982\u679c\u60f3\u8981\u5728\u540c\u4e00\u4e2aJVM\u4e0a\u6a21\u62df\u542f\u52a8\u5927\u4e8e5\u4e2a\u8282\u70b9\uff0c\u5373\u5355\u673a\u6a21\u62df6~N\u8282\u70b9\uff0c\u5728\u4e3b\u7c7b rep.app.RepChain \u4e2d\u589e\u52a0\u8282\u70b9\u5b9e\u4f8b \u51c6\u5907\u5de5\u4f5c 1. jks/identity-net \u76ee\u5f55\u4e0b\u76f8\u5e94\u7684\u8282\u70b9\u5bc6\u94a5\u5bf9\u4e0e\u8bc1\u4e66\u5e94\u662f6~N\u4e2a\uff0c\u4eff\u7167\u539f\u6709jks\u6587\u4ef6\u653e\u7f6e\u65b0\u751f\u6210\u7684jks\u6587\u4ef6\u5373\u53ef\uff0c\u53ef\u4f7f\u7528 Kse \u6216\u8005 \u4ee3\u7801 \u6765\u751f\u6210\u8282\u70b9\u5bc6\u94a5\u5bf9\u548c\u81ea\u7b7e\u540d\u8bc1\u4e66\uff0c\u5e76\u5c06\u8bc1\u4e66\u5bfc\u5165mytruststore.jks\u4e2d\uff0c\u6ce8\u610fJks\u6587\u4ef6\u540d\uff0c\u4ee5\u53ca\u5176\u4e2d\u5b58\u50a8\u7684\u5bc6\u94a5\u5bf9\u6216\u8005\u8bc1\u4e66\u7684\u522b\u540d\uff0c ***.nodex \uff0c\u4e0b\u56fe\u662fKse\u7684\u7b80\u5355\u4f7f\u7528\u793a\u4f8b \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u8eab\u4efd\u94fe\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5982\u4e0b\u56fe\uff1a 2.conf\u76ee\u5f55\u4e0b\u4e3a\u8282\u70b9\u914d\u7f6e\u6587\u4ef6\uff0c\u65b0\u589e\u8282\u70b9node6-nodeN\u4eff\u7167node1-node5\u8fdb\u884c\u914d\u7f6e\uff0c\u9700\u8981\u989d\u5916\u6ce8\u610f\u4ee5\u4e0b\u914d\u7f6e\u9879\uff1a 1. chain_cert_name = \"identity-net:951002007l78123233.super_admin\" \uff0c\u5355\u94fe\u6a21\u5f0f\u4e0b\u8bbe\u7f6e\u4ee5 identity-net \u8eab\u4efd\u94fe\u6807\u8bc6\u7684\u7ba1\u7406\u5458super_admin 2. chain_network_id = \"identity-net\" \uff0c\u7ec4\u7f51id\uff0c\u5355\u94fe\u6a21\u5f0f\u4e0b\u8bbe\u7f6e\u4e3a identity-net \uff0c\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26 3. basic_chain_id = \"identity-net\" \uff0c\u5404\u79cd\u6a21\u5f0f\u4e0b\u5747\u8bbe\u7f6e\u4e3a identity-net 3.\u4eff\u7167node1-node5\u5728\u4e3b\u7c7b rep.app.RepChain \u4e2d\u589e\u52a0node6-nodeN\u8282\u70b9\u5b9e\u4f8b 4.\u7f16\u8bd1\u6253\u5305\u4ee5\u53ca\u90e8\u7f72\u7684\u5176\u4ed6\u5185\u5bb9\u4e0e\u524d\u8ff0\u4e00\u81f4 \u542f\u52a8\u65b9\u5f0f \u8bf7\u67e5\u770b\u6e90\u7801 src/main/scala/rep/app/RepChain.scala java -cp RepChain.jar rep.app.RepChain jar\u5305\u90e8\u7f72\u540e\uff08\u5355\u673a5\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c6~N\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66","title":"\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9"},{"location":"deploy/#_5","text":"\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u4e0e\u5355\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u533a\u522b\u5728\u4e8e\u591a\u673a\u591a\u8282\u70b9\u662f\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u540c\u4e00\u4e2a Jvm \u4e0a\u542f\u52a81\u4e2a\u8282\u70b9\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.Repchain_Single \u7f51\u7edc\u90e8\u7f72 \u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4 \u542f\u52a8\u65b9\u5f0f\u4ee5node1\u3001node2\u7684\u4e3a\u4f8b \u5728node1\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a java -jar RepChain.jar \"121000005l35120456.node1\" # \u6216\u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.Repchain_Single \"121000005l35120456.node1\" \u5728node2\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a java -jar RepChain.jar \"12110107bi45jh675g.node2\" # \u6216\u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.Repchain_Single \"12110107bi45jh675g.node2\" ip\u4e0eport\u7684\u914d\u7f6e \u975e NAT \u6216\u975e docker \u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51ip ca n o n ical.por t = 8082 # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9<seed-nodes>\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 hostname \u4e0e port \uff09 \u6ce8 \uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879<seed-nodes>\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879<seed-nodes>\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3 NAT \u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"139.10.1.3\" # \u5916\u90e8\u5730\u5740 ca n o n ical.por t = 8082 # \u5916\u90e8\u7aef\u53e3 bi n d.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51\u5730\u5740 bi n d.por t = 8082 # \u5c40\u57df\u7f51\u7aef\u53e3 } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u7f51\u7edc\u4e2d\u7684 3 \u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e86 1 \u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 \u5185\u90e8\u6216\u5916\u90e8 \u7684 hostname \u4e0e port \uff09 jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5 node1 \u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4 \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5 \u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3 \u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25 \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0 \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650","title":"\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9"},{"location":"deploy/#_6","text":"\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u4e0e\u5355\u673a\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a85\u4e2a\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u6ee1\u8db3\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u5373\u53ef\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.RepChain_Management \u7f51\u7edc\u90e8\u7f72 \u5355\u94fe\u6a21\u5f0f\u4e0b\u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe 5 \u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a85\u4e2a\u8282\u70b9 \u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4 \u542f\u52a8\u65b9\u5f0f \u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u5047\u8bbe\u5728\u4e00\u4e2a\u670d\u52a1\u5668\u4e0a\u6709node1-node5\uff0c\u5728\u5176\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a java -jar RepChain.jar \"121000005l35120456.node1\" \"12110107bi45jh675g.node2\" \"122000002n00123567.node3\" \"921000005k36123789.node4\" \"921000006e0012v696.node5\" ip\u4e0eport\u7684\u914d\u7f6e \u975e NAT \u6216\u975e docker \u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51ip ca n o n ical.por t = 8082 # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9<seed-nodes>\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 hostname \u4e0e port \uff09 \u6ce8 \uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879<seed-nodes>\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879<seed-nodes>\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3 NAT \u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"139.10.1.3\" # \u5916\u90e8\u5730\u5740 ca n o n ical.por t = 8082 # \u5916\u90e8\u7aef\u53e3 bi n d.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51\u5730\u5740 bi n d.por t = 8082 # \u5c40\u57df\u7f51\u7aef\u53e3 } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u7f51\u7edc\u4e2d\u7684 3 \u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e86 1 \u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 \u5185\u90e8\u6216\u5916\u90e8 \u7684 hostname \u4e0e port \uff09 jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5 node1 \u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4 \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5 \u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3 \u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25 \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0 \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650","title":"\u8282\u70b9\u7ba1\u7406\u670d\u52a1"},{"location":"deploy/#_7","text":"","title":"\u9644\u5f55"},{"location":"deploy/#_8","text":"\u8981\u6784\u5efa\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo \uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09","title":"\u521b\u4e16\u5757\u7684\u6784\u5efa"},{"location":"deploy/#_9","text":"\u9ed8\u8ba4\u4e3a5\u8282\u70b9\uff0c\u6bcf\u4e2a\u8282\u70b9\u6709\u4e00\u4e2a\u5bc6\u94a5\u5bf9\uff0c \u5b9e\u9645 \u5728\u751f\u4ea7\u73af\u5883\u90e8\u7f72RepChain\u9700\u8981\u66f4\u6362\u5f00\u6e90\u4ed3\u5e93\u4e2d\u7684\u5bc6\u94a5\uff0c\u4f7f\u7528 KeyStoreExplorer \uff08\u6216\u8005\u4f7f\u7528 \u4ee3\u7801 \uff09\u5373\u53ef\u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u5bfc\u51fa\u8bc1\u4e66 \u4e3a\u6bcf\u4e2a\u8282\u70b9\u66ff\u6362\u5bc6\u94a5\uff0c\u5047\u8bbe\u67095\u4e2a\u8282\u70b9\uff0c\u5219\u4f7f\u7528 kse \u751f\u62105\u4e2a\u5305\u542b\u5bc6\u94a5\u5bf9\uff08\u9ed8\u8ba4\u4f7f\u7528 secp256r1 \uff09\u7684 jks \u5e76\u5bfc\u51fa\u8bc1\u4e66\uff0c\u66f4\u6362 jks/identity-net \u76ee\u5f55\u4e0b\u7684\u5bc6\u94a5\u4e0e\u8bc1\u4e66 \u4f7f\u7528 kse \u5c06\u5404\u4e2a\u8282\u70b9\u7684\u8bc1\u4e66\u5bfc\u5165\u5230 mytrustStore.jks \u4e2d \u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo \uff0c\u91cd\u65b0\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09","title":"\u8282\u70b9\u5bc6\u94a5\u66ff\u6362"},{"location":"deploy/#_10","text":"\u65b0\u589e\u8282\u70b9\u9700\u8981\u505c\u673a\u5e76\u91cd\u542f\u7f51\u7edc \u5047\u8bbe\u73b0\u5728\u60f3\u589e\u52a0\u7ec4\u7f51\u8282\u70b9\uff0c\u5219\u9700\u8981\u751f\u6210\u65b0\u7684 jks \uff0c\u5e76\u653e\u5230 jks/identity \u76ee\u5f55\u4e0b\uff0c\u5e76\u4e14\u5c06\u8bc1\u4e66\u5bfc\u5165\u5230 mytrustStore.jks \u4e2d\uff0c\u6240\u6709\u8282\u70b9\u7684 mystruststore.jks \u90fd\u9700\u8981\u66f4\u65b0\uff1b\u8fd8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:7081/swagger/index.html \uff0c\u901a\u8fc7\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u7684API\u542f\u52a8\u505c\u6b62\u8282\u70b9\uff08\u9ed8\u8ba4http\u670d\u52a1\u7684\u7aef\u53e3\u53f7\u4e3a7081\uff09\u3002 \u589e\u52a0\u7684\u662f\u5171\u8bc6\u8282\u70b9 \u9700\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u5c06\u8be5\u8282\u70b9\u914d\u7f6e\u5230\u5171\u8bc6\u5217\u8868\u4e2d\uff0c\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u9700\u8981 \u4fee\u6539\u914d\u7f6e\u9879 \uff1a system.vote.vote_node_list \uff08\u914d\u7f6e\u9879\u5728conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\uff09 \u589e\u52a0\u7684\u662f\u540c\u6b65\u8282\u70b9 \u66f4\u65b0\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684 mytruststore.jks \uff0c\u4e0d\u7528\u4fee\u6539\u914d\u7f6e \u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9 \uff1a \u5982\u679c\u73b0\u5728\u6ca1\u6709\u5386\u53f2\u533a\u5757\u6570\u636e\uff0c\u5219\u91cd\u6784 genesis.json \uff0c\u5c06\u65b0\u8282\u70b9\u7684\u8d26\u6237\u4e0e\u8bc1\u4e66\u6ce8\u518c \u5982\u679c\u73b0\u5728\u6709\u5386\u53f2\u6570\u636e\uff0c\u5219\u65e0\u9700\u91cd\u6784 genesis.json \uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8c03\u7528 \u8d26\u6237\u8bc1\u4e66\u7ba1\u7406\u5408\u7ea6 \u6765\u6ce8\u518c\u8d26\u6237\u6216\u8bc1\u4e66 \u5982\u679c\u4e1a\u52a1\u903b\u8f91\u4e0d\u6d89\u53ca\u5230\u65b0\u8282\u70b9\u7684\u8d26\u6237\uff0c\u5219\u8be5\u6b65\u9aa4\u975e\u5fc5\u987b\uff0c\u56e0\u4e3a\u9ed8\u8ba4 RepChain \u4f1a\u4ece mytrustStore.jks \u4e2d\u52a0\u8f7d\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u65b0\u589e\u8282\u70b9\u6240\u63d0\u4ea4\u7684\u7b7e\u540d\u4ea4\u6613\u80fd\u591f\u88ab\u63a5\u53d7","title":"\u65b0\u589e\u8282\u70b9"},{"location":"deploy/#_11","text":"\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\u4ee5\u53ca\u64cd\u4f5c\u6743\u9650\uff0c\u4e1a\u52a1\u94fe\u53ea\u8d1f\u8d23\u4e1a\u52a1 1.\u8981\u914d\u7f6e\u4e3a\u5171\u4eablevelDB 2.\u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo \uff08\u8eab\u4efd\u94fe\uff09\u548c rep.utils.CreateGenesisInfo4NoTransaction \uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09\u548c json/credence-net/genesis.json \uff08\u4e1a\u52a1\u94fe\uff09 RepChain\u6240\u652f\u6301\u7684\u7f51\u7edc\u73af\u5883 \u652f\u6301\u5c40\u57df\u7f51\u3001\u4e13\u7f51\u3001\u516c\u7f51\u90e8\u7f72\uff0c NAT \u6216 docker \u73af\u5883 RepChain\u6240\u652f\u6301\u7684\u8f6f\u786c\u4ef6\u73af\u5883 \u786c\u4ef6\u73af\u5883\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\u3001RISK-V\uff1b\u8f6f\u4ef6\u73af\u5883\uff1a\u865a\u62df\u673a\u3001Docker \u90e8\u7f72\u548c\u8fd0\u884cRepChain\u8282\u70b9\u7684\u65b9\u5f0f \u4f7f\u7528 jar \u5305\u90e8\u7f72\uff0c\u8fd0\u884c\u5728JVM\u4e0a\uff08jdk11+\uff0c\u63a8\u8350jdk13+\uff09\uff0c\u57fa\u4e8eJAVA\u7684\u8de8\u5e73\u53f0\u90e8\u7f72\uff0cRepChain\u652f\u6301\u90e8\u7f72\u5728\u7edd\u5927\u90e8\u5206\u7684Windows\u3001Linux\u4e0eMacOS\u7cfb\u7edf\u4e0a RepChain\u7684\u5355\u94fe\u90e8\u7f72\u6a21\u5f0f \u53ef\u4ee5\u5206\u4e3a\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u3001\u8282\u70b9\u7ba1\u7406\u670d\u52a1 1. \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 \u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u8fd0\u884c\u5728\u540c\u4e00\u5bbf\u4e3b\u673a\u4e0a\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u7f16\u5199\u597d\u7684\u5408\u7ea6 2. \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 \u53ef\u4ee5\u7406\u89e3\u4e3a\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u5404\u4e2a\u8282\u70b9\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u5bbf\u4e3b\u673a\u4e0a 3. \u8282\u70b9\u7ba1\u7406\u670d\u52a1 \u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u53ef\u4ee5\u5728\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u4e5f\u53ef\u4ee5\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b","title":"\u2014\u2014\u591a\u94fe\u6a21\u5f0f\uff0c\u4e1a\u52a1\u94fe\u53ea\u8d1f\u8d23\u4e1a\u52a1"},{"location":"deploy/#_12","text":"\u73af\u5883\u9700\u6c42\uff1a 1.\u786c\u4ef6\u7684\u63a8\u8350\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G\uff0cDisk\uff1a100G \u6240\u8ff0\u914d\u7f6e\u662f\u63a8\u8350\u7684 \u57fa\u7840\u8fd0\u884c\u73af\u5883 \u7684\u786c\u4ef6\u914d\u7f6e\uff0c\u6253\u5305\u7f16\u8bd1\u73af\u5883\u7684\u914d\u7f6e\u53ef\u964d\u4f4e\uff08\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u964d\u4f4e\u6216\u63d0\u5347\u914d\u7f6e\uff09 2.Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350 Azul-zuluJdk \uff0c\u4e5f\u53ef\u4f7f\u7528 Oracle-Jdk 3.\u64cd\u4f5c\u7cfb\u7edf\uff1a\u53ef\u4ee5\u5b89\u88c5Jdk-13\u7684\u7cfb\u7edf 4.\u652f\u6301\u67b6\u6784\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\uff0c\u76ee\u524d\u4e5f\u652f\u6301\uff1aRISC-V\uff1b\u5982\u679c\u662fArm-64\u67b6\u6784\uff0c\u5219\u9700\u8981\u66ff\u6362RepChain\u4ee3\u7801\u9ed8\u8ba4\u6240\u4f9d\u8d56\u7684leveldbjni\u7684\u5305\uff0c\u66ff\u6362\u65b9\u5f0f\u53c2\u89c1\u540e\u7eed\u7684\u4ecb\u7ecd 5. Git \uff1a\u7528\u6765\u4e0b\u8f7dRepChain\u7684\u6e90\u7801\uff08\u975e\u5fc5\u987b\uff0c\u53ef\u76f4\u63a5\u4e0b\u8f7d \u538b\u7f29\u5305 \uff09 6.\u7f16\u8bd1\u5de5\u5177\uff1a Sbt \uff0c\u5b89\u88c5\u65b9\u5f0f\u89c1 \u5b98\u65b9\u6559\u7a0b \uff1b \u6216 \u5b89\u88c5\u4e86 Scala \u63d2\u4ef6\u7684 IDEA \uff0c\u63d2\u4ef6\u5b89\u88c5\u65b9\u5f0f\u89c1 \u5b98\u65b9\u6559\u7a0b \u4e0b\u8f7d\u6e90\u7801\uff1a 1.\u5982\u679c\u6709\u5b89\u88c5Git\uff0c\u4e14\u4e3aGit\u914d\u7f6e\u4e86\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\uff0c\u5219\u4f7f\u7528GitBash\u6216\u8005\u7cfb\u7edf\u81ea\u5e26Terminal\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a git clone https://gitee.com/BTAJL/repchain.git cd repchain git fetch git checkout -b dev_jdk13_2.0.0.0 RepChain_2.0.0_RC \u5982\u4e0d\u4f7f\u7528git\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d \u538b\u7f29\u5305 \uff0c\u5e76\u89e3\u538b\u4e3arepchain 2.\u627e\u5230repchain\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\uff0c\u4fee\u6539build.sbt\u4e2d\u7684 mainClass \uff08Jar\u5305\u4e3b\u7c7b\uff09\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.Repchain \uff08\u4e3b\u7c7b rep.app.Repchain \u4e2d\u9ed8\u8ba4\u53ea\u6709node1-node5\u51715\u4e2a\u8282\u70b9\uff0c\u591a\u94fe\u6a21\u5f0f\u4e0b\u4eff\u7167node1-node5\u5728\u4e3b\u7c7b rep.app.RepChain \u4e2d\u589e\u52a0node6-nodeN\u8282\u70b9\u5b9e\u4f8b\uff09\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.Repchain_Single \uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u8282\u70b9\u7ba1\u7406\u670d\u52a1 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.RepChain_Management \uff0c\u5982\u4e0b\u6240\u793a\uff1a # \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.Repchain\" ) # \u6216 # \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.Repchain_Single\" ) # \u6216 # \u8282\u70b9\u7ba1\u7406\u670d\u52a1 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.RepChain_Management\" ) RepChain\u9ed8\u8ba4\u4f7f\u7528\u7684 leveldbjni \u5305\u4e0d\u652f\u6301Arm-64\uff0c\u56e0\u6b64\u5982\u679c\u8981\u5c06RepChain\u90e8\u7f72\u5728Arm-64\u67b6\u6784\u7684\u670d\u52a1\u5668\uff0c\u9700\u8981\u5c06\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\u4e2d\u914d\u7f6e\u7684 leveldb-jni \u4f9d\u8d56\u5305\u66ff\u6362\uff08\u53ef\u4ee5\u81ea\u5df1\u6839\u636e leveldb-jni \u7684\u8bf4\u660e\u6587\u6863\u81ea\u884c\u7f16\u8bd1\uff09\uff0c\u5982\u4e0b\u6240\u793a\uff1a # \u5c06 libraryDependencies += \"org.fusesource.leveldbjni\" % \"leveldbjni-all\" % \"1.8\" # \u66ff\u6362\u4e3a libraryDependencies += \"com.github.huangtianhua\" % \"leveldbjni-linux64-aarch64\" % \"1.9\" # \u6216 libraryDependencies += \"org.openlabtesting.leveldbjni\" % \"leveldbjni-linux64-aarch64\" % \"1.8\" 3.\u7f16\u8bd1\u5e76\u6253\u5305 \u6709\u4e24\u79cd\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u5728IDEA\u4e2d\u4f7f\u7528 sbt-shell \uff08\u5b89\u88c5\u4e86Scala\u63d2\u4ef6\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u53e6\u4e00\u79cd\u662f\u5728\u7ec8\u7aef\u4f7f\u7528 sbt-repl \uff08\u5b89\u88c5\u4e86Sbt\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u8be6\u7ec6\u8bf4\u660e\u8fc7\u7a0b\u53ef\u53c2\u8003\u540e\u9762\u7684\u6253\u5305\u6f14\u793a\uff1a \u5728IDEA\u4e2d\u6253\u5f00 sbt shell \u5e76\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1aclean->compile->assembly\uff0c\u5982\u4e0b\u6240\u793a\uff1a sbt:RepChain> clean sbt:RepChain> compile sbt:RepChain> assembly \u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528 sbt-repl \uff0c\u8f93\u5165 sbt \u547d\u4ee4\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a > clean > compile > assembly 4.\u6253\u5305\u597d\u7684RepChain.jar\u5b58\u653e\u5728 repchain/target/scala-2.12/RepChain.jar \uff0c\u5c06Jar\u5305\u79fb\u52a8\u5230\u9879\u76ee\u6839\u76ee\u5f55\u4e0b \u6253\u5305\u8fc7\u7a0b\u6f14\u793a\uff1a 1.\u4f7f\u7528IDEA\u4e2d\u7684 sbt-shell 2.\u4f7f\u7528\u7ec8\u7aef\uff08Terminal or cmd\uff09\uff0c\u4e0b\u9762\u4ee5mac\u4e0b\u7684\u7ec8\u7aef\u4e3a\u4f8b\uff08Windows\u6216Linux\u7c7b\u4f3c\uff09","title":"\u7f16\u8bd1\u6253\u5305"},{"location":"deploy/#_13","text":"\u5728\u4e0a\u4e00\u5c0f\u8282\u4e2d\uff0c\u4e3b\u8981\u53d9\u8ff0\u4e86\u5982\u4f55\u5bf9RepChain\u7684\u6e90\u7801\u8fdb\u884c\u4e86\u7f16\u8bd1\u5e76\u6253\u5305\u5f97\u5230RepChain.jar\uff0c\u63a5\u4e0b\u6765\u4f7f\u7528RepChain.jar\u6765\u90e8\u7f72RepChain\u7f51\u7edc\uff0cRepChain\u7684\u90e8\u7f72\u6709\u4e09\u79cd\u65b9\u5f0f\uff1a\u4e00\u662f\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\uff1b\u4e8c\u662f\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff1b\u4e09\u662f\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u3002\u63a5\u4e0b\u6765\u5206\u522b\u505a\u8be6\u7ec6\u4ecb\u7ecd","title":"\u90e8\u7f72"},{"location":"deploy/#_14","text":"\u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe 5 \u8282\u70b9\u548c\u4e1a\u52a1\u94fe 5 \u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.Repchain \u73af\u5883\u9700\u6c42\uff1a \u786c\u4ef6\u7684\u57fa\u7840\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350 Azul-zuluJdk \uff0c\u4e5f\u53ef\u4f7f\u7528 Oracle-Jdk \u914d\u7f6e\u6587\u4ef6 \u8eab\u4efd\u94fe\u4ee5node1\u4e3a\u4f8b\uff08node2-node5\u7c7b\u4f3c\uff09\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3a repchain/conf/121000005l35120456.node1/system.conf system.conf \u4e2d\u9700\u8981\u6ce8\u610f\u7684\u914d\u7f6e\u9879 1. chain_cert_name = \"identity-net:951002007l78123233.super_admin\" \uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4ee5 identity-net \u6807\u8bc6\u7684\u7ba1\u7406\u5458super_admin 2. chain_network_id = \"identity-net\" \uff0c\u7ec4\u7f51id\uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4e3a identity-net \uff0c\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26 3. basic_chain_id = \"identity-net\" \uff0c\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u5747\u8bbe\u7f6e\u4e3a identity-net \uff0c \u8d26\u6237\u3001\u8bc1\u4e66\u7531\u8eab\u4efd\u94fe\u7ba1\u7406 4. system.httpServicePort= 9081 \uff0cRepChain\u7684http\u670d\u52a1\u7684\u7aef\u53e3 5. system.contractOperationMode = 1 \uff0c\u4ee5 jar \u5305\u6a21\u5f0f\u8fd0\u884cRepChain\uff0c\u8be5\u914d\u7f6e\u9879\u987b\u6539\u4e3a1 6. system.trans_create_type=0 \uff0c\u63a5\u53d7\u4eceAPI\u63d0\u4ea4\u8fc7\u6765\u7684\u4ea4\u6613\uff08\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u4ee3\u8868\u7684\u662f\u8282\u70b9\u81ea\u52a8\u4ea7\u751f\u5e76\u63d0\u4ea4\u4ea4\u6613\uff0c\u4e3b\u8981\u662f\u7528\u6765\u6d4b\u8bd5\u7528\uff09 7. sytetem.storage.dbpath \uff0cleveldb\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u4e1a\u52a1\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684 8. sytetem.storage.blockpath \uff0cblock\u7684\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u4e1a\u52a1\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684 \u4e1a\u52a1\u94fe\u4ee5node6\u4e3a\u4f8b\uff08node7-node10\u7c7b\u4f3c\uff09\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3a repchain/conf/330597659476689954.node6/system.conf system.conf \u4e2d\u9700\u8981\u6ce8\u610f\u7684\u914d\u7f6e\u9879 1. chain_cert_name = \"credence-net:951002007l78123233.super_admin\" \uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4ee5 credence-net \u6807\u8bc6\u7684\u7ba1\u7406\u5458super_admin 2. chain_network_id = \"credence-net\" \uff0c\u7ec4\u7f51id\uff0c\u4e1a\u52a1\u94fe\u8bbe\u7f6e\u4e3a credence-net \uff0c\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26 3. basic_chain_id = \"identity-net\" \uff0c\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u5747\u8bbe\u7f6e\u4e3a identity-net \uff0c \u8d26\u6237\u3001\u8bc1\u4e66\u7531\u8eab\u4efd\u94fe\u7ba1\u7406 4. system.httpServicePort= 9086 \uff0cRepChain\u7684http\u670d\u52a1\u7684\u7aef\u53e3 5. system.contractOperationMode = 1 \uff0c\u4ee5 jar \u5305\u6a21\u5f0f\u8fd0\u884cRepChain\uff0c\u8be5\u914d\u7f6e\u9879\u987b\u6539\u4e3a1 6. system.trans_create_type=0 \uff0c\u63a5\u53d7\u4eceAPI\u63d0\u4ea4\u8fc7\u6765\u7684\u4ea4\u6613\uff08\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u4ee3\u8868\u7684\u662f\u8282\u70b9\u81ea\u52a8\u4ea7\u751f\u5e76\u63d0\u4ea4\u4ea4\u6613\uff0c\u4e3b\u8981\u662f\u7528\u6765\u6d4b\u8bd5\u7528\uff09 7. sytetem.storage.dbpath \uff0cleveldb\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u8eab\u4efd\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684 8. sytetem.storage.blockpath \uff0cblock\u7684\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u8eab\u4efd\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684 \u542f\u52a8\u65b9\u5f0f\u4e3a\u5728\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a # \u5148\u524d\u5728\u6253\u5305\u73af\u8282\u5df2\u7ecf\u6307\u5b9a\u4e86\u4e3b\u7c7b java -jar RepChain.jar \u6216 # \u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.Repchain \u542f\u52a8\u6210\u529f\u6807\u5fd7\u6709\u4e24\u79cd\u9a8c\u8bc1\u65b9\u5f0f \u901a\u8fc7API\u63a5\u53e3\u6765\u9a8c\u8bc1\u3002\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:9081/chaininfo/node \uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a\u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf\uff0c\u5219\u8868\u793a\u6210\u529f\uff1b\u6216\u8005\u662f\u5728\u7ec8\u7aef\u4e2d\u8f93\u5165 curl http://localhost:9081/chaininfo/node \uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a \u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf \uff0c\u5219\u8868\u793a\u6210\u529f \u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:9081/web/g1.html \uff0c\u5982\u679c\u51fa\u73b0\u5982\u4e0b\u754c\u9762\uff0c\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u7ea2\u6846\u4e2d\u53ef\u4ee5\u770b\u5230\u5165\u7f51\u7684\u8282\u70b9\uff0c\u5219\u6807\u8bc6\u6210\u529f \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0\uff1a \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650 \u5176\u4ed6\uff1a\u5982\u679c\u60f3\u8981\u5728\u540c\u4e00\u4e2aJVM\u4e0a\u6a21\u62df\u542f\u52a8\u5927\u4e8e10\u4e2a\u8282\u70b9\uff0c\u5373\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe6~N\u8282\u70b9\u6216\u8005\u4e1a\u52a1\u94fe6~N\u8282\u70b9\uff0c\u5728\u4e3b\u7c7b rep.app.RepChain \u4e2d\u589e\u52a0\u8282\u70b9\u5b9e\u4f8b \u51c6\u5907\u5de5\u4f5c 1. jks/identity-net \u6216\u8005 jks/credence-net \u76ee\u5f55\u4e0b\u76f8\u5e94\u7684\u8282\u70b9\u5bc6\u94a5\u5bf9\u4e0e\u8bc1\u4e66\u5e94\u662f6~N\u4e2a\uff0c\u4eff\u7167\u539f\u6709jks\u6587\u4ef6\u653e\u7f6e\u65b0\u751f\u6210\u7684jks\u6587\u4ef6\u5373\u53ef\uff0c\u53ef\u4f7f\u7528 Kse \u6216\u8005 \u4ee3\u7801 \u6765\u751f\u6210\u8282\u70b9\u5bc6\u94a5\u5bf9\u548c\u81ea\u7b7e\u540d\u8bc1\u4e66\uff0c\u5e76\u5c06\u8bc1\u4e66\u5bfc\u5165mytruststore.jks\u4e2d\uff0c\u6ce8\u610fJks\u6587\u4ef6\u540d\uff0c\u4ee5\u53ca\u5176\u4e2d\u5b58\u50a8\u7684\u5bc6\u94a5\u5bf9\u6216\u8005\u8bc1\u4e66\u7684\u522b\u540d\uff0c ***.nodex \uff0c\u4e0b\u56fe\u662fKse\u7684\u7b80\u5355\u4f7f\u7528\u793a\u4f8b \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u8eab\u4efd\u94fe\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5982\u4e0b\u56fe\uff1a 2.conf\u76ee\u5f55\u4e0b\u4e3a\u8282\u70b9\u914d\u7f6e\u6587\u4ef6\uff0c\u8eab\u4efd\u94fe\u65b0\u589e\u8282\u70b9\u4eff\u7167node1-node5\u8fdb\u884c\u914d\u7f6e\uff0c\u4e1a\u52a1\u94fe\u65b0\u589e\u8282\u70b9\u4eff\u7167node6-node10\u8fdb\u884c\u914d\u7f6e\u3002 3.\u4eff\u7167node1-node5\u5728\u4e3b\u7c7b rep.app.RepChain \u4e2d\u589e\u52a0\u8282\u70b9\u5b9e\u4f8b\u3002 \u542f\u52a8\u65b9\u5f0f \u8bf7\u67e5\u770b\u6e90\u7801 src/main/scala/rep/app/RepChain.scala java -cp RepChain.jar rep.app.RepChain jar\u5305\u90e8\u7f72\u540e\uff08\u5355\u673a10\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u65b0\u589e\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66","title":"\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9"},{"location":"deploy/#_15","text":"\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u4e0e\u5355\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u533a\u522b\u5728\u4e8e\u591a\u673a\u591a\u8282\u70b9\u662f\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u540c\u4e00\u4e2a Jvm \u4e0a\u542f\u52a82\u4e2a\u8282\u70b9\u5206\u522b\u53c2\u4e0e\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7ec4\u7f51\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.Repchain_Single \u7f51\u7edc\u90e8\u7f72\u53ca\u542f\u52a8\u65b9\u5f0f \u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4 \u542f\u52a8\u65b9\u5f0f\u4ee5\u8eab\u4efd\u94fe\u8282\u70b9node1\u548c\u4e1a\u52a1\u94fe\u8282\u70b9node6\u4e3a\u4f8b\uff0cnode1\u548cnode6\u9700\u8981\u90e8\u7f72\u5728\u540c\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\uff0cnode1\u548cnode6\u7684LevelDB\uff08 system.conf \u4e2d sytetem.storage.dbpath \u548c sytetem.storage.blockpath \uff09\u914d\u7f6e\u4e3a\u540c\u4e00\u4e2a\u5b58\u50a8\u76ee\u5f55\uff1a \u5728node1\u548cnode6\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a java -jar RepChain.jar \"121000005l35120456.node1\" \"330597659476689954.node6\" # \u6216\u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.Repchain_Single \"121000005l35120456.node1\" \"330597659476689954.node6\" ip\u4e0eport\u7684\u914d\u7f6e \u975e NAT \u6216\u975e docker \u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51ip ca n o n ical.por t = 8082 # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\\<seed-nodes>\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 hostname \u4e0e port \uff09 \u6ce8 \uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879\\<seed-nodes>\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879\\<seed-nodes>\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3 NAT \u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"139.10.1.3\" # \u5916\u90e8\u5730\u5740 ca n o n ical.por t = 8082 # \u5916\u90e8\u7aef\u53e3 bi n d.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51\u5730\u5740 bi n d.por t = 8082 # \u5c40\u57df\u7f51\u7aef\u53e3 } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u7684 3 \u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e86 1 \u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 \u5185\u90e8\u6216\u5916\u90e8 \u7684 hostname \u4e0e port \uff09 jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5 node1 \u548c node6 \u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4 \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5 \u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3 \u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25 \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0 \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650","title":"\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9"},{"location":"deploy/#_16","text":"\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u4e0e\u5355\u673a\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u6ee1\u8db3\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u5373\u53ef\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.RepChain_Management \u7f51\u7edc\u90e8\u7f72\u53ca\u542f\u52a8\u65b9\u5f0f \u5355\u94fe\u6a21\u5f0f\u4e0b\u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe 5 \u8282\u70b9\u548c\u4e1a\u52a1\u94fe 5 \u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9 \u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8eab\u4efd\u94fe\u8282\u70b9\u548c\u4e00\u4e2a\u4e1a\u52a1\u94fe\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4 \u542f\u52a8\u65b9\u5f0f \u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u5047\u8bbe\u5728\u4e00\u4e2a\u670d\u52a1\u5668\u4e0a\u6709node1\u548cnode6\uff0c\u5728\u5176\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a java -jar RepChain.jar \"121000005l35120456.node1\" \"330597659476689954.node6\" # \u6216\u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.RepChain_Management \"121000005l35120456.node1\" \"330597659476689954.node6\" ip\u4e0eport\u7684\u914d\u7f6e \u975e NAT \u6216\u975e docker \u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51ip ca n o n ical.por t = 8082 # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9<seed-nodes>\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 hostname \u4e0e port \uff09 \u6ce8 \uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879<seed-nodes>\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879<seed-nodes>\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3 NAT \u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"139.10.1.3\" # \u5916\u90e8\u5730\u5740 ca n o n ical.por t = 8082 # \u5916\u90e8\u7aef\u53e3 bi n d.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51\u5730\u5740 bi n d.por t = 8082 # \u5c40\u57df\u7f51\u7aef\u53e3 } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u7684 3 \u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e86 1 \u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 \u5185\u90e8\u6216\u5916\u90e8 \u7684 hostname \u4e0e port \uff09 jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5 node1 \u548c node6 \u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4 \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5 \u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3 \u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25 \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0 \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650","title":"\u8282\u70b9\u7ba1\u7406\u670d\u52a1"},{"location":"deploy/#_17","text":"","title":"\u9644\u5f55"},{"location":"deploy/#_18","text":"\u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo \uff08\u8eab\u4efd\u94fe\uff09\u548c rep.utils.CreateGenesisInfo4NoTransaction \uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09\u548c json/credence-net/genesis.json \uff08\u4e1a\u52a1\u94fe\uff09","title":"\u521b\u4e16\u5757\u7684\u6784\u5efa"},{"location":"deploy/#_19","text":"\u9ed8\u8ba4\u4e3a5\u4e2a\u8eab\u4efd\u94fe\u8282\u70b9\u548c5\u4e2a\u4e1a\u52a1\u94fe\u8282\u70b9\uff0c\u6bcf\u4e2a\u8282\u70b9\u6709\u4e00\u4e2a\u5bc6\u94a5\u5bf9\uff0c \u5b9e\u9645 \u5728\u751f\u4ea7\u73af\u5883\u90e8\u7f72RepChain\u9700\u8981\u66f4\u6362\u5f00\u6e90\u4ed3\u5e93\u4e2d\u7684\u5bc6\u94a5\uff0c\u4f7f\u7528 KeyStoreExplorer \uff08\u6216\u8005\u4f7f\u7528 \u4ee3\u7801 \uff09\u5373\u53ef\u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u5bfc\u51fa\u8bc1\u4e66 \u5bf9\u4e8e\u8eab\u4efd\u94fe 1.\u4e3a\u6bcf\u4e2a\u8282\u70b9\u66ff\u6362\u5bc6\u94a5\uff0c\u5047\u8bbe\u67095\u4e2a\u8282\u70b9\uff0c\u5219\u4f7f\u7528 kse \u751f\u62105\u4e2a\u5305\u542b\u5bc6\u94a5\u5bf9\uff08\u9ed8\u8ba4\u4f7f\u7528 secp256r1 \uff09\u7684 jks \u5e76\u5bfc\u51fa\u8bc1\u4e66\uff0c\u66f4\u6362 jks/identity-net \u76ee\u5f55\u4e0b\u7684\u5bc6\u94a5\u4e0e\u8bc1\u4e66 2.\u4f7f\u7528 kse \u5c06\u5404\u4e2a\u8282\u70b9\u7684\u8bc1\u4e66\u5bfc\u5165\u5230 mytrustStore.jks \u4e2d 3.\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo \uff0c\u91cd\u65b0\u751f\u6210\u7684\u8eab\u4efd\u94fe\u521b\u4e16\u5757\u6587\u4ef6\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09 \u5bf9\u4e8e\u4e1a\u52a1\u94fe 1.\u4e3a\u6bcf\u4e2a\u8282\u70b9\u66ff\u6362\u5bc6\u94a5\uff0c\u5047\u8bbe\u67095\u4e2a\u8282\u70b9\uff0c\u5219\u4f7f\u7528 kse \u751f\u62105\u4e2a\u5305\u542b\u5bc6\u94a5\u5bf9\uff08\u9ed8\u8ba4\u4f7f\u7528 secp256r1 \uff09\u7684 jks \u5e76\u5bfc\u51fa\u8bc1\u4e66\uff0c\u66f4\u6362 jks/credence-net \u76ee\u5f55\u4e0b\u7684\u5bc6\u94a5\u4e0e\u8bc1\u4e66 2.\u4f7f\u7528 kse \u5c06\u5404\u4e2a\u8282\u70b9\u7684\u8bc1\u4e66\u5bfc\u5165\u5230 mytrustStore.jks \u4e2d 3.\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.CreateGenesisInfo4NoTransaction \uff0c\u91cd\u65b0\u751f\u6210\u7684\u4e1a\u52a1\u94fe\u521b\u4e16\u5757\u6587\u4ef6\u5728 json/credence-net/genesis.json \uff08\u4e1a\u52a1\u94fe\uff09","title":"\u8282\u70b9\u5bc6\u94a5\u66ff\u6362"},{"location":"deploy/#_20","text":"\u65b0\u589e\u8282\u70b9\u9700\u8981\u505c\u673a\u5e76\u91cd\u542f\u7f51\u7edc \u5047\u8bbe\u73b0\u5728\u60f3\u589e\u52a0\u7ec4\u7f51\u8282\u70b9\uff0c\u5219\u9700\u8981\u751f\u6210\u65b0\u7684 jks \uff0c\u5e76\u653e\u5230 jks/identity \u4ee5\u53ca jks/credence \u76ee\u5f55\u4e0b\uff0c\u5e76\u4e14\u5c06\u8bc1\u4e66\u5bfc\u5165\u5230 mytrustStore.jks \u4e2d\uff0c\u6240\u6709\u8282\u70b9\u7684 mystruststore.jks \u90fd\u9700\u8981\u66f4\u65b0\uff1b\u8fd8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:7081/swagger/index.html \uff0c\u901a\u8fc7\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u7684API\u542f\u52a8\u505c\u6b62\u8282\u70b9\uff08\u9ed8\u8ba4http\u670d\u52a1\u7684\u7aef\u53e3\u53f7\u4e3a7081\uff09\u3002 \u589e\u52a0\u7684\u662f\u5171\u8bc6\u8282\u70b9 \u9700\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u5c06\u8be5\u8282\u70b9\u914d\u7f6e\u5230\u5171\u8bc6\u5217\u8868\u4e2d\uff0c\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u9700\u8981 \u4fee\u6539\u914d\u7f6e\u9879 \uff1a system.vote.vote_node_list \uff08\u914d\u7f6e\u9879\u5728conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\uff09 \u589e\u52a0\u7684\u662f\u540c\u6b65\u8282\u70b9 \u66f4\u65b0\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684 mytruststore.jks \uff0c\u4e0d\u7528\u4fee\u6539\u914d\u7f6e \u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9 \uff1a \u5982\u679c\u73b0\u5728\u6ca1\u6709\u5386\u53f2\u533a\u5757\u6570\u636e\uff0c\u5219\u91cd\u6784 genesis.json \uff0c\u5c06\u65b0\u8282\u70b9\u7684\u8d26\u6237\u4e0e\u8bc1\u4e66\u6ce8\u518c \u5982\u679c\u73b0\u5728\u6709\u5386\u53f2\u6570\u636e\uff0c\u5219\u65e0\u9700\u91cd\u6784 genesis.json \uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8c03\u7528 \u8d26\u6237\u8bc1\u4e66\u7ba1\u7406\u5408\u7ea6 \u6765\u6ce8\u518c\u8d26\u6237\u6216\u8bc1\u4e66 \u5982\u679c\u4e1a\u52a1\u903b\u8f91\u4e0d\u6d89\u53ca\u5230\u65b0\u8282\u70b9\u7684\u8d26\u6237\uff0c\u5219\u8be5\u6b65\u9aa4\u975e\u5fc5\u987b\uff0c\u56e0\u4e3a\u9ed8\u8ba4 RepChain \u4f1a\u4ece mytrustStore.jks \u4e2d\u52a0\u8f7d\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u65b0\u589e\u8282\u70b9\u6240\u63d0\u4ea4\u7684\u7b7e\u540d\u4ea4\u6613\u80fd\u591f\u88ab\u63a5\u53d7","title":"\u65b0\u589e\u8282\u70b9"},{"location":"deploy/#_21","text":"\u8eab\u4efd\u94fe\u7ba1\u7406\u8d26\u6237\u3001\u8bc1\u4e66\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1 1.\u8981\u914d\u7f6e\u4e3a\u5171\u4eablevelDB 2.\u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.identity.CreateIdentityGenesisInfo \uff08\u8eab\u4efd\u94fe\uff09 \u548c rep.utils.credence.CreateCredenceGenesisInfo \uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09\u548c json/credence-net/genesis.json \uff08\u4e1a\u52a1\u94fe\uff09 RepChain\u6240\u652f\u6301\u7684\u7f51\u7edc\u73af\u5883 \u652f\u6301\u5c40\u57df\u7f51\u3001\u4e13\u7f51\u3001\u516c\u7f51\u90e8\u7f72\uff0c NAT \u6216 docker \u73af\u5883 RepChain\u6240\u652f\u6301\u7684\u8f6f\u786c\u4ef6\u73af\u5883 \u786c\u4ef6\u73af\u5883\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\u3001RISK-V\uff1b\u8f6f\u4ef6\u73af\u5883\uff1a\u865a\u62df\u673a\u3001Docker \u90e8\u7f72\u548c\u8fd0\u884cRepChain\u8282\u70b9\u7684\u65b9\u5f0f \u4f7f\u7528 jar \u5305\u90e8\u7f72\uff0c\u8fd0\u884c\u5728JVM\u4e0a\uff08jdk11+\uff0c\u63a8\u8350jdk13+\uff09\uff0c\u57fa\u4e8eJAVA\u7684\u8de8\u5e73\u53f0\u90e8\u7f72\uff0cRepChain\u652f\u6301\u90e8\u7f72\u5728\u7edd\u5927\u90e8\u5206\u7684Windows\u3001Linux\u4e0eMacOS\u7cfb\u7edf\u4e0a RepChain\u7684\u5355\u94fe\u90e8\u7f72\u6a21\u5f0f \u53ef\u4ee5\u5206\u4e3a\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u3001\u8282\u70b9\u7ba1\u7406\u670d\u52a1 \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 \u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u8fd0\u884c\u5728\u540c\u4e00\u5bbf\u4e3b\u673a\u4e0a\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u7f16\u5199\u597d\u7684\u5408\u7ea6 \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 \u53ef\u4ee5\u7406\u89e3\u4e3a\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u5404\u4e2a\u8282\u70b9\u5206\u522b\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u5bbf\u4e3b\u673a\u4e0a \u8282\u70b9\u7ba1\u7406\u670d\u52a1 \u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u53ef\u4ee5\u5728\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\uff08\u8282\u70b9\uff09\uff0c\u4e5f\u53ef\u4ee5\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u8fdb\u7a0b","title":"\u2014\u2014\u591a\u94fe\u6a21\u5f0f\uff0c\u4e1a\u52a1\u94fe\u7ba1\u7406\u64cd\u4f5c\u6743\u9650\u5e76\u8d1f\u8d23\u4e1a\u52a1"},{"location":"deploy/#_22","text":"\u73af\u5883\u9700\u6c42\uff1a 1.\u786c\u4ef6\u7684\u63a8\u8350\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G\uff0cDisk\uff1a100G \u6240\u8ff0\u914d\u7f6e\u662f\u63a8\u8350\u7684 \u57fa\u7840\u8fd0\u884c\u73af\u5883 \u7684\u786c\u4ef6\u914d\u7f6e\uff0c\u6253\u5305\u7f16\u8bd1\u73af\u5883\u7684\u914d\u7f6e\u53ef\u964d\u4f4e\uff08\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u964d\u4f4e\u6216\u63d0\u5347\u914d\u7f6e\uff09 2.Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350 Azul-zuluJdk \uff0c\u4e5f\u53ef\u4f7f\u7528 Oracle-Jdk 3.\u64cd\u4f5c\u7cfb\u7edf\uff1a\u53ef\u4ee5\u5b89\u88c5Jdk-13\u7684\u7cfb\u7edf 4.\u652f\u6301\u67b6\u6784\uff1ax86-64\u3001Arm-64\uff08\u5982\uff1a\u9cb2\u9e4f\u670d\u52a1\u5668\u3001\u6811\u8393\u6d3e\uff09\uff0c\u76ee\u524d\u4e5f\u652f\u6301\uff1aRISC-V\uff1b\u5982\u679c\u662fArm-64\u67b6\u6784\uff0c\u5219\u9700\u8981\u66ff\u6362RepChain\u4ee3\u7801\u9ed8\u8ba4\u6240\u4f9d\u8d56\u7684leveldbjni\u7684\u5305\uff0c\u66ff\u6362\u65b9\u5f0f\u53c2\u89c1\u540e\u7eed\u7684\u4ecb\u7ecd 5. Git \uff1a\u7528\u6765\u4e0b\u8f7dRepChain\u7684\u6e90\u7801\uff08\u975e\u5fc5\u987b\uff0c\u53ef\u76f4\u63a5\u4e0b\u8f7d \u538b\u7f29\u5305 \uff09 6.\u7f16\u8bd1\u5de5\u5177\uff1a Sbt \uff0c\u5b89\u88c5\u65b9\u5f0f\u89c1 \u5b98\u65b9\u6559\u7a0b \uff1b \u6216 \u5b89\u88c5\u4e86 Scala \u63d2\u4ef6\u7684 IDEA \uff0c\u63d2\u4ef6\u5b89\u88c5\u65b9\u5f0f\u89c1 \u5b98\u65b9\u6559\u7a0b \u4e0b\u8f7d\u6e90\u7801\uff1a 1.\u5982\u679c\u6709\u5b89\u88c5Git\uff0c\u4e14\u4e3aGit\u914d\u7f6e\u4e86\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\uff0c\u5219\u4f7f\u7528GitBash\u6216\u8005\u7cfb\u7edf\u81ea\u5e26Terminal\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a git clone https://gitee.com/BTAJL/repchain.git cd repchain git fetch git checkout -b dev_jdk13_2.0.0.0 RepChain_2.0.0_RC \u5982\u4e0d\u4f7f\u7528git\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d \u538b\u7f29\u5305 \uff0c\u5e76\u89e3\u538b\u4e3arepchain 2.\u627e\u5230repchain\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\uff0c\u4fee\u6539build.sbt\u4e2d\u7684 mainClass \uff08Jar\u5305\u4e3b\u7c7b\uff09\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.Repchain \uff08\u4e3b\u7c7b rep.app.Repchain \u4e2d\u9ed8\u8ba4\u53ea\u6709node1-node5\u51715\u4e2a\u8282\u70b9\uff0c\u591a\u94fe\u6a21\u5f0f\u4e0b\u4eff\u7167node1-node5\u5728\u4e3b\u7c7b rep.app.RepChain \u4e2d\u589e\u52a0node6-nodeN\u8282\u70b9\u5b9e\u4f8b\uff09\uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.Repchain_Single \uff0c\u5982\u679c\u90e8\u7f72\u6a21\u5f0f\u4e3a \u8282\u70b9\u7ba1\u7406\u670d\u52a1 \uff0c\u5219\u4fee\u6539\u4e3a rep.app.RepChain_Management \uff0c\u5982\u4e0b\u6240\u793a\uff1a # \u5355\u673a\u6a21\u62df\u591a\u8282\u70b9 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.Repchain\" ) # \u6216 # \u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.Repchain_Single\" ) # \u6216 # \u8282\u70b9\u7ba1\u7406\u670d\u52a1 mainClass in ( Compile, packageBin ) : = Some ( \"rep.app.RepChain_Management\" ) RepChain\u9ed8\u8ba4\u4f7f\u7528\u7684 leveldbjni \u5305\u4e0d\u652f\u6301Arm-64\uff0c\u56e0\u6b64\u5982\u679c\u8981\u5c06RepChain\u90e8\u7f72\u5728Arm-64\u67b6\u6784\u7684\u670d\u52a1\u5668\uff0c\u9700\u8981\u5c06\u6839\u76ee\u5f55\u4e0b\u7684build.sbt\u6587\u4ef6\u4e2d\u914d\u7f6e\u7684 leveldb-jni \u4f9d\u8d56\u5305\u66ff\u6362\uff08\u53ef\u4ee5\u81ea\u5df1\u6839\u636e leveldb-jni \u7684\u8bf4\u660e\u6587\u6863\u81ea\u884c\u7f16\u8bd1\uff09\uff0c\u5982\u4e0b\u6240\u793a\uff1a # \u5c06 libraryDependencies += \"org.fusesource.leveldbjni\" % \"leveldbjni-all\" % \"1.8\" # \u66ff\u6362\u4e3a libraryDependencies += \"com.github.huangtianhua\" % \"leveldbjni-linux64-aarch64\" % \"1.9\" # \u6216 libraryDependencies += \"org.openlabtesting.leveldbjni\" % \"leveldbjni-linux64-aarch64\" % \"1.8\" 3.\u7f16\u8bd1\u5e76\u6253\u5305 \u6709\u4e24\u79cd\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u5728IDEA\u4e2d\u4f7f\u7528 sbt-shell \uff08\u5b89\u88c5\u4e86Scala\u63d2\u4ef6\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u53e6\u4e00\u79cd\u662f\u5728\u7ec8\u7aef\u4f7f\u7528 sbt-repl \uff08\u5b89\u88c5\u4e86Sbt\u540e\uff0c\u5373\u53ef\u4f7f\u7528\u8be5\u5de5\u5177\uff09\uff0c\u8be6\u7ec6\u8bf4\u660e\u8fc7\u7a0b\u53ef\u53c2\u8003\u540e\u9762\u7684\u6253\u5305\u6f14\u793a\uff1a \u5728IDEA\u4e2d\u6253\u5f00 sbt shell \u5e76\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1aclean->compile->assembly\uff0c\u5982\u4e0b\u6240\u793a\uff1a sbt:RepChain> clean sbt:RepChain> compile sbt:RepChain> assembly \u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528 sbt-repl \uff0c\u8f93\u5165 sbt \u547d\u4ee4\u8fdb\u5165\u4ea4\u4e92\u754c\u9762\u540e\uff0c\u4f9d\u6b21\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff1a > clean > compile > assembly 4.\u6253\u5305\u597d\u7684RepChain.jar\u5b58\u653e\u5728 repchain/target/scala-2.12/RepChain.jar \uff0c\u5c06Jar\u5305\u79fb\u52a8\u5230\u9879\u76ee\u6839\u76ee\u5f55\u4e0b \u6253\u5305\u8fc7\u7a0b\u6f14\u793a\uff1a 1.\u4f7f\u7528IDEA\u4e2d\u7684 sbt-shell 2.\u4f7f\u7528\u7ec8\u7aef\uff08Terminal or cmd\uff09\uff0c\u4e0b\u9762\u4ee5mac\u4e0b\u7684\u7ec8\u7aef\u4e3a\u4f8b\uff08Windows\u6216Linux\u7c7b\u4f3c\uff09","title":"\u7f16\u8bd1\u6253\u5305"},{"location":"deploy/#_23","text":"\u5728\u4e0a\u4e00\u5c0f\u8282\u4e2d\uff0c\u4e3b\u8981\u53d9\u8ff0\u4e86\u5982\u4f55\u5bf9RepChain\u7684\u6e90\u7801\u8fdb\u884c\u4e86\u7f16\u8bd1\u5e76\u6253\u5305\u5f97\u5230RepChain.jar\uff0c\u63a5\u4e0b\u6765\u4f7f\u7528RepChain.jar\u6765\u90e8\u7f72RepChain\u7f51\u7edc\uff0cRepChain\u7684\u90e8\u7f72\u6709\u4e09\u79cd\u65b9\u5f0f\uff1a\u4e00\u662f\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9\uff1b\u4e8c\u662f\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff1b\u4e09\u662f\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u3002\u63a5\u4e0b\u6765\u5206\u522b\u505a\u8be6\u7ec6\u4ecb\u7ecd","title":"\u90e8\u7f72"},{"location":"deploy/#_24","text":"\u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe 5 \u8282\u70b9\u548c\u4e1a\u52a1\u94fe 5 \u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.Repchain \u73af\u5883\u9700\u6c42\uff1a \u786c\u4ef6\u7684\u57fa\u7840\u914d\u7f6e\uff1aCPU\uff1a4\u6838\uff0cMemory\uff1a8G Java\u73af\u5883\uff1aJdk-13\uff0c\u63a8\u8350 Azul-zuluJdk \uff0c\u4e5f\u53ef\u4f7f\u7528 Oracle-Jdk \u914d\u7f6e\u6587\u4ef6 \u8eab\u4efd\u94fe\u4ee5node1\u4e3a\u4f8b\uff08node2-node5\u7c7b\u4f3c\uff09\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3a repchain/conf/121000005l35120456.node1/system.conf system.conf \u4e2d\u9700\u8981\u6ce8\u610f\u7684\u914d\u7f6e\u9879 1. chain_cert_name = \"identity-net:951002007l78123233.super_admin\" \uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4ee5 identity-net \u6807\u8bc6\u7684\u7ba1\u7406\u5458super_admin 2. chain_network_id = \"identity-net\" \uff0c\u7ec4\u7f51id\uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4e3a identity-net \uff0c\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26 3. basic_chain_id = \"identity-net\" \uff0c\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u5747\u8bbe\u7f6e\u4e3a identity-net \uff0c \u8d26\u6237\u3001\u8bc1\u4e66\u7531\u8eab\u4efd\u94fe\u7ba1\u7406 4. system.httpServicePort= 9081 \uff0cRepChain\u7684http\u670d\u52a1\u7684\u7aef\u53e3 5. system.contractOperationMode = 1 \uff0c\u4ee5 jar \u5305\u6a21\u5f0f\u8fd0\u884cRepChain\uff0c\u8be5\u914d\u7f6e\u9879\u987b\u6539\u4e3a1 6. system.trans_create_type=0 \uff0c\u63a5\u53d7\u4eceAPI\u63d0\u4ea4\u8fc7\u6765\u7684\u4ea4\u6613\uff08\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u4ee3\u8868\u7684\u662f\u8282\u70b9\u81ea\u52a8\u4ea7\u751f\u5e76\u63d0\u4ea4\u4ea4\u6613\uff0c\u4e3b\u8981\u662f\u7528\u6765\u6d4b\u8bd5\u7528\uff09 7. sytetem.storage.dbpath \uff0cleveldb\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u4e1a\u52a1\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684 8. sytetem.storage.blockpath \uff0cblock\u7684\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u4e1a\u52a1\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684 \u4e1a\u52a1\u94fe\u4ee5node6\u4e3a\u4f8b\uff08node7-node10\u7c7b\u4f3c\uff09\uff0c\u914d\u7f6e\u6587\u4ef6\u4e3a repchain/conf/330597659476689954.node6/system.conf system.conf \u4e2d\u9700\u8981\u6ce8\u610f\u7684\u914d\u7f6e\u9879 1. chain_cert_name = \"credence-net:951002007l78123233.super_admin\" \uff0c\u8eab\u4efd\u94fe\u8bbe\u7f6e\u4ee5 credence-net \u6807\u8bc6\u7684\u7ba1\u7406\u5458super_admin 2. chain_network_id = \"credence-net\" \uff0c\u7ec4\u7f51id\uff0c\u4e1a\u52a1\u94fe\u8bbe\u7f6e\u4e3a credence-net \uff0c\u547d\u540d\u4e0d\u80fd\u5305\u542b\"_\"\u8fd9\u6837\u7684\u5b57\u7b26 3. basic_chain_id = \"identity-net\" \uff0c\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u5747\u8bbe\u7f6e\u4e3a identity-net \uff0c \u8d26\u6237\u3001\u8bc1\u4e66\u7531\u8eab\u4efd\u94fe\u7ba1\u7406 4. system.httpServicePort= 9086 \uff0cRepChain\u7684http\u670d\u52a1\u7684\u7aef\u53e3 5. system.contractOperationMode = 1 \uff0c\u4ee5 jar \u5305\u6a21\u5f0f\u8fd0\u884cRepChain\uff0c\u8be5\u914d\u7f6e\u9879\u987b\u6539\u4e3a1 6. system.trans_create_type=0 \uff0c\u63a5\u53d7\u4eceAPI\u63d0\u4ea4\u8fc7\u6765\u7684\u4ea4\u6613\uff08\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u4ee3\u8868\u7684\u662f\u8282\u70b9\u81ea\u52a8\u4ea7\u751f\u5e76\u63d0\u4ea4\u4ea4\u6613\uff0c\u4e3b\u8981\u662f\u7528\u6765\u6d4b\u8bd5\u7528\uff09 7. sytetem.storage.dbpath \uff0cleveldb\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u8eab\u4efd\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684 8. sytetem.storage.blockpath \uff0cblock\u7684\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e\uff0c\u8981\u4e0e\u8eab\u4efd\u94fe\u914d\u7f6e\u4e3a\u5171\u4eab\u7684 \u542f\u52a8\u65b9\u5f0f\u4e3a\u5728\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a # \u5148\u524d\u5728\u6253\u5305\u73af\u8282\u5df2\u7ecf\u6307\u5b9a\u4e86\u4e3b\u7c7b java -jar RepChain.jar \u6216 # \u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.Repchain \u542f\u52a8\u6210\u529f\u6807\u5fd7\u6709\u4e24\u79cd\u9a8c\u8bc1\u65b9\u5f0f \u901a\u8fc7API\u63a5\u53e3\u6765\u9a8c\u8bc1\u3002\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:9081/chaininfo/node \uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a\u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf\uff0c\u5219\u8868\u793a\u6210\u529f\uff1b\u6216\u8005\u662f\u5728\u7ec8\u7aef\u4e2d\u8f93\u5165 curl http://localhost:9081/chaininfo/node \uff0c\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u4e2dnodes\u6570\u91cf\u4e3a \u76ee\u524d\u7ec4\u7f51\u8282\u70b9\u6570\u91cf \uff0c\u5219\u8868\u793a\u6210\u529f \u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:9081/web/g1.html \uff0c\u5982\u679c\u51fa\u73b0\u5982\u4e0b\u754c\u9762\uff0c\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u7ea2\u6846\u4e2d\u53ef\u4ee5\u770b\u5230\u5165\u7f51\u7684\u8282\u70b9\uff0c\u5219\u6807\u8bc6\u6210\u529f \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0\uff1a \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650 \u5176\u4ed6\uff1a\u5982\u679c\u60f3\u8981\u5728\u540c\u4e00\u4e2aJVM\u4e0a\u6a21\u62df\u542f\u52a8\u5927\u4e8e10\u4e2a\u8282\u70b9\uff0c\u5373\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe6~N\u8282\u70b9\u6216\u8005\u4e1a\u52a1\u94fe6~N\u8282\u70b9\uff0c\u5728\u4e3b\u7c7b rep.app.RepChain \u4e2d\u589e\u52a0\u8282\u70b9\u5b9e\u4f8b \u51c6\u5907\u5de5\u4f5c 1. jks/identity-net \u6216\u8005 jks/credence-net \u76ee\u5f55\u4e0b\u76f8\u5e94\u7684\u8282\u70b9\u5bc6\u94a5\u5bf9\u4e0e\u8bc1\u4e66\u5e94\u662f6~N\u4e2a\uff0c\u4eff\u7167\u539f\u6709jks\u6587\u4ef6\u653e\u7f6e\u65b0\u751f\u6210\u7684jks\u6587\u4ef6\u5373\u53ef\uff0c\u53ef\u4f7f\u7528 Kse \u6216\u8005 \u4ee3\u7801 \u6765\u751f\u6210\u8282\u70b9\u5bc6\u94a5\u5bf9\u548c\u81ea\u7b7e\u540d\u8bc1\u4e66\uff0c\u5e76\u5c06\u8bc1\u4e66\u5bfc\u5165mytruststore.jks\u4e2d\uff0c\u6ce8\u610fJks\u6587\u4ef6\u540d\uff0c\u4ee5\u53ca\u5176\u4e2d\u5b58\u50a8\u7684\u5bc6\u94a5\u5bf9\u6216\u8005\u8bc1\u4e66\u7684\u522b\u540d\uff0c ***.nodex \uff0c\u4e0b\u56fe\u662fKse\u7684\u7b80\u5355\u4f7f\u7528\u793a\u4f8b \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u8eab\u4efd\u94fe\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5982\u4e0b\u56fe\uff1a 2.conf\u76ee\u5f55\u4e0b\u4e3a\u8282\u70b9\u914d\u7f6e\u6587\u4ef6\uff0c\u8eab\u4efd\u94fe\u65b0\u589e\u8282\u70b9\u4eff\u7167node1-node5\u8fdb\u884c\u914d\u7f6e\uff0c\u4e1a\u52a1\u94fe\u65b0\u589e\u8282\u70b9\u4eff\u7167node6-node10\u8fdb\u884c\u914d\u7f6e\u3002 3.\u4eff\u7167node1-node5\u5728\u4e3b\u7c7b rep.app.RepChain \u4e2d\u589e\u52a0\u8282\u70b9\u5b9e\u4f8b\u3002 \u542f\u52a8\u65b9\u5f0f \u8bf7\u67e5\u770b\u6e90\u7801 src/main/scala/rep/app/RepChain.scala java -cp RepChain.jar rep.app.RepChain jar\u5305\u90e8\u7f72\u540e\uff08\u5355\u673a10\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u65b0\u589e\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66","title":"\u5355\u673a\u6a21\u62df\u591a\u8282\u70b9"},{"location":"deploy/#_25","text":"\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u4e0e\u5355\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u533a\u522b\u5728\u4e8e\u591a\u673a\u591a\u8282\u70b9\u662f\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u540c\u4e00\u4e2a Jvm \u4e0a\u542f\u52a82\u4e2a\u8282\u70b9\u5206\u522b\u53c2\u4e0e\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7ec4\u7f51\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.Repchain_Single \u7f51\u7edc\u90e8\u7f72\u53ca\u542f\u52a8\u65b9\u5f0f \u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4 \u542f\u52a8\u65b9\u5f0f\u4ee5\u8eab\u4efd\u94fe\u8282\u70b9node1\u548c\u4e1a\u52a1\u94fe\u8282\u70b9node6\u4e3a\u4f8b\uff0cnode1\u548cnode6\u9700\u8981\u90e8\u7f72\u5728\u540c\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\uff0cnode1\u548cnode6\u7684LevelDB\uff08 system.conf \u4e2d sytetem.storage.dbpath \u548c sytetem.storage.blockpath \uff09\u914d\u7f6e\u4e3a\u540c\u4e00\u4e2a\u5b58\u50a8\u76ee\u5f55\uff1a \u5728node1\u548cnode6\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a java -jar RepChain.jar \"121000005l35120456.node1\" \"330597659476689954.node6\" # \u6216\u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.Repchain_Single \"121000005l35120456.node1\" \"330597659476689954.node6\" ip\u4e0eport\u7684\u914d\u7f6e \u975e NAT \u6216\u975e docker \u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51ip ca n o n ical.por t = 8082 # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9<seed-nodes>\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 hostname \u4e0e port \uff09 \u6ce8 \uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879<seed-nodes>\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879<seed-nodes>\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3 NAT \u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"139.10.1.3\" # \u5916\u90e8\u5730\u5740 ca n o n ical.por t = 8082 # \u5916\u90e8\u7aef\u53e3 bi n d.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51\u5730\u5740 bi n d.por t = 8082 # \u5c40\u57df\u7f51\u7aef\u53e3 } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u7684 3 \u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e86 1 \u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 \u5185\u90e8\u6216\u5916\u90e8 \u7684 hostname \u4e0e port \uff09 jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5 node1 \u548c node6 \u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4 \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5 \u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3 \u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25 \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0 \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650","title":"\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9"},{"location":"deploy/#_26","text":"\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u4e0e\u5355\u673a\u591a\u8282\u70b9\u3001\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\u90e8\u7f72\u7684\u539f\u7406\u662f\u76f8\u540c\u7684\uff0c\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u5206\u522b\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u90e8\u7f72RepChain.jar\uff0c\u7136\u540e\u7ec4\u7f51\u8fde\u63a5\u6210\u4e3a\u5206\u5e03\u5f0f\u533a\u5757\u94fe\u7f51\u7edc\u3002\u6ee1\u8db3\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u5373\u53ef\uff0c\u542f\u52a8\u4e3b\u7c7b\u4e3a rep.app.RepChain_Management \u7f51\u7edc\u90e8\u7f72 \u5355\u94fe\u6a21\u5f0f\u4e0b\u9ed8\u8ba4RepChain\u4f7f\u7528\u5355\u673a\u6a21\u62df\u8eab\u4efd\u94fe 5 \u8282\u70b9\u548c\u4e1a\u52a1\u94fe 5 \u8282\u70b9\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\u4e2d\u4f7f\u7528\u8be5\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u7528\u6765\u6d4b\u8bd5RepChain\u4ee3\u7801\u6216\u8005\u7f16\u5199\u597d\u7684\u5408\u7ea6\uff0c\u5728\u540c\u4e00\u4e2a Jvm \u4e0a\u6a21\u62df\u542f\u52a810\u4e2a\u8282\u70b9 \u53ef\u8de8\u57df\u3001\u8de8\u4e91\u8fdb\u884c\u53bb\u4e2d\u5fc3\u5316\u90e8\u7f72\uff0c\u4e5f\u53ef\u5728\u4e13\u7ebf\u3001\u653f\u52a1\u4e91\u4e0a\u8fdb\u884c\u90e8\u7f72\uff0c\u5355\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u8eab\u4efd\u94fe\u8282\u70b9\u548c\u4e00\u4e2a\u4e1a\u52a1\u94fe\u8282\u70b9\uff0c\u8282\u70b9\u670d\u52a1\u5668\u88ab\u5404\u4e2a\u673a\u6784\u5404\u81ea\u7ef4\u62a4 \u542f\u52a8\u65b9\u5f0f \u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u8fd0\u884c\u4e00\u4e2a\u8282\u70b9\u7ba1\u7406\u670d\u52a1\uff0c\u5047\u8bbe\u5728\u4e00\u4e2a\u670d\u52a1\u5668\u4e0a\u6709node1\u548cnode6\uff0c\u5728\u5176\u6240\u5728\u4e3b\u673a\u7684\u7ec8\u7aef\u4e0b\u8f93\u5165\u547d\u4ee4\uff1a java -jar RepChain.jar \"121000005l35120456.node1\" \"330597659476689954.node6\" # \u6216\u6307\u5b9a\u4e3b\u7c7b java -cp RepChain.jar rep.app.RepChain_Management \"121000005l35120456.node1\" \"330597659476689954.node6\" ip\u4e0eport\u7684\u914d\u7f6e \u975e NAT \u6216\u975e docker \u73af\u5883\u4e0b\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff08hostname\u4e3a\u4e3b\u673aIP\uff0cport\u4e3a\u8282\u70b9\u4e4b\u95f4P2P\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51ip ca n o n ical.por t = 8082 # \u901a\u4fe1\u7aef\u53e3\uff0c\u53ef\u81ea\u7531\u6307\u5b9a } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u76843\u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\\<seed-nodes>\u5904\u914d\u7f6e3\u4e2a\u5373\u53ef\uff0c\u6ce8\u610f\u5bf9\u5e94\u79cd\u5b50\u8282\u70b9\u6240\u914d\u7f6e\u7684\u901a\u4fe1\u7aef\u53e3\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 hostname \u4e0e port \uff09 \u6ce8 \uff1a\u79cd\u5b50\u8282\u70b9\u6307\u7684\u662f\u5728\u7f51\u8282\u70b9\uff0c\u5982\u679c\u521b\u4e16\u8282\u70b9\u542f\u52a8\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u914d\u7f6e\u9879\\<seed-nodes>\u914d\u7f6e\u81ea\u5df1\u7684ip\u548cport\u5373\u53ef\uff0c\u5982\u679c\u662f\u5176\u4ed6\u8282\u70b9\u60f3\u8981\u52a0\u5165\u5df2\u7ecf\u5b58\u5728\u7684\u7f51\u7edc\uff0c\u90a3\u4e48\u5176\u79cd\u5b50\u8282\u70b9\u7684\u914d\u7f6e\u9879\\<seed-nodes>\u9700\u8981\u914d\u7f6e\u5df2\u7ecf\u5728\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u7684ip\u548c\u7aef\u53e3 NAT \u73af\u5883\u4f7f\u7528\u5982\u4e0b\u914d\u7f6e\uff0c\u9488\u5bf9\u4e0a\u8ff0\u56fe\u5f62\u4e2d\u7684artery\u90e8\u5206\u4fee\u6539\u5373\u53ef\uff0c\u7136\u540e\u5c06\u79cd\u5b50\u8282\u70b9\u8bbe\u4e3a\u76f8\u5e94\u8282\u70b9\u7684\u5916\u90e8\u5730\u5740\uff0c\u4fee\u6539conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\u5982\u4e0b\uff1a remo te { #ar ter y\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e\u7684\u662f\u81ea\u5df1\u8282\u70b9\u7684\u5730\u5740\u548c\u7aef\u53e3 ar ter y { ca n o n ical.hos tna me = \"139.10.1.3\" # \u5916\u90e8\u5730\u5740 ca n o n ical.por t = 8082 # \u5916\u90e8\u7aef\u53e3 bi n d.hos tna me = \"192.168.2.136\" # \u5c40\u57df\u7f51\u5730\u5740 bi n d.por t = 8082 # \u5c40\u57df\u7f51\u7aef\u53e3 } } \u4e0b\u9762\u5217\u4e3e5\u8282\u70b9\u8eab\u4efd\u94fe\u7f51\u7edc\u4e2d\u7684 3 \u4e2a\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u60c5\u51b5\uff08\u79cd\u5b50\u8282\u70b9\u5904\u8fd9\u91cc\u914d\u7f6e\u4e86 1 \u4e2a\uff09\uff0c\u5176\u4ed6\u8282\u70b9\u7684\u7aef\u53e3\u914d\u7f6e\u7c7b\u4f3c\uff08\u5176\u4ed6\u8282\u70b9\u4e3b\u8981\u662f\u4fee\u6539\u81ea\u5df1\u7684 \u5185\u90e8\u6216\u5916\u90e8 \u7684 hostname \u4e0e port \uff09 jar\u5305\u90e8\u7f72\u540e\uff08\u5206\u5e03\u5f0f\u591a\u673a\u591a\u8282\u70b9\uff09\u7684\u76ee\u5f55\u7c7b\u4f3c\u4e0b\u56fe\uff0c\u4ee5 node1 \u548c node6 \u4e3a\u4f8b\uff0c\u5176\u4ed6\u8282\u70b9\u7c7b\u4f3c\uff1a \u6ce8\uff1a\u5176\u4e2dmytruststore.jks\u4e2d\u5b58\u653e\u4e86\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u90e8\u7f72\u76ee\u5f55\u4e0bmytruststore.jks\u4e00\u81f4 \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898 leveldbjni\u76f8\u5173\u7684\u9519\u8bef\uff0c\u5728windows\u4e0b\u53ef\u80fd\u662f\u6ca1\u6709c++\u73af\u5883\u5bfc\u81f4\u7684\uff0c\u88c5 Microsoft Visual C++ 2010 x64 Redistributable \u5373\u53ef \u51fa\u73b0\u8282\u70b9\u52a0\u5165\u7f51\u7edc\u5931\u8d25\u7684\u60c5\u51b5 \u53ef\u80fd\u662f\u9632\u706b\u5899\u6216\u8005\u7aef\u53e3(\u79cd\u5b50\u8282\u70b9\u6216\u8005\u672c\u8282\u70b9)\u6ca1\u5f00\u653e\uff0c\u53ef\u4ee5\u624b\u52a8\u67e5\u770b\u6216\u8005\u4f7f\u7528nmap\u626b\u63cf\u5bf9\u5e94\u7684\u7aef\u53e3 \u53ef\u80fd\u662f\u76f8\u5e94\u7684\u8282\u70b9\u8bc1\u4e66\u6ca1\u6709\u653e\u5165\u5230mytrustkeystore.jks\uff0c\u5bfc\u81f4TLS\u8fde\u63a5\u5931\u8d25 \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u7684\u9519\u8bef\uff0c\u6709\u5982\u4e0b\u4e24\u4e2a\u53ef\u80fd\u7684\u539f\u56e0\uff1a \u786e\u5b9e\u662f\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u4fee\u6539system.conf\u4e2d\u7684\u914d\u7f6e\u9879 diskspaceManager.diskspacealarm \u7528\u6237\u6743\u9650\u4e0d\u591f\uff0c\u5373\u7528\u6237\u4e0d\u5177\u6709\u5728\u6240\u914d\u7f6e\u5b58\u50a8\u76ee\u5f55\u4e0b\u7684\u8bfb\u5199\u7684\u6743\u9650","title":"\u8282\u70b9\u7ba1\u7406\u670d\u52a1"},{"location":"deploy/#_27","text":"","title":"\u9644\u5f55"},{"location":"deploy/#_28","text":"\u8981\u5206\u522b\u6784\u5efa\u8eab\u4efd\u94fe\u548c\u4e1a\u52a1\u94fe\u7684\u521b\u4e16\u5757\uff0c\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.identity.CreateIdentityGenesisInfo \uff08\u8eab\u4efd\u94fe\uff09 \u548c rep.utils.credence.CreateCredenceGenesisInfo \uff08\u4e1a\u52a1\u94fe\uff09\uff0c\u751f\u6210\u7684\u521b\u4e16\u5757\u6587\u4ef6\u5206\u522b\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09\u548c json/credence-net/genesis.json \uff08\u4e1a\u52a1\u94fe\uff09","title":"\u521b\u4e16\u5757\u7684\u6784\u5efa"},{"location":"deploy/#_29","text":"\u9ed8\u8ba4\u4e3a5\u4e2a\u8eab\u4efd\u94fe\u8282\u70b9\u548c5\u4e2a\u4e1a\u52a1\u94fe\u8282\u70b9\uff0c\u6bcf\u4e2a\u8282\u70b9\u6709\u4e00\u4e2a\u5bc6\u94a5\u5bf9\uff0c \u5b9e\u9645 \u5728\u751f\u4ea7\u73af\u5883\u90e8\u7f72RepChain\u9700\u8981\u66f4\u6362\u5f00\u6e90\u4ed3\u5e93\u4e2d\u7684\u5bc6\u94a5\uff0c\u4f7f\u7528 KeyStoreExplorer \uff08\u6216\u8005\u4f7f\u7528 \u4ee3\u7801 \uff09\u5373\u53ef\u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u5bfc\u51fa\u8bc1\u4e66 \u5bf9\u4e8e\u8eab\u4efd\u94fe 1.\u4e3a\u6bcf\u4e2a\u8282\u70b9\u66ff\u6362\u5bc6\u94a5\uff0c\u5047\u8bbe\u67095\u4e2a\u8282\u70b9\uff0c\u5219\u4f7f\u7528 kse \u751f\u62105\u4e2a\u5305\u542b\u5bc6\u94a5\u5bf9\uff08\u9ed8\u8ba4\u4f7f\u7528 secp256r1 \uff09\u7684 jks \u5e76\u5bfc\u51fa\u8bc1\u4e66\uff0c\u66f4\u6362 jks/identity-net \u76ee\u5f55\u4e0b\u7684\u5bc6\u94a5\u4e0e\u8bc1\u4e66 2.\u4f7f\u7528 kse \u5c06\u5404\u4e2a\u8282\u70b9\u7684\u8bc1\u4e66\u5bfc\u5165\u5230 mytrustStore.jks \u4e2d 3.\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.identity.CreateIdentityGenesisInfo \uff0c\u91cd\u65b0\u751f\u6210\u7684\u8eab\u4efd\u94fe\u521b\u4e16\u5757\u6587\u4ef6\u5728 json/identity-net/genesis.json \uff08\u8eab\u4efd\u94fe\uff09 \u5bf9\u4e8e\u4e1a\u52a1\u94fe 1.\u4e3a\u6bcf\u4e2a\u8282\u70b9\u66ff\u6362\u5bc6\u94a5\uff0c\u5047\u8bbe\u67095\u4e2a\u8282\u70b9\uff0c\u5219\u4f7f\u7528 kse \u751f\u62105\u4e2a\u5305\u542b\u5bc6\u94a5\u5bf9\uff08\u9ed8\u8ba4\u4f7f\u7528 secp256r1 \uff09\u7684 jks \u5e76\u5bfc\u51fa\u8bc1\u4e66\uff0c\u66f4\u6362 jks/credence-net \u76ee\u5f55\u4e0b\u7684\u5bc6\u94a5\u4e0e\u8bc1\u4e66 2.\u4f7f\u7528 kse \u5c06\u5404\u4e2a\u8282\u70b9\u7684\u8bc1\u4e66\u5bfc\u5165\u5230 mytrustStore.jks \u4e2d 3.\u8fd0\u884c src/main/scala \u76ee\u5f55\u4e0b rep.utils.credence.CreateCredenceGenesisInfo \uff0c\u91cd\u65b0\u751f\u6210\u7684\u4e1a\u52a1\u94fe\u521b\u4e16\u5757\u6587\u4ef6\u5728 json/credence-net/genesis.json \uff08\u4e1a\u52a1\u94fe\uff09","title":"\u8282\u70b9\u5bc6\u94a5\u66ff\u6362"},{"location":"deploy/#_30","text":"\u65b0\u589e\u8282\u70b9\u9700\u8981\u505c\u673a\u5e76\u91cd\u542f\u7f51\u7edc \u5047\u8bbe\u73b0\u5728\u60f3\u589e\u52a0\u7ec4\u7f51\u8282\u70b9\uff0c\u5219\u9700\u8981\u751f\u6210\u65b0\u7684 jks \uff0c\u5e76\u653e\u5230 jks/identity \u4ee5\u53ca jks/credence \u76ee\u5f55\u4e0b\uff0c\u5e76\u4e14\u5c06\u8bc1\u4e66\u5bfc\u5165\u5230 mytrustStore.jks \u4e2d\uff0c\u6240\u6709\u8282\u70b9\u7684 mystruststore.jks \u90fd\u9700\u8981\u66f4\u65b0\uff1b\u8fd8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 http://localhost:7081/swagger/index.html \uff0c\u901a\u8fc7\u8282\u70b9\u7ba1\u7406\u670d\u52a1\u7684API\u542f\u52a8\u505c\u6b62\u8282\u70b9\uff08\u9ed8\u8ba4http\u670d\u52a1\u7684\u7aef\u53e3\u53f7\u4e3a7081\uff09\u3002 \u589e\u52a0\u7684\u662f\u5171\u8bc6\u8282\u70b9 \u9700\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u5c06\u8be5\u8282\u70b9\u914d\u7f6e\u5230\u5171\u8bc6\u5217\u8868\u4e2d\uff0c\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u9700\u8981 \u4fee\u6539\u914d\u7f6e\u9879 \uff1a system.vote.vote_node_list \uff08\u914d\u7f6e\u9879\u5728conf\u76ee\u5f55\u4e0b\u5bf9\u5e94\u8282\u70b9\u7684system.conf\u6587\u4ef6\u4e2d\uff09 \u589e\u52a0\u7684\u662f\u540c\u6b65\u8282\u70b9 \u66f4\u65b0\u7f51\u7edc\u5185\u6240\u6709\u8282\u70b9\u7684 mytruststore.jks \uff0c\u4e0d\u7528\u4fee\u6539\u914d\u7f6e \u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9 \uff1a \u5982\u679c\u73b0\u5728\u6ca1\u6709\u5386\u53f2\u533a\u5757\u6570\u636e\uff0c\u5219\u91cd\u6784 genesis.json \uff0c\u5c06\u65b0\u8282\u70b9\u7684\u8d26\u6237\u4e0e\u8bc1\u4e66\u6ce8\u518c \u5982\u679c\u73b0\u5728\u6709\u5386\u53f2\u6570\u636e\uff0c\u5219\u65e0\u9700\u91cd\u6784 genesis.json \uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8c03\u7528 \u8d26\u6237\u8bc1\u4e66\u7ba1\u7406\u5408\u7ea6 \u6765\u6ce8\u518c\u8d26\u6237\u6216\u8bc1\u4e66 \u5982\u679c\u4e1a\u52a1\u903b\u8f91\u4e0d\u6d89\u53ca\u5230\u65b0\u8282\u70b9\u7684\u8d26\u6237\uff0c\u5219\u8be5\u6b65\u9aa4\u975e\u5fc5\u987b\uff0c\u56e0\u4e3a\u9ed8\u8ba4 RepChain \u4f1a\u4ece mytrustStore.jks \u4e2d\u52a0\u8f7d\u6240\u6709\u8282\u70b9\u7684\u8bc1\u4e66\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u65b0\u589e\u8282\u70b9\u6240\u63d0\u4ea4\u7684\u7b7e\u540d\u4ea4\u6613\u80fd\u591f\u88ab\u63a5\u53d7","title":"\u65b0\u589e\u8282\u70b9"}]}