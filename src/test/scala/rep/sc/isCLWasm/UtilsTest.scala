package rep.sc.isCLWasm

import org.json4s.JsonAST.{JArray, JObject}
import org.scalatest._
import org.json4s.jackson.JsonMethods.parse

import java.io.FileInputStream
import scala.collection.mutable

class UtilsTest extends FunSpec with Matchers with BeforeAndAfterAll {
  var utils: Utils = null
  val filePathPrefix = "src/test/scala/rep/sc/isCLWasm/"

  override def beforeAll(): Unit = {
    utils = new Utils()
  }

  describe("The parseSmartContract method") {
    it("Should work well for a well input codePackage") {
      val codePackage = "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X3BvaW50ZXIJCAEABS5kYXRhACYJcHJvZHVjZXJzAQxwcm9jZXNzZWQtYnkBBWNsYW5nBjE1LjAuN3wCAAB7InZhcmlhYmxlcyI6eyJzMSI6eyJ0eXBlIjoic3RydWN0Iiwic3RydWN0IjoiUzEiLCJuYW1lIjoiczEifX0sInN0cnVjdHVyZXMiOnsiX3N0cmluZyI6W3sidHlwZSI6ImludCIsIm5hbWUiOiJfbGVuIn0seyJ0eXBlIjoiY2hhcioiLCJuYW1lIjoiX2RhdGEifV0sIlMxIjpbeyJ0eXBlIjoiaW50IiwibmFtZSI6ImEifSx7InR5cGUiOiJzdHJ1Y3QiLCJzdHJ1Y3QiOiJfc3RyaW5nIiwibmFtZSI6ImIifV0sIl9saXN0X2ludCI6W3sidHlwZSI6ImludCIsIm5hbWUiOiJfY2FwYWNpdHkifSx7InR5cGUiOiJpbnQiLCJuYW1lIjoiX2xlbiJ9LHsidHlwZSI6ImludCoiLCJuYW1lIjoiX2RhdGEifV19LCJmdW5jdGlvbnMiOnsiZ2V0X2Zyb21fbGlzdCI6eyJuYW1lIjoiZ2V0X2Zyb21fbGlzdCIsInBhcmFtcyI6W3sidHlwZSI6InN0cnVjdCoiLCJzdHJ1Y3QiOiJfbGlzdF9pbnQiLCJuYW1lIjoiX2xpc3QiLCJpc1VzZWQiOnRydWV9LHsidHlwZSI6ImludCIsIm5hbWUiOiJpbmRleCIsImlzVXNlZCI6dHJ1ZX0seyJ0eXBlIjoiaW50KiIsIm5hbWUiOiJfb3V0IiwiaXNVc2VkIjp0cnVlfV19LCJnIjp7Im5hbWUiOiJnIiwicGFyYW1zIjpbeyJ0eXBlIjoiaW50IiwibmFtZSI6ImluZGV4IiwiaXNVc2VkIjp0cnVlfV19fX3Gd9/fbxcL7jJL+q33cA13BPahks+sgkShwSyyN4W1Lg=="
      val smartContract = utils.parseSmartContract(codePackage)

      smartContract.isCLVersion should be(1)

      val codeBytes = new FileInputStream(filePathPrefix + "simple.wasm").readAllBytes
      smartContract.code should equal(codeBytes)

      val abiJsonString = new String(new FileInputStream(filePathPrefix + "simple.abi.json").readAllBytes).filterNot(_.isWhitespace)
      smartContract.abi should equal(abiJsonString)
    }

    it("Should throw error for a invalid input codePackage") {
      val codePackage = "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DwsgAEEQdA8LEI6AgIAAAAsCAAsOABCQgICAABCQgICAAAsIACAAEAAQEQsIACAAEAEQEQsMACAAIAEgAhAHEBELCAAgABAIEBELDgAgACABIAIgAxAJEBELCysBAEGACAskbWFsbG9jIGZhaWxlZAAAAA0AAAAABAAAYWJjAAMAAAAYBAAAAOsCBG5hbWUBxQIXAAlfYWxsb2NhdGUBC19kZWFsbG9jYXRlAg5fYXNzaWduX3N0cmluZwMOX2luaXRfbGlzdF9pbnQEEF9hc3NpZ25fbGlzdF9pbnQFDV9hZGRfbGlzdF9pbnQGDV9nZXRfbGlzdF9pbnQHDWdldF9mcm9tX2xpc3QIAWcJBV9pbml0CgZtYWxsb2MLCGRsbWFsbG9jDARmcmVlDQZkbGZyZWUOBWFib3J0DwRzYnJrEAVkdW1teRERX193YXNtX2NhbGxfZHRvcnMSGF9hbGxvY2F0ZS5jb21tYW5kX2V4cG9ydBMaX2RlYWxsb2NhdGUuY29tbWFuZF9leHBvcnQUHGdldF9mcm9tX2xpc3QuY29tbWFuZF9leHBvcnQVEGcuY29tbWFuZF9leHBvcnQWFF9pbml0LmNvbW1hbmRfZXhwb3J0BxIBAA9fX3N0YWNrX3BvaW50ZXIJCAEABS5kYXRhACYJcHJvZHVjZXJzAQxwcm9jZXNzZWQtYnkBBWNsYW5nBjE1LjAuNz8CAAB7InZhcmlhYmxlcyI6eyJzZW5kZXIiOnsidHlwZSI6InN0cnVjdCIsInN0cnVjdCI6Il9zdHJpbmcifSwiczEiOnsidHlwZSI6InN0cnVjdCIsInN0cnVjdCI6Il9TMSJ9fSwic3RydWN0dXJlcyI6eyJfc3RyaW5nIjpbeyJ0eXBlIjoiaW50In0seyJ0eXBlIjoiY2hhcioifV0sIl9TMSI6W3sidHlwZSI6ImludCJ9LHsidHlwZSI6InN0cnVjdCIsInN0cnVjdCI6Il9zdHJpbmcifV0sIl9saXN0X2ludCI6W3sidHlwZSI6ImludCJ9LHsidHlwZSI6ImludCJ9LHsidHlwZSI6ImludCoifV19LCJmdW5jdGlvbnMiOnsiZ2V0X2Zyb21fbGlzdCI6eyJuYW1lIjoiZ2V0X2Zyb21fbGlzdCIsInBhcmFtcyI6W3sibmFtZSI6Il9saXN0IiwiaXNVc2VkIjp0cnVlLCJ0eXBlIjoic3RydWN0KiIsInN0cnVjdCI6Il9saXN0X2ludCJ9LHsibmFtZSI6Il9pbmRleCIsImlzVXNlZCI6dHJ1ZSwidHlwZSI6ImludCJ9LHsibmFtZSI6Il9vdXQiLCJpc1VzZWQiOnRydWUsInR5cGUiOiJpbnQqIn1dfSwiZyI6eyJuYW1lIjoiZyIsInBhcmFtcyI6W3sibmFtZSI6Il9pbmRleCIsImlzVXNlZCI6dHJ1ZSwidHlwZSI6ImludCJ9XX19fZz8tPqCE0cB0tO0qGpT209F8I+tTtruIf8tbrABhfqB"
      val exception = intercept[Exception] {
        utils.parseSmartContract(codePackage)
      }
      exception.getMessage should include("failed to verify the checksum of the deploying smart contract")
    }
  }

  describe("The genDefaultSerializedData method") {
    val abiJsonString = new String(new FileInputStream(filePathPrefix + "mock.abi.json").readAllBytes())
    val abiJson = parse(abiJsonString).asInstanceOf[JObject]
    val variables = abiJson.obj.find(item => item._1.equals("variables")).get._2.asInstanceOf[JObject]
    val structures = abiJson.obj.find(item => item._1.equals("structures")).get._2.asInstanceOf[JObject]
    val structuresMap = structures.obj.foldLeft(new mutable.HashMap[String, JArray]())((x, y) => {
      x(y._1) = y._2.asInstanceOf[JArray]
      x
    })
    it("Should generate the correct default serialized data for the int data type of isCL") {
      val structure = variables.obj.find(item => item._1.equals("_int")).get._2.asInstanceOf[JObject];
      val res = utils.genDefaultSerializedData(null, structure, null)
      val binaryData = Array(0,0,0,0).map(_.toByte)
      res.sameElements(binaryData) should be(true)
    }
    it("Should generate the correct default serialized data for the double data type of isCL") {
      val structure = variables.obj.find(item => item._1.equals("_double")).get._2.asInstanceOf[JObject];
      val res = utils.genDefaultSerializedData(null, structure, null)
      val binaryData = Array(0,0,0,0,0,0,0,0).map(_.toByte)
      res.sameElements(binaryData) should be(true)
    }
    it("Should generate the correct default serialized data for the bool data type of isCL") {
      val structure = variables.obj.find(item => item._1.equals("_bool")).get._2.asInstanceOf[JObject]
      val res = utils.genDefaultSerializedData(null, structure, null)
      val binaryData = Array(0).map(_.toByte)
      res.sameElements(binaryData) should be(true)
    }
    it("Should generate the correct default serialized data for the char data type of isCL") {
      val structure = variables.obj.find(item => item._1.equals("_char")).get._2.asInstanceOf[JObject]
      val res = utils.genDefaultSerializedData(null, structure, null)
      val binaryData = Array(0).map(_.toByte)
      res.sameElements(binaryData) should be(true)
    }
    it("Should generate the correct default serialized data for the String data type of isCL") {
      val structure = variables.obj.find(item => item._1.equals("_string")).get._2.asInstanceOf[JObject]
      val res = utils.genDefaultSerializedData(null, structure, structuresMap)
      val binaryData = Array(0,0,0,0).map(_.toByte)
      res.sameElements(binaryData) should be(true)
    }
    it("Should generate the correct default serialized data for the List data type of isCL") {
      val structure = variables.obj.find(item => item._1.equals("_list_int")).get._2.asInstanceOf[JObject]
      val res = utils.genDefaultSerializedData(null, structure, structuresMap)
      val binaryData = Array(4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0).map(_.toByte)
      res.sameElements(binaryData) should be(true)
    }
    it("Should generate the correct default serialized data for the Map data type of isCL") {
      val structure = variables.obj.find(item => item._1.equals("_map_string_string")).get._2.asInstanceOf[JObject]
      val res = utils.genDefaultSerializedData(null, structure, structuresMap)
      val binaryData = Array(4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0).map(_.toByte)
      res.sameElements(binaryData) should be(true)
    }
    it("Should generate the correct default serialized data for a custom defined Struct type of isCL") {
      val structure = variables.obj.find(item => item._1.equals("custom_type")).get._2.asInstanceOf[JObject]
      val res = utils.genDefaultSerializedData(null, structure, structuresMap)
      val binaryData = Array(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0).map(_.toByte)
      res.sameElements(binaryData) should be(true)
    }
  }

  describe("The jsonString2Binary method") {
    it("Should work well to generate serialized binary data of int data type of isCL in little-endian") {
      val intInputString = "1"
      val result = utils.json2Binary(parse(intInputString), null, null)
      val intInputBinary = Array(1, 0, 0, 0).map(_.toByte)
      result.sameElements(intInputBinary) should be(true)
    }

    it("Should work well to generate serialized binary data of double data type of isCL in little-endian") {
      val doubleInputString = "3.14"
      val result = utils.json2Binary(parse(doubleInputString), null, null)
      val doubleInputBinary = Array(31, -123, -21, 81, -72, 30, 9, 64).map(_.toByte)
      result.sameElements(doubleInputBinary) should be(true)
    }

    it("Should work well to generate serialized binary data of bool data type of isCL in little-endian") {
      val boolInputString = "true"
      val result = utils.json2Binary(parse(boolInputString), null, null)
      val boolInputBinary = Array(1).map(_.toByte)
      result.sameElements(boolInputBinary) should be(true)
    }

    it("Should work well to generate serialized binary data of String data of isCL in little-endian") {
      val stringInputString = "\"abcdefg\""
      val result = utils.json2Binary(parse(stringInputString), null, null)
      val stringInputBinary = Array(7,0,0,0,97,98,99,100,101,102,103).map(_.toByte)
      result.sameElements(stringInputBinary) should be(true)
    }

    it("Should work well to generate serialized binary data of List data of isCL in little-endian from well input json string") {
      val listIntInputString = "[1,2,3,4]"
      val result = utils.json2Binary(parse(listIntInputString), null, null)
      val stringInputBinary = Array(4,0,0,0,4,0,0,0,1,0,0,0,2,0,0,0,3,0,0,0,4,0,0,0).map(_.toByte)
      result.sameElements(stringInputBinary) should be(true)
    }
    it("Should throw exception when generating serialized binary data of List data of isCL in little-endian from bad input json string") {
      val listIntInputString = "[1,2,3.14,\"4\"]"
      val exception = intercept[Exception] {
        utils.json2Binary(parse(listIntInputString), null, null)
      }
      exception.getMessage should include("Wrong Json array input, only support the same type items in an array")
    }
  }
}
